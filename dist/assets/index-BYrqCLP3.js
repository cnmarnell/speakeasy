function Jw(r,n){for(var s=0;s<n.length;s++){const i=n[s];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in r)){const u=Object.getOwnPropertyDescriptor(i,o);u&&Object.defineProperty(r,o,u.get?u:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function s(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=s(o);fetch(o.href,u)}})();function Qw(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Fy(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var n=r.default;if(typeof n=="function"){var s=function i(){var o=!1;try{o=this instanceof i}catch{}return o?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};s.prototype=n.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(r).forEach(function(i){var o=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(s,i,o.get?o:{enumerable:!0,get:function(){return r[i]}})}),s}var sd={exports:{}},Ji={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Up;function Zw(){if(Up)return Ji;Up=1;var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function s(i,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var h in o)h!=="key"&&(u[h]=o[h])}else u=o;return o=u.ref,{$$typeof:r,type:i,key:f,ref:o!==void 0?o:null,props:u}}return Ji.Fragment=n,Ji.jsx=s,Ji.jsxs=s,Ji}var Mp;function Ww(){return Mp||(Mp=1,sd.exports=Zw()),sd.exports}var w=Ww(),ad={exports:{}},ue={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zp;function Fw(){if(zp)return ue;zp=1;var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),E=Symbol.iterator;function _(T){return T===null||typeof T!="object"?null:(T=E&&T[E]||T["@@iterator"],typeof T=="function"?T:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,N={};function q(T,I,X){this.props=T,this.context=I,this.refs=N,this.updater=X||C}q.prototype.isReactComponent={},q.prototype.setState=function(T,I){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,I,"setState")},q.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function U(){}U.prototype=q.prototype;function B(T,I,X){this.props=T,this.context=I,this.refs=N,this.updater=X||C}var G=B.prototype=new U;G.constructor=B,O(G,q.prototype),G.isPureReactComponent=!0;var ee=Array.isArray;function Y(){}var P={H:null,A:null,T:null,S:null},he=Object.prototype.hasOwnProperty;function pe(T,I,X){var Z=X.ref;return{$$typeof:r,type:T,key:I,ref:Z!==void 0?Z:null,props:X}}function Me(T,I){return pe(T.type,I,T.props)}function Oe(T){return typeof T=="object"&&T!==null&&T.$$typeof===r}function lt(T){var I={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(X){return I[X]})}var sn=/\/+/g;function an(T,I){return typeof T=="object"&&T!==null&&T.key!=null?lt(""+T.key):I.toString(36)}function wt(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(Y,Y):(T.status="pending",T.then(function(I){T.status==="pending"&&(T.status="fulfilled",T.value=I)},function(I){T.status==="pending"&&(T.status="rejected",T.reason=I)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function $(T,I,X,Z,de){var ye=typeof T;(ye==="undefined"||ye==="boolean")&&(T=null);var xe=!1;if(T===null)xe=!0;else switch(ye){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(T.$$typeof){case r:case n:xe=!0;break;case v:return xe=T._init,$(xe(T._payload),I,X,Z,de)}}if(xe)return de=de(T),xe=Z===""?"."+an(T,0):Z,ee(de)?(X="",xe!=null&&(X=xe.replace(sn,"$&/")+"/"),$(de,I,X,"",function(ni){return ni})):de!=null&&(Oe(de)&&(de=Me(de,X+(de.key==null||T&&T.key===de.key?"":(""+de.key).replace(sn,"$&/")+"/")+xe)),I.push(de)),1;xe=0;var _t=Z===""?".":Z+":";if(ee(T))for(var Pe=0;Pe<T.length;Pe++)Z=T[Pe],ye=_t+an(Z,Pe),xe+=$(Z,I,X,ye,de);else if(Pe=_(T),typeof Pe=="function")for(T=Pe.call(T),Pe=0;!(Z=T.next()).done;)Z=Z.value,ye=_t+an(Z,Pe++),xe+=$(Z,I,X,ye,de);else if(ye==="object"){if(typeof T.then=="function")return $(wt(T),I,X,Z,de);throw I=String(T),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.")}return xe}function K(T,I,X){if(T==null)return T;var Z=[],de=0;return $(T,Z,"","",function(ye){return I.call(X,ye,de++)}),Z}function le(T){if(T._status===-1){var I=T._result;I=I(),I.then(function(X){(T._status===0||T._status===-1)&&(T._status=1,T._result=X)},function(X){(T._status===0||T._status===-1)&&(T._status=2,T._result=X)}),T._status===-1&&(T._status=0,T._result=I)}if(T._status===1)return T._result.default;throw T._result}var Ne=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var I=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(I))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)},ze={map:K,forEach:function(T,I,X){K(T,function(){I.apply(this,arguments)},X)},count:function(T){var I=0;return K(T,function(){I++}),I},toArray:function(T){return K(T,function(I){return I})||[]},only:function(T){if(!Oe(T))throw Error("React.Children.only expected to receive a single React element child.");return T}};return ue.Activity=b,ue.Children=ze,ue.Component=q,ue.Fragment=s,ue.Profiler=o,ue.PureComponent=B,ue.StrictMode=i,ue.Suspense=p,ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,ue.__COMPILER_RUNTIME={__proto__:null,c:function(T){return P.H.useMemoCache(T)}},ue.cache=function(T){return function(){return T.apply(null,arguments)}},ue.cacheSignal=function(){return null},ue.cloneElement=function(T,I,X){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var Z=O({},T.props),de=T.key;if(I!=null)for(ye in I.key!==void 0&&(de=""+I.key),I)!he.call(I,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&I.ref===void 0||(Z[ye]=I[ye]);var ye=arguments.length-2;if(ye===1)Z.children=X;else if(1<ye){for(var xe=Array(ye),_t=0;_t<ye;_t++)xe[_t]=arguments[_t+2];Z.children=xe}return pe(T.type,de,Z)},ue.createContext=function(T){return T={$$typeof:f,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:u,_context:T},T},ue.createElement=function(T,I,X){var Z,de={},ye=null;if(I!=null)for(Z in I.key!==void 0&&(ye=""+I.key),I)he.call(I,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(de[Z]=I[Z]);var xe=arguments.length-2;if(xe===1)de.children=X;else if(1<xe){for(var _t=Array(xe),Pe=0;Pe<xe;Pe++)_t[Pe]=arguments[Pe+2];de.children=_t}if(T&&T.defaultProps)for(Z in xe=T.defaultProps,xe)de[Z]===void 0&&(de[Z]=xe[Z]);return pe(T,ye,de)},ue.createRef=function(){return{current:null}},ue.forwardRef=function(T){return{$$typeof:h,render:T}},ue.isValidElement=Oe,ue.lazy=function(T){return{$$typeof:v,_payload:{_status:-1,_result:T},_init:le}},ue.memo=function(T,I){return{$$typeof:m,type:T,compare:I===void 0?null:I}},ue.startTransition=function(T){var I=P.T,X={};P.T=X;try{var Z=T(),de=P.S;de!==null&&de(X,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(Y,Ne)}catch(ye){Ne(ye)}finally{I!==null&&X.types!==null&&(I.types=X.types),P.T=I}},ue.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},ue.use=function(T){return P.H.use(T)},ue.useActionState=function(T,I,X){return P.H.useActionState(T,I,X)},ue.useCallback=function(T,I){return P.H.useCallback(T,I)},ue.useContext=function(T){return P.H.useContext(T)},ue.useDebugValue=function(){},ue.useDeferredValue=function(T,I){return P.H.useDeferredValue(T,I)},ue.useEffect=function(T,I){return P.H.useEffect(T,I)},ue.useEffectEvent=function(T){return P.H.useEffectEvent(T)},ue.useId=function(){return P.H.useId()},ue.useImperativeHandle=function(T,I,X){return P.H.useImperativeHandle(T,I,X)},ue.useInsertionEffect=function(T,I){return P.H.useInsertionEffect(T,I)},ue.useLayoutEffect=function(T,I){return P.H.useLayoutEffect(T,I)},ue.useMemo=function(T,I){return P.H.useMemo(T,I)},ue.useOptimistic=function(T,I){return P.H.useOptimistic(T,I)},ue.useReducer=function(T,I,X){return P.H.useReducer(T,I,X)},ue.useRef=function(T){return P.H.useRef(T)},ue.useState=function(T){return P.H.useState(T)},ue.useSyncExternalStore=function(T,I,X){return P.H.useSyncExternalStore(T,I,X)},ue.useTransition=function(){return P.H.useTransition()},ue.version="19.2.0",ue}var Bp;function Fd(){return Bp||(Bp=1,ad.exports=Fw()),ad.exports}var re=Fd(),id={exports:{}},Qi={},rd={exports:{}},ld={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $p;function eS(){return $p||($p=1,(function(r){function n($,K){var le=$.length;$.push(K);e:for(;0<le;){var Ne=le-1>>>1,ze=$[Ne];if(0<o(ze,K))$[Ne]=K,$[le]=ze,le=Ne;else break e}}function s($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var K=$[0],le=$.pop();if(le!==K){$[0]=le;e:for(var Ne=0,ze=$.length,T=ze>>>1;Ne<T;){var I=2*(Ne+1)-1,X=$[I],Z=I+1,de=$[Z];if(0>o(X,le))Z<ze&&0>o(de,X)?($[Ne]=de,$[Z]=le,Ne=Z):($[Ne]=X,$[I]=le,Ne=I);else if(Z<ze&&0>o(de,le))$[Ne]=de,$[Z]=le,Ne=Z;else break e}}return K}function o($,K){var le=$.sortIndex-K.sortIndex;return le!==0?le:$.id-K.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var f=Date,h=f.now();r.unstable_now=function(){return f.now()-h}}var p=[],m=[],v=1,b=null,E=3,_=!1,C=!1,O=!1,N=!1,q=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function G($){for(var K=s(m);K!==null;){if(K.callback===null)i(m);else if(K.startTime<=$)i(m),K.sortIndex=K.expirationTime,n(p,K);else break;K=s(m)}}function ee($){if(O=!1,G($),!C)if(s(p)!==null)C=!0,Y||(Y=!0,lt());else{var K=s(m);K!==null&&wt(ee,K.startTime-$)}}var Y=!1,P=-1,he=5,pe=-1;function Me(){return N?!0:!(r.unstable_now()-pe<he)}function Oe(){if(N=!1,Y){var $=r.unstable_now();pe=$;var K=!0;try{e:{C=!1,O&&(O=!1,U(P),P=-1),_=!0;var le=E;try{t:{for(G($),b=s(p);b!==null&&!(b.expirationTime>$&&Me());){var Ne=b.callback;if(typeof Ne=="function"){b.callback=null,E=b.priorityLevel;var ze=Ne(b.expirationTime<=$);if($=r.unstable_now(),typeof ze=="function"){b.callback=ze,G($),K=!0;break t}b===s(p)&&i(p),G($)}else i(p);b=s(p)}if(b!==null)K=!0;else{var T=s(m);T!==null&&wt(ee,T.startTime-$),K=!1}}break e}finally{b=null,E=le,_=!1}K=void 0}}finally{K?lt():Y=!1}}}var lt;if(typeof B=="function")lt=function(){B(Oe)};else if(typeof MessageChannel<"u"){var sn=new MessageChannel,an=sn.port2;sn.port1.onmessage=Oe,lt=function(){an.postMessage(null)}}else lt=function(){q(Oe,0)};function wt($,K){P=q(function(){$(r.unstable_now())},K)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function($){$.callback=null},r.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):he=0<$?Math.floor(1e3/$):5},r.unstable_getCurrentPriorityLevel=function(){return E},r.unstable_next=function($){switch(E){case 1:case 2:case 3:var K=3;break;default:K=E}var le=E;E=K;try{return $()}finally{E=le}},r.unstable_requestPaint=function(){N=!0},r.unstable_runWithPriority=function($,K){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var le=E;E=$;try{return K()}finally{E=le}},r.unstable_scheduleCallback=function($,K,le){var Ne=r.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?Ne+le:Ne):le=Ne,$){case 1:var ze=-1;break;case 2:ze=250;break;case 5:ze=1073741823;break;case 4:ze=1e4;break;default:ze=5e3}return ze=le+ze,$={id:v++,callback:K,priorityLevel:$,startTime:le,expirationTime:ze,sortIndex:-1},le>Ne?($.sortIndex=le,n(m,$),s(p)===null&&$===s(m)&&(O?(U(P),P=-1):O=!0,wt(ee,le-Ne))):($.sortIndex=ze,n(p,$),C||_||(C=!0,Y||(Y=!0,lt()))),$},r.unstable_shouldYield=Me,r.unstable_wrapCallback=function($){var K=E;return function(){var le=E;E=K;try{return $.apply(this,arguments)}finally{E=le}}}})(ld)),ld}var Lp;function tS(){return Lp||(Lp=1,rd.exports=eS()),rd.exports}var od={exports:{}},pt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qp;function nS(){if(qp)return pt;qp=1;var r=Fd();function n(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var i={d:{f:s,r:function(){throw Error(n(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,m,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:p,containerInfo:m,implementation:v}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return pt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,pt.createPortal=function(p,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(n(299));return u(p,m,null,v)},pt.flushSync=function(p){var m=f.T,v=i.p;try{if(f.T=null,i.p=2,p)return p()}finally{f.T=m,i.p=v,i.d.f()}},pt.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(p,m))},pt.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},pt.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var v=m.as,b=h(v,m.crossOrigin),E=typeof m.integrity=="string"?m.integrity:void 0,_=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?i.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:b,integrity:E,fetchPriority:_}):v==="script"&&i.d.X(p,{crossOrigin:b,integrity:E,fetchPriority:_,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},pt.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=h(m.as,m.crossOrigin);i.d.M(p,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(p)},pt.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,b=h(v,m.crossOrigin);i.d.L(p,v,{crossOrigin:b,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},pt.preloadModule=function(p,m){if(typeof p=="string")if(m){var v=h(m.as,m.crossOrigin);i.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(p)},pt.requestFormReset=function(p){i.d.r(p)},pt.unstable_batchedUpdates=function(p,m){return p(m)},pt.useFormState=function(p,m,v){return f.H.useFormState(p,m,v)},pt.useFormStatus=function(){return f.H.useHostTransitionStatus()},pt.version="19.2.0",pt}var Hp;function sS(){if(Hp)return od.exports;Hp=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(n){console.error(n)}}return r(),od.exports=nS(),od.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ip;function aS(){if(Ip)return Qi;Ip=1;var r=tS(),n=Fd(),s=sS();function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function h(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(u(e)!==e)throw Error(i(188))}function m(e){var t=e.alternate;if(!t){if(t=u(e),t===null)throw Error(i(188));return t!==e?null:e}for(var a=e,l=t;;){var c=a.return;if(c===null)break;var d=c.alternate;if(d===null){if(l=c.return,l!==null){a=l;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===a)return p(c),e;if(d===l)return p(c),t;d=d.sibling}throw Error(i(188))}if(a.return!==l.return)a=c,l=d;else{for(var g=!1,y=c.child;y;){if(y===a){g=!0,a=c,l=d;break}if(y===l){g=!0,l=c,a=d;break}y=y.sibling}if(!g){for(y=d.child;y;){if(y===a){g=!0,a=d,l=c;break}if(y===l){g=!0,l=d,a=c;break}y=y.sibling}if(!g)throw Error(i(189))}}if(a.alternate!==l)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?e:t}function v(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=v(e),t!==null)return t;e=e.sibling}return null}var b=Object.assign,E=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),U=Symbol.for("react.consumer"),B=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),he=Symbol.for("react.lazy"),pe=Symbol.for("react.activity"),Me=Symbol.for("react.memo_cache_sentinel"),Oe=Symbol.iterator;function lt(e){return e===null||typeof e!="object"?null:(e=Oe&&e[Oe]||e["@@iterator"],typeof e=="function"?e:null)}var sn=Symbol.for("react.client.reference");function an(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===sn?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case O:return"Fragment";case q:return"Profiler";case N:return"StrictMode";case ee:return"Suspense";case Y:return"SuspenseList";case pe:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case C:return"Portal";case B:return e.displayName||"Context";case U:return(e._context.displayName||"Context")+".Consumer";case G:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case P:return t=e.displayName||null,t!==null?t:an(e.type)||"Memo";case he:t=e._payload,e=e._init;try{return an(e(t))}catch{}}return null}var wt=Array.isArray,$=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},Ne=[],ze=-1;function T(e){return{current:e}}function I(e){0>ze||(e.current=Ne[ze],Ne[ze]=null,ze--)}function X(e,t){ze++,Ne[ze]=e.current,e.current=t}var Z=T(null),de=T(null),ye=T(null),xe=T(null);function _t(e,t){switch(X(ye,t),X(de,e),X(Z,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?sp(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=sp(t),e=ap(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}I(Z),X(Z,e)}function Pe(){I(Z),I(de),I(ye)}function ni(e){e.memoizedState!==null&&X(xe,e);var t=Z.current,a=ap(t,e.type);t!==a&&(X(de,e),X(Z,a))}function Sr(e){de.current===e&&(I(Z),I(de)),xe.current===e&&(I(xe),Pi._currentValue=le)}var Lo,Df;function _s(e){if(Lo===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Lo=t&&t[1]||"",Df=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Lo+e+Df}var qo=!1;function Ho(e,t){if(!e||qo)return"";qo=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var H=function(){throw Error()};if(Object.defineProperty(H.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(H,[])}catch(M){var D=M}Reflect.construct(e,[],H)}else{try{H.call()}catch(M){D=M}e.call(H.prototype)}}else{try{throw Error()}catch(M){D=M}(H=e())&&typeof H.catch=="function"&&H.catch(function(){})}}catch(M){if(M&&D&&typeof M.stack=="string")return[M.stack,D.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),g=d[0],y=d[1];if(g&&y){var S=g.split(`
`),j=y.split(`
`);for(c=l=0;l<S.length&&!S[l].includes("DetermineComponentFrameRoot");)l++;for(;c<j.length&&!j[c].includes("DetermineComponentFrameRoot");)c++;if(l===S.length||c===j.length)for(l=S.length-1,c=j.length-1;1<=l&&0<=c&&S[l]!==j[c];)c--;for(;1<=l&&0<=c;l--,c--)if(S[l]!==j[c]){if(l!==1||c!==1)do if(l--,c--,0>c||S[l]!==j[c]){var z=`
`+S[l].replace(" at new "," at ");return e.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",e.displayName)),z}while(1<=l&&0<=c);break}}}finally{qo=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?_s(a):""}function Ob(e,t){switch(e.tag){case 26:case 27:case 5:return _s(e.type);case 16:return _s("Lazy");case 13:return e.child!==t&&t!==null?_s("Suspense Fallback"):_s("Suspense");case 19:return _s("SuspenseList");case 0:case 15:return Ho(e.type,!1);case 11:return Ho(e.type.render,!1);case 1:return Ho(e.type,!0);case 31:return _s("Activity");default:return""}}function Uf(e){try{var t="",a=null;do t+=Ob(e,a),a=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Io=Object.prototype.hasOwnProperty,Go=r.unstable_scheduleCallback,Vo=r.unstable_cancelCallback,xb=r.unstable_shouldYield,Cb=r.unstable_requestPaint,jt=r.unstable_now,Rb=r.unstable_getCurrentPriorityLevel,Mf=r.unstable_ImmediatePriority,zf=r.unstable_UserBlockingPriority,Er=r.unstable_NormalPriority,jb=r.unstable_LowPriority,Bf=r.unstable_IdlePriority,Nb=r.log,kb=r.unstable_setDisableYieldValue,si=null,Nt=null;function Hn(e){if(typeof Nb=="function"&&kb(e),Nt&&typeof Nt.setStrictMode=="function")try{Nt.setStrictMode(si,e)}catch{}}var kt=Math.clz32?Math.clz32:Mb,Db=Math.log,Ub=Math.LN2;function Mb(e){return e>>>=0,e===0?32:31-(Db(e)/Ub|0)|0}var Ar=256,Tr=262144,Or=4194304;function vs(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function xr(e,t,a){var l=e.pendingLanes;if(l===0)return 0;var c=0,d=e.suspendedLanes,g=e.pingedLanes;e=e.warmLanes;var y=l&134217727;return y!==0?(l=y&~d,l!==0?c=vs(l):(g&=y,g!==0?c=vs(g):a||(a=y&~e,a!==0&&(c=vs(a))))):(y=l&~d,y!==0?c=vs(y):g!==0?c=vs(g):a||(a=l&~e,a!==0&&(c=vs(a)))),c===0?0:t!==0&&t!==c&&(t&d)===0&&(d=c&-c,a=t&-t,d>=a||d===32&&(a&4194048)!==0)?t:c}function ai(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function zb(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $f(){var e=Or;return Or<<=1,(Or&62914560)===0&&(Or=4194304),e}function Po(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function ii(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Bb(e,t,a,l,c,d){var g=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var y=e.entanglements,S=e.expirationTimes,j=e.hiddenUpdates;for(a=g&~a;0<a;){var z=31-kt(a),H=1<<z;y[z]=0,S[z]=-1;var D=j[z];if(D!==null)for(j[z]=null,z=0;z<D.length;z++){var M=D[z];M!==null&&(M.lane&=-536870913)}a&=~H}l!==0&&Lf(e,l,0),d!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=d&~(g&~t))}function Lf(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-kt(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|a&261930}function qf(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var l=31-kt(a),c=1<<l;c&t|e[l]&t&&(e[l]|=t),a&=~c}}function Hf(e,t){var a=t&-t;return a=(a&42)!==0?1:Yo(a),(a&(e.suspendedLanes|t))!==0?0:a}function Yo(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ko(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function If(){var e=K.p;return e!==0?e:(e=window.event,e===void 0?32:xp(e.type))}function Gf(e,t){var a=K.p;try{return K.p=e,t()}finally{K.p=a}}var In=Math.random().toString(36).slice(2),ot="__reactFiber$"+In,St="__reactProps$"+In,Qs="__reactContainer$"+In,Xo="__reactEvents$"+In,$b="__reactListeners$"+In,Lb="__reactHandles$"+In,Vf="__reactResources$"+In,ri="__reactMarker$"+In;function Jo(e){delete e[ot],delete e[St],delete e[Xo],delete e[$b],delete e[Lb]}function Zs(e){var t=e[ot];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Qs]||a[ot]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=dp(e);e!==null;){if(a=e[ot])return a;e=dp(e)}return t}e=a,a=e.parentNode}return null}function Ws(e){if(e=e[ot]||e[Qs]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function li(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function Fs(e){var t=e[Vf];return t||(t=e[Vf]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function at(e){e[ri]=!0}var Pf=new Set,Yf={};function bs(e,t){ea(e,t),ea(e+"Capture",t)}function ea(e,t){for(Yf[e]=t,e=0;e<t.length;e++)Pf.add(t[e])}var qb=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Kf={},Xf={};function Hb(e){return Io.call(Xf,e)?!0:Io.call(Kf,e)?!1:qb.test(e)?Xf[e]=!0:(Kf[e]=!0,!1)}function Cr(e,t,a){if(Hb(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function Rr(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function bn(e,t,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+l)}}function Yt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Jf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ib(e,t,a){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var c=l.get,d=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(g){a=""+g,d.call(this,g)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(g){a=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Qo(e){if(!e._valueTracker){var t=Jf(e)?"checked":"value";e._valueTracker=Ib(e,t,""+e[t])}}function Qf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),l="";return e&&(l=Jf(e)?e.checked?"true":"false":e.value),e=l,e!==a?(t.setValue(e),!0):!1}function jr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Gb=/[\n"\\]/g;function Kt(e){return e.replace(Gb,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Zo(e,t,a,l,c,d,g,y){e.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.type=g:e.removeAttribute("type"),t!=null?g==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Yt(t)):e.value!==""+Yt(t)&&(e.value=""+Yt(t)):g!=="submit"&&g!=="reset"||e.removeAttribute("value"),t!=null?Wo(e,g,Yt(t)):a!=null?Wo(e,g,Yt(a)):l!=null&&e.removeAttribute("value"),c==null&&d!=null&&(e.defaultChecked=!!d),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.name=""+Yt(y):e.removeAttribute("name")}function Zf(e,t,a,l,c,d,g,y){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),t!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||t!=null)){Qo(e);return}a=a!=null?""+Yt(a):"",t=t!=null?""+Yt(t):a,y||t===e.value||(e.value=t),e.defaultValue=t}l=l??c,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=y?e.checked:!!l,e.defaultChecked=!!l,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.name=g),Qo(e)}function Wo(e,t,a){t==="number"&&jr(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function ta(e,t,a,l){if(e=e.options,t){t={};for(var c=0;c<a.length;c++)t["$"+a[c]]=!0;for(a=0;a<e.length;a++)c=t.hasOwnProperty("$"+e[a].value),e[a].selected!==c&&(e[a].selected=c),c&&l&&(e[a].defaultSelected=!0)}else{for(a=""+Yt(a),t=null,c=0;c<e.length;c++){if(e[c].value===a){e[c].selected=!0,l&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Wf(e,t,a){if(t!=null&&(t=""+Yt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Yt(a):""}function Ff(e,t,a,l){if(t==null){if(l!=null){if(a!=null)throw Error(i(92));if(wt(l)){if(1<l.length)throw Error(i(93));l=l[0]}a=l}a==null&&(a=""),t=a}a=Yt(t),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l),Qo(e)}function na(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Vb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function eh(e,t,a){var l=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,a):typeof a!="number"||a===0||Vb.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function th(e,t,a){if(t!=null&&typeof t!="object")throw Error(i(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var c in t)l=t[c],t.hasOwnProperty(c)&&a[c]!==l&&eh(e,c,l)}else for(var d in t)t.hasOwnProperty(d)&&eh(e,d,t[d])}function Fo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Yb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Nr(e){return Yb.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function wn(){}var eu=null;function tu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var sa=null,aa=null;function nh(e){var t=Ws(e);if(t&&(e=t.stateNode)){var a=e[St]||null;e:switch(e=t.stateNode,t.type){case"input":if(Zo(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Kt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var l=a[t];if(l!==e&&l.form===e.form){var c=l[St]||null;if(!c)throw Error(i(90));Zo(l,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<a.length;t++)l=a[t],l.form===e.form&&Qf(l)}break e;case"textarea":Wf(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&ta(e,!!a.multiple,t,!1)}}}var nu=!1;function sh(e,t,a){if(nu)return e(t,a);nu=!0;try{var l=e(t);return l}finally{if(nu=!1,(sa!==null||aa!==null)&&(_l(),sa&&(t=sa,e=aa,aa=sa=null,nh(t),e)))for(t=0;t<e.length;t++)nh(e[t])}}function oi(e,t){var a=e.stateNode;if(a===null)return null;var l=a[St]||null;if(l===null)return null;a=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(i(231,t,typeof a));return a}var Sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),su=!1;if(Sn)try{var ui={};Object.defineProperty(ui,"passive",{get:function(){su=!0}}),window.addEventListener("test",ui,ui),window.removeEventListener("test",ui,ui)}catch{su=!1}var Gn=null,au=null,kr=null;function ah(){if(kr)return kr;var e,t=au,a=t.length,l,c="value"in Gn?Gn.value:Gn.textContent,d=c.length;for(e=0;e<a&&t[e]===c[e];e++);var g=a-e;for(l=1;l<=g&&t[a-l]===c[d-l];l++);return kr=c.slice(e,1<l?1-l:void 0)}function Dr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ur(){return!0}function ih(){return!1}function Et(e){function t(a,l,c,d,g){this._reactName=a,this._targetInst=c,this.type=l,this.nativeEvent=d,this.target=g,this.currentTarget=null;for(var y in e)e.hasOwnProperty(y)&&(a=e[y],this[y]=a?a(d):d[y]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ur:ih,this.isPropagationStopped=ih,this}return b(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ur)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ur)},persist:function(){},isPersistent:Ur}),t}var ws={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mr=Et(ws),ci=b({},ws,{view:0,detail:0}),Kb=Et(ci),iu,ru,di,zr=b({},ci,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ou,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==di&&(di&&e.type==="mousemove"?(iu=e.screenX-di.screenX,ru=e.screenY-di.screenY):ru=iu=0,di=e),iu)},movementY:function(e){return"movementY"in e?e.movementY:ru}}),rh=Et(zr),Xb=b({},zr,{dataTransfer:0}),Jb=Et(Xb),Qb=b({},ci,{relatedTarget:0}),lu=Et(Qb),Zb=b({},ws,{animationName:0,elapsedTime:0,pseudoElement:0}),Wb=Et(Zb),Fb=b({},ws,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),e0=Et(Fb),t0=b({},ws,{data:0}),lh=Et(t0),n0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},s0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},a0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function i0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=a0[e])?!!t[e]:!1}function ou(){return i0}var r0=b({},ci,{key:function(e){if(e.key){var t=n0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Dr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?s0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ou,charCode:function(e){return e.type==="keypress"?Dr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Dr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),l0=Et(r0),o0=b({},zr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oh=Et(o0),u0=b({},ci,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ou}),c0=Et(u0),d0=b({},ws,{propertyName:0,elapsedTime:0,pseudoElement:0}),f0=Et(d0),h0=b({},zr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),m0=Et(h0),g0=b({},ws,{newState:0,oldState:0}),p0=Et(g0),y0=[9,13,27,32],uu=Sn&&"CompositionEvent"in window,fi=null;Sn&&"documentMode"in document&&(fi=document.documentMode);var _0=Sn&&"TextEvent"in window&&!fi,uh=Sn&&(!uu||fi&&8<fi&&11>=fi),ch=" ",dh=!1;function fh(e,t){switch(e){case"keyup":return y0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ia=!1;function v0(e,t){switch(e){case"compositionend":return hh(t);case"keypress":return t.which!==32?null:(dh=!0,ch);case"textInput":return e=t.data,e===ch&&dh?null:e;default:return null}}function b0(e,t){if(ia)return e==="compositionend"||!uu&&fh(e,t)?(e=ah(),kr=au=Gn=null,ia=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return uh&&t.locale!=="ko"?null:t.data;default:return null}}var w0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!w0[e.type]:t==="textarea"}function gh(e,t,a,l){sa?aa?aa.push(l):aa=[l]:sa=l,t=Tl(t,"onChange"),0<t.length&&(a=new Mr("onChange","change",null,a,l),e.push({event:a,listeners:t}))}var hi=null,mi=null;function S0(e){Zg(e,0)}function Br(e){var t=li(e);if(Qf(t))return e}function ph(e,t){if(e==="change")return t}var yh=!1;if(Sn){var cu;if(Sn){var du="oninput"in document;if(!du){var _h=document.createElement("div");_h.setAttribute("oninput","return;"),du=typeof _h.oninput=="function"}cu=du}else cu=!1;yh=cu&&(!document.documentMode||9<document.documentMode)}function vh(){hi&&(hi.detachEvent("onpropertychange",bh),mi=hi=null)}function bh(e){if(e.propertyName==="value"&&Br(mi)){var t=[];gh(t,mi,e,tu(e)),sh(S0,t)}}function E0(e,t,a){e==="focusin"?(vh(),hi=t,mi=a,hi.attachEvent("onpropertychange",bh)):e==="focusout"&&vh()}function A0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Br(mi)}function T0(e,t){if(e==="click")return Br(t)}function O0(e,t){if(e==="input"||e==="change")return Br(t)}function x0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Dt=typeof Object.is=="function"?Object.is:x0;function gi(e,t){if(Dt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),l=Object.keys(t);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var c=a[l];if(!Io.call(t,c)||!Dt(e[c],t[c]))return!1}return!0}function wh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Sh(e,t){var a=wh(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=t&&l>=t)return{node:a,offset:t-e};e=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=wh(a)}}function Eh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Eh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ah(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=jr(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=jr(e.document)}return t}function fu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var C0=Sn&&"documentMode"in document&&11>=document.documentMode,ra=null,hu=null,pi=null,mu=!1;function Th(e,t,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;mu||ra==null||ra!==jr(l)||(l=ra,"selectionStart"in l&&fu(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),pi&&gi(pi,l)||(pi=l,l=Tl(hu,"onSelect"),0<l.length&&(t=new Mr("onSelect","select",null,t,a),e.push({event:t,listeners:l}),t.target=ra)))}function Ss(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var la={animationend:Ss("Animation","AnimationEnd"),animationiteration:Ss("Animation","AnimationIteration"),animationstart:Ss("Animation","AnimationStart"),transitionrun:Ss("Transition","TransitionRun"),transitionstart:Ss("Transition","TransitionStart"),transitioncancel:Ss("Transition","TransitionCancel"),transitionend:Ss("Transition","TransitionEnd")},gu={},Oh={};Sn&&(Oh=document.createElement("div").style,"AnimationEvent"in window||(delete la.animationend.animation,delete la.animationiteration.animation,delete la.animationstart.animation),"TransitionEvent"in window||delete la.transitionend.transition);function Es(e){if(gu[e])return gu[e];if(!la[e])return e;var t=la[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Oh)return gu[e]=t[a];return e}var xh=Es("animationend"),Ch=Es("animationiteration"),Rh=Es("animationstart"),R0=Es("transitionrun"),j0=Es("transitionstart"),N0=Es("transitioncancel"),jh=Es("transitionend"),Nh=new Map,pu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");pu.push("scrollEnd");function rn(e,t){Nh.set(e,t),bs(t,[e])}var $r=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Xt=[],oa=0,yu=0;function Lr(){for(var e=oa,t=yu=oa=0;t<e;){var a=Xt[t];Xt[t++]=null;var l=Xt[t];Xt[t++]=null;var c=Xt[t];Xt[t++]=null;var d=Xt[t];if(Xt[t++]=null,l!==null&&c!==null){var g=l.pending;g===null?c.next=c:(c.next=g.next,g.next=c),l.pending=c}d!==0&&kh(a,c,d)}}function qr(e,t,a,l){Xt[oa++]=e,Xt[oa++]=t,Xt[oa++]=a,Xt[oa++]=l,yu|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function _u(e,t,a,l){return qr(e,t,a,l),Hr(e)}function As(e,t){return qr(e,null,null,t),Hr(e)}function kh(e,t,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var c=!1,d=e.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(c=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,c&&t!==null&&(c=31-kt(a),e=d.hiddenUpdates,l=e[c],l===null?e[c]=[t]:l.push(t),t.lane=a|536870912),d):null}function Hr(e){if(50<$i)throw $i=0,xc=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ua={};function k0(e,t,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ut(e,t,a,l){return new k0(e,t,a,l)}function vu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function En(e,t){var a=e.alternate;return a===null?(a=Ut(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Dh(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ir(e,t,a,l,c,d){var g=0;if(l=e,typeof e=="function")vu(e)&&(g=1);else if(typeof e=="string")g=Bw(e,a,Z.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case pe:return e=Ut(31,a,t,c),e.elementType=pe,e.lanes=d,e;case O:return Ts(a.children,c,d,t);case N:g=8,c|=24;break;case q:return e=Ut(12,a,t,c|2),e.elementType=q,e.lanes=d,e;case ee:return e=Ut(13,a,t,c),e.elementType=ee,e.lanes=d,e;case Y:return e=Ut(19,a,t,c),e.elementType=Y,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case B:g=10;break e;case U:g=9;break e;case G:g=11;break e;case P:g=14;break e;case he:g=16,l=null;break e}g=29,a=Error(i(130,e===null?"null":typeof e,"")),l=null}return t=Ut(g,a,t,c),t.elementType=e,t.type=l,t.lanes=d,t}function Ts(e,t,a,l){return e=Ut(7,e,l,t),e.lanes=a,e}function bu(e,t,a){return e=Ut(6,e,null,t),e.lanes=a,e}function Uh(e){var t=Ut(18,null,null,0);return t.stateNode=e,t}function wu(e,t,a){return t=Ut(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Mh=new WeakMap;function Jt(e,t){if(typeof e=="object"&&e!==null){var a=Mh.get(e);return a!==void 0?a:(t={value:e,source:t,stack:Uf(t)},Mh.set(e,t),t)}return{value:e,source:t,stack:Uf(t)}}var ca=[],da=0,Gr=null,yi=0,Qt=[],Zt=0,Vn=null,hn=1,mn="";function An(e,t){ca[da++]=yi,ca[da++]=Gr,Gr=e,yi=t}function zh(e,t,a){Qt[Zt++]=hn,Qt[Zt++]=mn,Qt[Zt++]=Vn,Vn=e;var l=hn;e=mn;var c=32-kt(l)-1;l&=~(1<<c),a+=1;var d=32-kt(t)+c;if(30<d){var g=c-c%5;d=(l&(1<<g)-1).toString(32),l>>=g,c-=g,hn=1<<32-kt(t)+c|a<<c|l,mn=d+e}else hn=1<<d|a<<c|l,mn=e}function Su(e){e.return!==null&&(An(e,1),zh(e,1,0))}function Eu(e){for(;e===Gr;)Gr=ca[--da],ca[da]=null,yi=ca[--da],ca[da]=null;for(;e===Vn;)Vn=Qt[--Zt],Qt[Zt]=null,mn=Qt[--Zt],Qt[Zt]=null,hn=Qt[--Zt],Qt[Zt]=null}function Bh(e,t){Qt[Zt++]=hn,Qt[Zt++]=mn,Qt[Zt++]=Vn,hn=t.id,mn=t.overflow,Vn=e}var ut=null,Le=null,Se=!1,Pn=null,Wt=!1,Au=Error(i(519));function Yn(e){var t=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _i(Jt(t,e)),Au}function $h(e){var t=e.stateNode,a=e.type,l=e.memoizedProps;switch(t[ot]=e,t[St]=l,a){case"dialog":ve("cancel",t),ve("close",t);break;case"iframe":case"object":case"embed":ve("load",t);break;case"video":case"audio":for(a=0;a<qi.length;a++)ve(qi[a],t);break;case"source":ve("error",t);break;case"img":case"image":case"link":ve("error",t),ve("load",t);break;case"details":ve("toggle",t);break;case"input":ve("invalid",t),Zf(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":ve("invalid",t);break;case"textarea":ve("invalid",t),Ff(t,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||l.suppressHydrationWarning===!0||tp(t.textContent,a)?(l.popover!=null&&(ve("beforetoggle",t),ve("toggle",t)),l.onScroll!=null&&ve("scroll",t),l.onScrollEnd!=null&&ve("scrollend",t),l.onClick!=null&&(t.onclick=wn),t=!0):t=!1,t||Yn(e,!0)}function Lh(e){for(ut=e.return;ut;)switch(ut.tag){case 5:case 31:case 13:Wt=!1;return;case 27:case 3:Wt=!0;return;default:ut=ut.return}}function fa(e){if(e!==ut)return!1;if(!Se)return Lh(e),Se=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Ic(e.type,e.memoizedProps)),a=!a),a&&Le&&Yn(e),Lh(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));Le=cp(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));Le=cp(e)}else t===27?(t=Le,rs(e.type)?(e=Kc,Kc=null,Le=e):Le=t):Le=ut?en(e.stateNode.nextSibling):null;return!0}function Os(){Le=ut=null,Se=!1}function Tu(){var e=Pn;return e!==null&&(xt===null?xt=e:xt.push.apply(xt,e),Pn=null),e}function _i(e){Pn===null?Pn=[e]:Pn.push(e)}var Ou=T(null),xs=null,Tn=null;function Kn(e,t,a){X(Ou,t._currentValue),t._currentValue=a}function On(e){e._currentValue=Ou.current,I(Ou)}function xu(e,t,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===a)break;e=e.return}}function Cu(e,t,a,l){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var d=c.dependencies;if(d!==null){var g=c.child;d=d.firstContext;e:for(;d!==null;){var y=d;d=c;for(var S=0;S<t.length;S++)if(y.context===t[S]){d.lanes|=a,y=d.alternate,y!==null&&(y.lanes|=a),xu(d.return,a,e),l||(g=null);break e}d=y.next}}else if(c.tag===18){if(g=c.return,g===null)throw Error(i(341));g.lanes|=a,d=g.alternate,d!==null&&(d.lanes|=a),xu(g,a,e),g=null}else g=c.child;if(g!==null)g.return=c;else for(g=c;g!==null;){if(g===e){g=null;break}if(c=g.sibling,c!==null){c.return=g.return,g=c;break}g=g.return}c=g}}function ha(e,t,a,l){e=null;for(var c=t,d=!1;c!==null;){if(!d){if((c.flags&524288)!==0)d=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var g=c.alternate;if(g===null)throw Error(i(387));if(g=g.memoizedProps,g!==null){var y=c.type;Dt(c.pendingProps.value,g.value)||(e!==null?e.push(y):e=[y])}}else if(c===xe.current){if(g=c.alternate,g===null)throw Error(i(387));g.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(Pi):e=[Pi])}c=c.return}e!==null&&Cu(t,e,a,l),t.flags|=262144}function Vr(e){for(e=e.firstContext;e!==null;){if(!Dt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Cs(e){xs=e,Tn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ct(e){return qh(xs,e)}function Pr(e,t){return xs===null&&Cs(e),qh(e,t)}function qh(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},Tn===null){if(e===null)throw Error(i(308));Tn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Tn=Tn.next=t;return a}var D0=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},U0=r.unstable_scheduleCallback,M0=r.unstable_NormalPriority,Xe={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ru(){return{controller:new D0,data:new Map,refCount:0}}function vi(e){e.refCount--,e.refCount===0&&U0(M0,function(){e.controller.abort()})}var bi=null,ju=0,ma=0,ga=null;function z0(e,t){if(bi===null){var a=bi=[];ju=0,ma=Dc(),ga={status:"pending",value:void 0,then:function(l){a.push(l)}}}return ju++,t.then(Hh,Hh),t}function Hh(){if(--ju===0&&bi!==null){ga!==null&&(ga.status="fulfilled");var e=bi;bi=null,ma=0,ga=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function B0(e,t){var a=[],l={status:"pending",value:null,reason:null,then:function(c){a.push(c)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var c=0;c<a.length;c++)(0,a[c])(t)},function(c){for(l.status="rejected",l.reason=c,c=0;c<a.length;c++)(0,a[c])(void 0)}),l}var Ih=$.S;$.S=function(e,t){Tg=jt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&z0(e,t),Ih!==null&&Ih(e,t)};var Rs=T(null);function Nu(){var e=Rs.current;return e!==null?e:Be.pooledCache}function Yr(e,t){t===null?X(Rs,Rs.current):X(Rs,t.pool)}function Gh(){var e=Nu();return e===null?null:{parent:Xe._currentValue,pool:e}}var pa=Error(i(460)),ku=Error(i(474)),Kr=Error(i(542)),Xr={then:function(){}};function Vh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ph(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(wn,wn),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Kh(e),e;default:if(typeof t.status=="string")t.then(wn,wn);else{if(e=Be,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=l}},function(l){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Kh(e),e}throw Ns=t,pa}}function js(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ns=a,pa):a}}var Ns=null;function Yh(){if(Ns===null)throw Error(i(459));var e=Ns;return Ns=null,e}function Kh(e){if(e===pa||e===Kr)throw Error(i(483))}var ya=null,wi=0;function Jr(e){var t=wi;return wi+=1,ya===null&&(ya=[]),Ph(ya,e,t)}function Si(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Qr(e,t){throw t.$$typeof===E?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Xh(e){function t(x,A){if(e){var R=x.deletions;R===null?(x.deletions=[A],x.flags|=16):R.push(A)}}function a(x,A){if(!e)return null;for(;A!==null;)t(x,A),A=A.sibling;return null}function l(x){for(var A=new Map;x!==null;)x.key!==null?A.set(x.key,x):A.set(x.index,x),x=x.sibling;return A}function c(x,A){return x=En(x,A),x.index=0,x.sibling=null,x}function d(x,A,R){return x.index=R,e?(R=x.alternate,R!==null?(R=R.index,R<A?(x.flags|=67108866,A):R):(x.flags|=67108866,A)):(x.flags|=1048576,A)}function g(x){return e&&x.alternate===null&&(x.flags|=67108866),x}function y(x,A,R,L){return A===null||A.tag!==6?(A=bu(R,x.mode,L),A.return=x,A):(A=c(A,R),A.return=x,A)}function S(x,A,R,L){var ne=R.type;return ne===O?z(x,A,R.props.children,L,R.key):A!==null&&(A.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===he&&js(ne)===A.type)?(A=c(A,R.props),Si(A,R),A.return=x,A):(A=Ir(R.type,R.key,R.props,null,x.mode,L),Si(A,R),A.return=x,A)}function j(x,A,R,L){return A===null||A.tag!==4||A.stateNode.containerInfo!==R.containerInfo||A.stateNode.implementation!==R.implementation?(A=wu(R,x.mode,L),A.return=x,A):(A=c(A,R.children||[]),A.return=x,A)}function z(x,A,R,L,ne){return A===null||A.tag!==7?(A=Ts(R,x.mode,L,ne),A.return=x,A):(A=c(A,R),A.return=x,A)}function H(x,A,R){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return A=bu(""+A,x.mode,R),A.return=x,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case _:return R=Ir(A.type,A.key,A.props,null,x.mode,R),Si(R,A),R.return=x,R;case C:return A=wu(A,x.mode,R),A.return=x,A;case he:return A=js(A),H(x,A,R)}if(wt(A)||lt(A))return A=Ts(A,x.mode,R,null),A.return=x,A;if(typeof A.then=="function")return H(x,Jr(A),R);if(A.$$typeof===B)return H(x,Pr(x,A),R);Qr(x,A)}return null}function D(x,A,R,L){var ne=A!==null?A.key:null;if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return ne!==null?null:y(x,A,""+R,L);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case _:return R.key===ne?S(x,A,R,L):null;case C:return R.key===ne?j(x,A,R,L):null;case he:return R=js(R),D(x,A,R,L)}if(wt(R)||lt(R))return ne!==null?null:z(x,A,R,L,null);if(typeof R.then=="function")return D(x,A,Jr(R),L);if(R.$$typeof===B)return D(x,A,Pr(x,R),L);Qr(x,R)}return null}function M(x,A,R,L,ne){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return x=x.get(R)||null,y(A,x,""+L,ne);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case _:return x=x.get(L.key===null?R:L.key)||null,S(A,x,L,ne);case C:return x=x.get(L.key===null?R:L.key)||null,j(A,x,L,ne);case he:return L=js(L),M(x,A,R,L,ne)}if(wt(L)||lt(L))return x=x.get(R)||null,z(A,x,L,ne,null);if(typeof L.then=="function")return M(x,A,R,Jr(L),ne);if(L.$$typeof===B)return M(x,A,R,Pr(A,L),ne);Qr(A,L)}return null}function J(x,A,R,L){for(var ne=null,Ee=null,W=A,me=A=0,we=null;W!==null&&me<R.length;me++){W.index>me?(we=W,W=null):we=W.sibling;var Ae=D(x,W,R[me],L);if(Ae===null){W===null&&(W=we);break}e&&W&&Ae.alternate===null&&t(x,W),A=d(Ae,A,me),Ee===null?ne=Ae:Ee.sibling=Ae,Ee=Ae,W=we}if(me===R.length)return a(x,W),Se&&An(x,me),ne;if(W===null){for(;me<R.length;me++)W=H(x,R[me],L),W!==null&&(A=d(W,A,me),Ee===null?ne=W:Ee.sibling=W,Ee=W);return Se&&An(x,me),ne}for(W=l(W);me<R.length;me++)we=M(W,x,me,R[me],L),we!==null&&(e&&we.alternate!==null&&W.delete(we.key===null?me:we.key),A=d(we,A,me),Ee===null?ne=we:Ee.sibling=we,Ee=we);return e&&W.forEach(function(ds){return t(x,ds)}),Se&&An(x,me),ne}function ie(x,A,R,L){if(R==null)throw Error(i(151));for(var ne=null,Ee=null,W=A,me=A=0,we=null,Ae=R.next();W!==null&&!Ae.done;me++,Ae=R.next()){W.index>me?(we=W,W=null):we=W.sibling;var ds=D(x,W,Ae.value,L);if(ds===null){W===null&&(W=we);break}e&&W&&ds.alternate===null&&t(x,W),A=d(ds,A,me),Ee===null?ne=ds:Ee.sibling=ds,Ee=ds,W=we}if(Ae.done)return a(x,W),Se&&An(x,me),ne;if(W===null){for(;!Ae.done;me++,Ae=R.next())Ae=H(x,Ae.value,L),Ae!==null&&(A=d(Ae,A,me),Ee===null?ne=Ae:Ee.sibling=Ae,Ee=Ae);return Se&&An(x,me),ne}for(W=l(W);!Ae.done;me++,Ae=R.next())Ae=M(W,x,me,Ae.value,L),Ae!==null&&(e&&Ae.alternate!==null&&W.delete(Ae.key===null?me:Ae.key),A=d(Ae,A,me),Ee===null?ne=Ae:Ee.sibling=Ae,Ee=Ae);return e&&W.forEach(function(Xw){return t(x,Xw)}),Se&&An(x,me),ne}function Ue(x,A,R,L){if(typeof R=="object"&&R!==null&&R.type===O&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case _:e:{for(var ne=R.key;A!==null;){if(A.key===ne){if(ne=R.type,ne===O){if(A.tag===7){a(x,A.sibling),L=c(A,R.props.children),L.return=x,x=L;break e}}else if(A.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===he&&js(ne)===A.type){a(x,A.sibling),L=c(A,R.props),Si(L,R),L.return=x,x=L;break e}a(x,A);break}else t(x,A);A=A.sibling}R.type===O?(L=Ts(R.props.children,x.mode,L,R.key),L.return=x,x=L):(L=Ir(R.type,R.key,R.props,null,x.mode,L),Si(L,R),L.return=x,x=L)}return g(x);case C:e:{for(ne=R.key;A!==null;){if(A.key===ne)if(A.tag===4&&A.stateNode.containerInfo===R.containerInfo&&A.stateNode.implementation===R.implementation){a(x,A.sibling),L=c(A,R.children||[]),L.return=x,x=L;break e}else{a(x,A);break}else t(x,A);A=A.sibling}L=wu(R,x.mode,L),L.return=x,x=L}return g(x);case he:return R=js(R),Ue(x,A,R,L)}if(wt(R))return J(x,A,R,L);if(lt(R)){if(ne=lt(R),typeof ne!="function")throw Error(i(150));return R=ne.call(R),ie(x,A,R,L)}if(typeof R.then=="function")return Ue(x,A,Jr(R),L);if(R.$$typeof===B)return Ue(x,A,Pr(x,R),L);Qr(x,R)}return typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint"?(R=""+R,A!==null&&A.tag===6?(a(x,A.sibling),L=c(A,R),L.return=x,x=L):(a(x,A),L=bu(R,x.mode,L),L.return=x,x=L),g(x)):a(x,A)}return function(x,A,R,L){try{wi=0;var ne=Ue(x,A,R,L);return ya=null,ne}catch(W){if(W===pa||W===Kr)throw W;var Ee=Ut(29,W,null,x.mode);return Ee.lanes=L,Ee.return=x,Ee}finally{}}}var ks=Xh(!0),Jh=Xh(!1),Xn=!1;function Du(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Uu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Jn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Qn(e,t,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Te&2)!==0){var c=l.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),l.pending=t,t=Hr(e),kh(e,null,a),t}return qr(e,l,t,a),Hr(e)}function Ei(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,qf(e,a)}}function Mu(e,t){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var c=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var g={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?c=d=g:d=d.next=g,a=a.next}while(a!==null);d===null?c=d=t:d=d.next=t}else c=d=t;a={baseState:l.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var zu=!1;function Ai(){if(zu){var e=ga;if(e!==null)throw e}}function Ti(e,t,a,l){zu=!1;var c=e.updateQueue;Xn=!1;var d=c.firstBaseUpdate,g=c.lastBaseUpdate,y=c.shared.pending;if(y!==null){c.shared.pending=null;var S=y,j=S.next;S.next=null,g===null?d=j:g.next=j,g=S;var z=e.alternate;z!==null&&(z=z.updateQueue,y=z.lastBaseUpdate,y!==g&&(y===null?z.firstBaseUpdate=j:y.next=j,z.lastBaseUpdate=S))}if(d!==null){var H=c.baseState;g=0,z=j=S=null,y=d;do{var D=y.lane&-536870913,M=D!==y.lane;if(M?(be&D)===D:(l&D)===D){D!==0&&D===ma&&(zu=!0),z!==null&&(z=z.next={lane:0,tag:y.tag,payload:y.payload,callback:null,next:null});e:{var J=e,ie=y;D=t;var Ue=a;switch(ie.tag){case 1:if(J=ie.payload,typeof J=="function"){H=J.call(Ue,H,D);break e}H=J;break e;case 3:J.flags=J.flags&-65537|128;case 0:if(J=ie.payload,D=typeof J=="function"?J.call(Ue,H,D):J,D==null)break e;H=b({},H,D);break e;case 2:Xn=!0}}D=y.callback,D!==null&&(e.flags|=64,M&&(e.flags|=8192),M=c.callbacks,M===null?c.callbacks=[D]:M.push(D))}else M={lane:D,tag:y.tag,payload:y.payload,callback:y.callback,next:null},z===null?(j=z=M,S=H):z=z.next=M,g|=D;if(y=y.next,y===null){if(y=c.shared.pending,y===null)break;M=y,y=M.next,M.next=null,c.lastBaseUpdate=M,c.shared.pending=null}}while(!0);z===null&&(S=H),c.baseState=S,c.firstBaseUpdate=j,c.lastBaseUpdate=z,d===null&&(c.shared.lanes=0),ts|=g,e.lanes=g,e.memoizedState=H}}function Qh(e,t){if(typeof e!="function")throw Error(i(191,e));e.call(t)}function Zh(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Qh(a[e],t)}var _a=T(null),Zr=T(0);function Wh(e,t){e=Mn,X(Zr,e),X(_a,t),Mn=e|t.baseLanes}function Bu(){X(Zr,Mn),X(_a,_a.current)}function $u(){Mn=Zr.current,I(_a),I(Zr)}var Mt=T(null),Ft=null;function Zn(e){var t=e.alternate;X(Ye,Ye.current&1),X(Mt,e),Ft===null&&(t===null||_a.current!==null||t.memoizedState!==null)&&(Ft=e)}function Lu(e){X(Ye,Ye.current),X(Mt,e),Ft===null&&(Ft=e)}function Fh(e){e.tag===22?(X(Ye,Ye.current),X(Mt,e),Ft===null&&(Ft=e)):Wn()}function Wn(){X(Ye,Ye.current),X(Mt,Mt.current)}function zt(e){I(Mt),Ft===e&&(Ft=null),I(Ye)}var Ye=T(0);function Wr(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Pc(a)||Yc(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var xn=0,fe=null,ke=null,Je=null,Fr=!1,va=!1,Ds=!1,el=0,Oi=0,ba=null,$0=0;function Ge(){throw Error(i(321))}function qu(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Dt(e[a],t[a]))return!1;return!0}function Hu(e,t,a,l,c,d){return xn=d,fe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$.H=e===null||e.memoizedState===null?zm:nc,Ds=!1,d=a(l,c),Ds=!1,va&&(d=tm(t,a,l,c)),em(e),d}function em(e){$.H=Ri;var t=ke!==null&&ke.next!==null;if(xn=0,Je=ke=fe=null,Fr=!1,Oi=0,ba=null,t)throw Error(i(300));e===null||Qe||(e=e.dependencies,e!==null&&Vr(e)&&(Qe=!0))}function tm(e,t,a,l){fe=e;var c=0;do{if(va&&(ba=null),Oi=0,va=!1,25<=c)throw Error(i(301));if(c+=1,Je=ke=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}$.H=Bm,d=t(a,l)}while(va);return d}function L0(){var e=$.H,t=e.useState()[0];return t=typeof t.then=="function"?xi(t):t,e=e.useState()[0],(ke!==null?ke.memoizedState:null)!==e&&(fe.flags|=1024),t}function Iu(){var e=el!==0;return el=0,e}function Gu(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function Vu(e){if(Fr){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Fr=!1}xn=0,Je=ke=fe=null,va=!1,Oi=el=0,ba=null}function vt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?fe.memoizedState=Je=e:Je=Je.next=e,Je}function Ke(){if(ke===null){var e=fe.alternate;e=e!==null?e.memoizedState:null}else e=ke.next;var t=Je===null?fe.memoizedState:Je.next;if(t!==null)Je=t,ke=e;else{if(e===null)throw fe.alternate===null?Error(i(467)):Error(i(310));ke=e,e={memoizedState:ke.memoizedState,baseState:ke.baseState,baseQueue:ke.baseQueue,queue:ke.queue,next:null},Je===null?fe.memoizedState=Je=e:Je=Je.next=e}return Je}function tl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xi(e){var t=Oi;return Oi+=1,ba===null&&(ba=[]),e=Ph(ba,e,t),t=fe,(Je===null?t.memoizedState:Je.next)===null&&(t=t.alternate,$.H=t===null||t.memoizedState===null?zm:nc),e}function nl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return xi(e);if(e.$$typeof===B)return ct(e)}throw Error(i(438,String(e)))}function Pu(e){var t=null,a=fe.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var l=fe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=tl(),fe.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),l=0;l<e;l++)a[l]=Me;return t.index++,a}function Cn(e,t){return typeof t=="function"?t(e):t}function sl(e){var t=Ke();return Yu(t,ke,e)}function Yu(e,t,a){var l=e.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=a;var c=e.baseQueue,d=l.pending;if(d!==null){if(c!==null){var g=c.next;c.next=d.next,d.next=g}t.baseQueue=c=d,l.pending=null}if(d=e.baseState,c===null)e.memoizedState=d;else{t=c.next;var y=g=null,S=null,j=t,z=!1;do{var H=j.lane&-536870913;if(H!==j.lane?(be&H)===H:(xn&H)===H){var D=j.revertLane;if(D===0)S!==null&&(S=S.next={lane:0,revertLane:0,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),H===ma&&(z=!0);else if((xn&D)===D){j=j.next,D===ma&&(z=!0);continue}else H={lane:0,revertLane:j.revertLane,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},S===null?(y=S=H,g=d):S=S.next=H,fe.lanes|=D,ts|=D;H=j.action,Ds&&a(d,H),d=j.hasEagerState?j.eagerState:a(d,H)}else D={lane:H,revertLane:j.revertLane,gesture:j.gesture,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},S===null?(y=S=D,g=d):S=S.next=D,fe.lanes|=H,ts|=H;j=j.next}while(j!==null&&j!==t);if(S===null?g=d:S.next=y,!Dt(d,e.memoizedState)&&(Qe=!0,z&&(a=ga,a!==null)))throw a;e.memoizedState=d,e.baseState=g,e.baseQueue=S,l.lastRenderedState=d}return c===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Ku(e){var t=Ke(),a=t.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=e;var l=a.dispatch,c=a.pending,d=t.memoizedState;if(c!==null){a.pending=null;var g=c=c.next;do d=e(d,g.action),g=g.next;while(g!==c);Dt(d,t.memoizedState)||(Qe=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),a.lastRenderedState=d}return[d,l]}function nm(e,t,a){var l=fe,c=Ke(),d=Se;if(d){if(a===void 0)throw Error(i(407));a=a()}else a=t();var g=!Dt((ke||c).memoizedState,a);if(g&&(c.memoizedState=a,Qe=!0),c=c.queue,Qu(im.bind(null,l,c,e),[e]),c.getSnapshot!==t||g||Je!==null&&Je.memoizedState.tag&1){if(l.flags|=2048,wa(9,{destroy:void 0},am.bind(null,l,c,a,t),null),Be===null)throw Error(i(349));d||(xn&127)!==0||sm(l,t,a)}return a}function sm(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=fe.updateQueue,t===null?(t=tl(),fe.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function am(e,t,a,l){t.value=a,t.getSnapshot=l,rm(t)&&lm(e)}function im(e,t,a){return a(function(){rm(t)&&lm(e)})}function rm(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Dt(e,a)}catch{return!0}}function lm(e){var t=As(e,2);t!==null&&Ct(t,e,2)}function Xu(e){var t=vt();if(typeof e=="function"){var a=e;if(e=a(),Ds){Hn(!0);try{a()}finally{Hn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cn,lastRenderedState:e},t}function om(e,t,a,l){return e.baseState=a,Yu(e,ke,typeof l=="function"?l:Cn)}function q0(e,t,a,l,c){if(rl(e))throw Error(i(485));if(e=t.action,e!==null){var d={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){d.listeners.push(g)}};$.T!==null?a(!0):d.isTransition=!1,l(d),a=t.pending,a===null?(d.next=t.pending=d,um(t,d)):(d.next=a.next,t.pending=a.next=d)}}function um(e,t){var a=t.action,l=t.payload,c=e.state;if(t.isTransition){var d=$.T,g={};$.T=g;try{var y=a(c,l),S=$.S;S!==null&&S(g,y),cm(e,t,y)}catch(j){Ju(e,t,j)}finally{d!==null&&g.types!==null&&(d.types=g.types),$.T=d}}else try{d=a(c,l),cm(e,t,d)}catch(j){Ju(e,t,j)}}function cm(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){dm(e,t,l)},function(l){return Ju(e,t,l)}):dm(e,t,a)}function dm(e,t,a){t.status="fulfilled",t.value=a,fm(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,um(e,a)))}function Ju(e,t,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=a,fm(t),t=t.next;while(t!==l)}e.action=null}function fm(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function hm(e,t){return t}function mm(e,t){if(Se){var a=Be.formState;if(a!==null){e:{var l=fe;if(Se){if(Le){t:{for(var c=Le,d=Wt;c.nodeType!==8;){if(!d){c=null;break t}if(c=en(c.nextSibling),c===null){c=null;break t}}d=c.data,c=d==="F!"||d==="F"?c:null}if(c){Le=en(c.nextSibling),l=c.data==="F!";break e}}Yn(l)}l=!1}l&&(t=a[0])}}return a=vt(),a.memoizedState=a.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hm,lastRenderedState:t},a.queue=l,a=Dm.bind(null,fe,l),l.dispatch=a,l=Xu(!1),d=tc.bind(null,fe,!1,l.queue),l=vt(),c={state:t,dispatch:null,action:e,pending:null},l.queue=c,a=q0.bind(null,fe,c,d,a),c.dispatch=a,l.memoizedState=e,[t,a,!1]}function gm(e){var t=Ke();return pm(t,ke,e)}function pm(e,t,a){if(t=Yu(e,t,hm)[0],e=sl(Cn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=xi(t)}catch(g){throw g===pa?Kr:g}else l=t;t=Ke();var c=t.queue,d=c.dispatch;return a!==t.memoizedState&&(fe.flags|=2048,wa(9,{destroy:void 0},H0.bind(null,c,a),null)),[l,d,e]}function H0(e,t){e.action=t}function ym(e){var t=Ke(),a=ke;if(a!==null)return pm(t,a,e);Ke(),t=t.memoizedState,a=Ke();var l=a.queue.dispatch;return a.memoizedState=e,[t,l,!1]}function wa(e,t,a,l){return e={tag:e,create:a,deps:l,inst:t,next:null},t=fe.updateQueue,t===null&&(t=tl(),fe.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,t.lastEffect=e),e}function _m(){return Ke().memoizedState}function al(e,t,a,l){var c=vt();fe.flags|=e,c.memoizedState=wa(1|t,{destroy:void 0},a,l===void 0?null:l)}function il(e,t,a,l){var c=Ke();l=l===void 0?null:l;var d=c.memoizedState.inst;ke!==null&&l!==null&&qu(l,ke.memoizedState.deps)?c.memoizedState=wa(t,d,a,l):(fe.flags|=e,c.memoizedState=wa(1|t,d,a,l))}function vm(e,t){al(8390656,8,e,t)}function Qu(e,t){il(2048,8,e,t)}function I0(e){fe.flags|=4;var t=fe.updateQueue;if(t===null)t=tl(),fe.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function bm(e){var t=Ke().memoizedState;return I0({ref:t,nextImpl:e}),function(){if((Te&2)!==0)throw Error(i(440));return t.impl.apply(void 0,arguments)}}function wm(e,t){return il(4,2,e,t)}function Sm(e,t){return il(4,4,e,t)}function Em(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Am(e,t,a){a=a!=null?a.concat([e]):null,il(4,4,Em.bind(null,t,e),a)}function Zu(){}function Tm(e,t){var a=Ke();t=t===void 0?null:t;var l=a.memoizedState;return t!==null&&qu(t,l[1])?l[0]:(a.memoizedState=[e,t],e)}function Om(e,t){var a=Ke();t=t===void 0?null:t;var l=a.memoizedState;if(t!==null&&qu(t,l[1]))return l[0];if(l=e(),Ds){Hn(!0);try{e()}finally{Hn(!1)}}return a.memoizedState=[l,t],l}function Wu(e,t,a){return a===void 0||(xn&1073741824)!==0&&(be&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=xg(),fe.lanes|=e,ts|=e,a)}function xm(e,t,a,l){return Dt(a,t)?a:_a.current!==null?(e=Wu(e,a,l),Dt(e,t)||(Qe=!0),e):(xn&42)===0||(xn&1073741824)!==0&&(be&261930)===0?(Qe=!0,e.memoizedState=a):(e=xg(),fe.lanes|=e,ts|=e,t)}function Cm(e,t,a,l,c){var d=K.p;K.p=d!==0&&8>d?d:8;var g=$.T,y={};$.T=y,tc(e,!1,t,a);try{var S=c(),j=$.S;if(j!==null&&j(y,S),S!==null&&typeof S=="object"&&typeof S.then=="function"){var z=B0(S,l);Ci(e,t,z,Lt(e))}else Ci(e,t,l,Lt(e))}catch(H){Ci(e,t,{then:function(){},status:"rejected",reason:H},Lt())}finally{K.p=d,g!==null&&y.types!==null&&(g.types=y.types),$.T=g}}function G0(){}function Fu(e,t,a,l){if(e.tag!==5)throw Error(i(476));var c=Rm(e).queue;Cm(e,c,t,le,a===null?G0:function(){return jm(e),a(l)})}function Rm(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cn,lastRenderedState:le},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cn,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function jm(e){var t=Rm(e);t.next===null&&(t=e.alternate.memoizedState),Ci(e,t.next.queue,{},Lt())}function ec(){return ct(Pi)}function Nm(){return Ke().memoizedState}function km(){return Ke().memoizedState}function V0(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=Lt();e=Jn(a);var l=Qn(t,e,a);l!==null&&(Ct(l,t,a),Ei(l,t,a)),t={cache:Ru()},e.payload=t;return}t=t.return}}function P0(e,t,a){var l=Lt();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},rl(e)?Um(t,a):(a=_u(e,t,a,l),a!==null&&(Ct(a,e,l),Mm(a,t,l)))}function Dm(e,t,a){var l=Lt();Ci(e,t,a,l)}function Ci(e,t,a,l){var c={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(rl(e))Um(t,c);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var g=t.lastRenderedState,y=d(g,a);if(c.hasEagerState=!0,c.eagerState=y,Dt(y,g))return qr(e,t,c,0),Be===null&&Lr(),!1}catch{}finally{}if(a=_u(e,t,c,l),a!==null)return Ct(a,e,l),Mm(a,t,l),!0}return!1}function tc(e,t,a,l){if(l={lane:2,revertLane:Dc(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},rl(e)){if(t)throw Error(i(479))}else t=_u(e,a,l,2),t!==null&&Ct(t,e,2)}function rl(e){var t=e.alternate;return e===fe||t!==null&&t===fe}function Um(e,t){va=Fr=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Mm(e,t,a){if((a&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,qf(e,a)}}var Ri={readContext:ct,use:nl,useCallback:Ge,useContext:Ge,useEffect:Ge,useImperativeHandle:Ge,useLayoutEffect:Ge,useInsertionEffect:Ge,useMemo:Ge,useReducer:Ge,useRef:Ge,useState:Ge,useDebugValue:Ge,useDeferredValue:Ge,useTransition:Ge,useSyncExternalStore:Ge,useId:Ge,useHostTransitionStatus:Ge,useFormState:Ge,useActionState:Ge,useOptimistic:Ge,useMemoCache:Ge,useCacheRefresh:Ge};Ri.useEffectEvent=Ge;var zm={readContext:ct,use:nl,useCallback:function(e,t){return vt().memoizedState=[e,t===void 0?null:t],e},useContext:ct,useEffect:vm,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,al(4194308,4,Em.bind(null,t,e),a)},useLayoutEffect:function(e,t){return al(4194308,4,e,t)},useInsertionEffect:function(e,t){al(4,2,e,t)},useMemo:function(e,t){var a=vt();t=t===void 0?null:t;var l=e();if(Ds){Hn(!0);try{e()}finally{Hn(!1)}}return a.memoizedState=[l,t],l},useReducer:function(e,t,a){var l=vt();if(a!==void 0){var c=a(t);if(Ds){Hn(!0);try{a(t)}finally{Hn(!1)}}}else c=t;return l.memoizedState=l.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},l.queue=e,e=e.dispatch=P0.bind(null,fe,e),[l.memoizedState,e]},useRef:function(e){var t=vt();return e={current:e},t.memoizedState=e},useState:function(e){e=Xu(e);var t=e.queue,a=Dm.bind(null,fe,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Zu,useDeferredValue:function(e,t){var a=vt();return Wu(a,e,t)},useTransition:function(){var e=Xu(!1);return e=Cm.bind(null,fe,e.queue,!0,!1),vt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var l=fe,c=vt();if(Se){if(a===void 0)throw Error(i(407));a=a()}else{if(a=t(),Be===null)throw Error(i(349));(be&127)!==0||sm(l,t,a)}c.memoizedState=a;var d={value:a,getSnapshot:t};return c.queue=d,vm(im.bind(null,l,d,e),[e]),l.flags|=2048,wa(9,{destroy:void 0},am.bind(null,l,d,a,t),null),a},useId:function(){var e=vt(),t=Be.identifierPrefix;if(Se){var a=mn,l=hn;a=(l&~(1<<32-kt(l)-1)).toString(32)+a,t="_"+t+"R_"+a,a=el++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=$0++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:ec,useFormState:mm,useActionState:mm,useOptimistic:function(e){var t=vt();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=tc.bind(null,fe,!0,a),a.dispatch=t,[e,t]},useMemoCache:Pu,useCacheRefresh:function(){return vt().memoizedState=V0.bind(null,fe)},useEffectEvent:function(e){var t=vt(),a={impl:e};return t.memoizedState=a,function(){if((Te&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},nc={readContext:ct,use:nl,useCallback:Tm,useContext:ct,useEffect:Qu,useImperativeHandle:Am,useInsertionEffect:wm,useLayoutEffect:Sm,useMemo:Om,useReducer:sl,useRef:_m,useState:function(){return sl(Cn)},useDebugValue:Zu,useDeferredValue:function(e,t){var a=Ke();return xm(a,ke.memoizedState,e,t)},useTransition:function(){var e=sl(Cn)[0],t=Ke().memoizedState;return[typeof e=="boolean"?e:xi(e),t]},useSyncExternalStore:nm,useId:Nm,useHostTransitionStatus:ec,useFormState:gm,useActionState:gm,useOptimistic:function(e,t){var a=Ke();return om(a,ke,e,t)},useMemoCache:Pu,useCacheRefresh:km};nc.useEffectEvent=bm;var Bm={readContext:ct,use:nl,useCallback:Tm,useContext:ct,useEffect:Qu,useImperativeHandle:Am,useInsertionEffect:wm,useLayoutEffect:Sm,useMemo:Om,useReducer:Ku,useRef:_m,useState:function(){return Ku(Cn)},useDebugValue:Zu,useDeferredValue:function(e,t){var a=Ke();return ke===null?Wu(a,e,t):xm(a,ke.memoizedState,e,t)},useTransition:function(){var e=Ku(Cn)[0],t=Ke().memoizedState;return[typeof e=="boolean"?e:xi(e),t]},useSyncExternalStore:nm,useId:Nm,useHostTransitionStatus:ec,useFormState:ym,useActionState:ym,useOptimistic:function(e,t){var a=Ke();return ke!==null?om(a,ke,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Pu,useCacheRefresh:km};Bm.useEffectEvent=bm;function sc(e,t,a,l){t=e.memoizedState,a=a(l,t),a=a==null?t:b({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var ac={enqueueSetState:function(e,t,a){e=e._reactInternals;var l=Lt(),c=Jn(l);c.payload=t,a!=null&&(c.callback=a),t=Qn(e,c,l),t!==null&&(Ct(t,e,l),Ei(t,e,l))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var l=Lt(),c=Jn(l);c.tag=1,c.payload=t,a!=null&&(c.callback=a),t=Qn(e,c,l),t!==null&&(Ct(t,e,l),Ei(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Lt(),l=Jn(a);l.tag=2,t!=null&&(l.callback=t),t=Qn(e,l,a),t!==null&&(Ct(t,e,a),Ei(t,e,a))}};function $m(e,t,a,l,c,d,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,g):t.prototype&&t.prototype.isPureReactComponent?!gi(a,l)||!gi(c,d):!0}function Lm(e,t,a,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,l),t.state!==e&&ac.enqueueReplaceState(t,t.state,null)}function Us(e,t){var a=t;if("ref"in t){a={};for(var l in t)l!=="ref"&&(a[l]=t[l])}if(e=e.defaultProps){a===t&&(a=b({},a));for(var c in e)a[c]===void 0&&(a[c]=e[c])}return a}function qm(e){$r(e)}function Hm(e){console.error(e)}function Im(e){$r(e)}function ll(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function Gm(e,t,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function ic(e,t,a){return a=Jn(a),a.tag=3,a.payload={element:null},a.callback=function(){ll(e,t)},a}function Vm(e){return e=Jn(e),e.tag=3,e}function Pm(e,t,a,l){var c=a.type.getDerivedStateFromError;if(typeof c=="function"){var d=l.value;e.payload=function(){return c(d)},e.callback=function(){Gm(t,a,l)}}var g=a.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(e.callback=function(){Gm(t,a,l),typeof c!="function"&&(ns===null?ns=new Set([this]):ns.add(this));var y=l.stack;this.componentDidCatch(l.value,{componentStack:y!==null?y:""})})}function Y0(e,t,a,l,c){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=a.alternate,t!==null&&ha(t,a,c,!0),a=Mt.current,a!==null){switch(a.tag){case 31:case 13:return Ft===null?vl():a.alternate===null&&Ve===0&&(Ve=3),a.flags&=-257,a.flags|=65536,a.lanes=c,l===Xr?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([l]):t.add(l),jc(e,l,c)),!1;case 22:return a.flags|=65536,l===Xr?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([l]):a.add(l)),jc(e,l,c)),!1}throw Error(i(435,a.tag))}return jc(e,l,c),vl(),!1}if(Se)return t=Mt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,l!==Au&&(e=Error(i(422),{cause:l}),_i(Jt(e,a)))):(l!==Au&&(t=Error(i(423),{cause:l}),_i(Jt(t,a))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,l=Jt(l,a),c=ic(e.stateNode,l,c),Mu(e,c),Ve!==4&&(Ve=2)),!1;var d=Error(i(520),{cause:l});if(d=Jt(d,a),Bi===null?Bi=[d]:Bi.push(d),Ve!==4&&(Ve=2),t===null)return!0;l=Jt(l,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=c&-c,a.lanes|=e,e=ic(a.stateNode,l,e),Mu(a,e),!1;case 1:if(t=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(ns===null||!ns.has(d))))return a.flags|=65536,c&=-c,a.lanes|=c,c=Vm(c),Pm(c,e,a,l),Mu(a,c),!1}a=a.return}while(a!==null);return!1}var rc=Error(i(461)),Qe=!1;function dt(e,t,a,l){t.child=e===null?Jh(t,null,a,l):ks(t,e.child,a,l)}function Ym(e,t,a,l,c){a=a.render;var d=t.ref;if("ref"in l){var g={};for(var y in l)y!=="ref"&&(g[y]=l[y])}else g=l;return Cs(t),l=Hu(e,t,a,g,d,c),y=Iu(),e!==null&&!Qe?(Gu(e,t,c),Rn(e,t,c)):(Se&&y&&Su(t),t.flags|=1,dt(e,t,l,c),t.child)}function Km(e,t,a,l,c){if(e===null){var d=a.type;return typeof d=="function"&&!vu(d)&&d.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=d,Xm(e,t,d,l,c)):(e=Ir(a.type,null,l,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!mc(e,c)){var g=d.memoizedProps;if(a=a.compare,a=a!==null?a:gi,a(g,l)&&e.ref===t.ref)return Rn(e,t,c)}return t.flags|=1,e=En(d,l),e.ref=t.ref,e.return=t,t.child=e}function Xm(e,t,a,l,c){if(e!==null){var d=e.memoizedProps;if(gi(d,l)&&e.ref===t.ref)if(Qe=!1,t.pendingProps=l=d,mc(e,c))(e.flags&131072)!==0&&(Qe=!0);else return t.lanes=e.lanes,Rn(e,t,c)}return lc(e,t,a,l,c)}function Jm(e,t,a,l){var c=l.children,d=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,e!==null){for(l=t.child=e.child,c=0;l!==null;)c=c|l.lanes|l.childLanes,l=l.sibling;l=c&~d}else l=0,t.child=null;return Qm(e,t,d,a,l)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Yr(t,d!==null?d.cachePool:null),d!==null?Wh(t,d):Bu(),Fh(t);else return l=t.lanes=536870912,Qm(e,t,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(Yr(t,d.cachePool),Wh(t,d),Wn(),t.memoizedState=null):(e!==null&&Yr(t,null),Bu(),Wn());return dt(e,t,c,a),t.child}function ji(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Qm(e,t,a,l,c){var d=Nu();return d=d===null?null:{parent:Xe._currentValue,pool:d},t.memoizedState={baseLanes:a,cachePool:d},e!==null&&Yr(t,null),Bu(),Fh(t),e!==null&&ha(e,t,l,!0),t.childLanes=c,null}function ol(e,t){return t=cl({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Zm(e,t,a){return ks(t,e.child,null,a),e=ol(t,t.pendingProps),e.flags|=2,zt(t),t.memoizedState=null,e}function K0(e,t,a){var l=t.pendingProps,c=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Se){if(l.mode==="hidden")return e=ol(t,l),t.lanes=536870912,ji(null,e);if(Lu(t),(e=Le)?(e=up(e,Wt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Vn!==null?{id:hn,overflow:mn}:null,retryLane:536870912,hydrationErrors:null},a=Uh(e),a.return=t,t.child=a,ut=t,Le=null)):e=null,e===null)throw Yn(t);return t.lanes=536870912,null}return ol(t,l)}var d=e.memoizedState;if(d!==null){var g=d.dehydrated;if(Lu(t),c)if(t.flags&256)t.flags&=-257,t=Zm(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(i(558));else if(Qe||ha(e,t,a,!1),c=(a&e.childLanes)!==0,Qe||c){if(l=Be,l!==null&&(g=Hf(l,a),g!==0&&g!==d.retryLane))throw d.retryLane=g,As(e,g),Ct(l,e,g),rc;vl(),t=Zm(e,t,a)}else e=d.treeContext,Le=en(g.nextSibling),ut=t,Se=!0,Pn=null,Wt=!1,e!==null&&Bh(t,e),t=ol(t,l),t.flags|=4096;return t}return e=En(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function ul(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function lc(e,t,a,l,c){return Cs(t),a=Hu(e,t,a,l,void 0,c),l=Iu(),e!==null&&!Qe?(Gu(e,t,c),Rn(e,t,c)):(Se&&l&&Su(t),t.flags|=1,dt(e,t,a,c),t.child)}function Wm(e,t,a,l,c,d){return Cs(t),t.updateQueue=null,a=tm(t,l,a,c),em(e),l=Iu(),e!==null&&!Qe?(Gu(e,t,d),Rn(e,t,d)):(Se&&l&&Su(t),t.flags|=1,dt(e,t,a,d),t.child)}function Fm(e,t,a,l,c){if(Cs(t),t.stateNode===null){var d=ua,g=a.contextType;typeof g=="object"&&g!==null&&(d=ct(g)),d=new a(l,d),t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=ac,t.stateNode=d,d._reactInternals=t,d=t.stateNode,d.props=l,d.state=t.memoizedState,d.refs={},Du(t),g=a.contextType,d.context=typeof g=="object"&&g!==null?ct(g):ua,d.state=t.memoizedState,g=a.getDerivedStateFromProps,typeof g=="function"&&(sc(t,a,g,l),d.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(g=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),g!==d.state&&ac.enqueueReplaceState(d,d.state,null),Ti(t,l,d,c),Ai(),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){d=t.stateNode;var y=t.memoizedProps,S=Us(a,y);d.props=S;var j=d.context,z=a.contextType;g=ua,typeof z=="object"&&z!==null&&(g=ct(z));var H=a.getDerivedStateFromProps;z=typeof H=="function"||typeof d.getSnapshotBeforeUpdate=="function",y=t.pendingProps!==y,z||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(y||j!==g)&&Lm(t,d,l,g),Xn=!1;var D=t.memoizedState;d.state=D,Ti(t,l,d,c),Ai(),j=t.memoizedState,y||D!==j||Xn?(typeof H=="function"&&(sc(t,a,H,l),j=t.memoizedState),(S=Xn||$m(t,a,S,l,D,j,g))?(z||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=j),d.props=l,d.state=j,d.context=g,l=S):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{d=t.stateNode,Uu(e,t),g=t.memoizedProps,z=Us(a,g),d.props=z,H=t.pendingProps,D=d.context,j=a.contextType,S=ua,typeof j=="object"&&j!==null&&(S=ct(j)),y=a.getDerivedStateFromProps,(j=typeof y=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(g!==H||D!==S)&&Lm(t,d,l,S),Xn=!1,D=t.memoizedState,d.state=D,Ti(t,l,d,c),Ai();var M=t.memoizedState;g!==H||D!==M||Xn||e!==null&&e.dependencies!==null&&Vr(e.dependencies)?(typeof y=="function"&&(sc(t,a,y,l),M=t.memoizedState),(z=Xn||$m(t,a,z,l,D,M,S)||e!==null&&e.dependencies!==null&&Vr(e.dependencies))?(j||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,M,S),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,M,S)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||g===e.memoizedProps&&D===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&D===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=M),d.props=l,d.state=M,d.context=S,l=z):(typeof d.componentDidUpdate!="function"||g===e.memoizedProps&&D===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&D===e.memoizedState||(t.flags|=1024),l=!1)}return d=l,ul(e,t),l=(t.flags&128)!==0,d||l?(d=t.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),t.flags|=1,e!==null&&l?(t.child=ks(t,e.child,null,c),t.child=ks(t,null,a,c)):dt(e,t,a,c),t.memoizedState=d.state,e=t.child):e=Rn(e,t,c),e}function eg(e,t,a,l){return Os(),t.flags|=256,dt(e,t,a,l),t.child}var oc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function uc(e){return{baseLanes:e,cachePool:Gh()}}function cc(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=$t),e}function tg(e,t,a){var l=t.pendingProps,c=!1,d=(t.flags&128)!==0,g;if((g=d)||(g=e!==null&&e.memoizedState===null?!1:(Ye.current&2)!==0),g&&(c=!0,t.flags&=-129),g=(t.flags&32)!==0,t.flags&=-33,e===null){if(Se){if(c?Zn(t):Wn(),(e=Le)?(e=up(e,Wt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Vn!==null?{id:hn,overflow:mn}:null,retryLane:536870912,hydrationErrors:null},a=Uh(e),a.return=t,t.child=a,ut=t,Le=null)):e=null,e===null)throw Yn(t);return Yc(e)?t.lanes=32:t.lanes=536870912,null}var y=l.children;return l=l.fallback,c?(Wn(),c=t.mode,y=cl({mode:"hidden",children:y},c),l=Ts(l,c,a,null),y.return=t,l.return=t,y.sibling=l,t.child=y,l=t.child,l.memoizedState=uc(a),l.childLanes=cc(e,g,a),t.memoizedState=oc,ji(null,l)):(Zn(t),dc(t,y))}var S=e.memoizedState;if(S!==null&&(y=S.dehydrated,y!==null)){if(d)t.flags&256?(Zn(t),t.flags&=-257,t=fc(e,t,a)):t.memoizedState!==null?(Wn(),t.child=e.child,t.flags|=128,t=null):(Wn(),y=l.fallback,c=t.mode,l=cl({mode:"visible",children:l.children},c),y=Ts(y,c,a,null),y.flags|=2,l.return=t,y.return=t,l.sibling=y,t.child=l,ks(t,e.child,null,a),l=t.child,l.memoizedState=uc(a),l.childLanes=cc(e,g,a),t.memoizedState=oc,t=ji(null,l));else if(Zn(t),Yc(y)){if(g=y.nextSibling&&y.nextSibling.dataset,g)var j=g.dgst;g=j,l=Error(i(419)),l.stack="",l.digest=g,_i({value:l,source:null,stack:null}),t=fc(e,t,a)}else if(Qe||ha(e,t,a,!1),g=(a&e.childLanes)!==0,Qe||g){if(g=Be,g!==null&&(l=Hf(g,a),l!==0&&l!==S.retryLane))throw S.retryLane=l,As(e,l),Ct(g,e,l),rc;Pc(y)||vl(),t=fc(e,t,a)}else Pc(y)?(t.flags|=192,t.child=e.child,t=null):(e=S.treeContext,Le=en(y.nextSibling),ut=t,Se=!0,Pn=null,Wt=!1,e!==null&&Bh(t,e),t=dc(t,l.children),t.flags|=4096);return t}return c?(Wn(),y=l.fallback,c=t.mode,S=e.child,j=S.sibling,l=En(S,{mode:"hidden",children:l.children}),l.subtreeFlags=S.subtreeFlags&65011712,j!==null?y=En(j,y):(y=Ts(y,c,a,null),y.flags|=2),y.return=t,l.return=t,l.sibling=y,t.child=l,ji(null,l),l=t.child,y=e.child.memoizedState,y===null?y=uc(a):(c=y.cachePool,c!==null?(S=Xe._currentValue,c=c.parent!==S?{parent:S,pool:S}:c):c=Gh(),y={baseLanes:y.baseLanes|a,cachePool:c}),l.memoizedState=y,l.childLanes=cc(e,g,a),t.memoizedState=oc,ji(e.child,l)):(Zn(t),a=e.child,e=a.sibling,a=En(a,{mode:"visible",children:l.children}),a.return=t,a.sibling=null,e!==null&&(g=t.deletions,g===null?(t.deletions=[e],t.flags|=16):g.push(e)),t.child=a,t.memoizedState=null,a)}function dc(e,t){return t=cl({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function cl(e,t){return e=Ut(22,e,null,t),e.lanes=0,e}function fc(e,t,a){return ks(t,e.child,null,a),e=dc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ng(e,t,a){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),xu(e.return,t,a)}function hc(e,t,a,l,c,d){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:c,treeForkCount:d}:(g.isBackwards=t,g.rendering=null,g.renderingStartTime=0,g.last=l,g.tail=a,g.tailMode=c,g.treeForkCount=d)}function sg(e,t,a){var l=t.pendingProps,c=l.revealOrder,d=l.tail;l=l.children;var g=Ye.current,y=(g&2)!==0;if(y?(g=g&1|2,t.flags|=128):g&=1,X(Ye,g),dt(e,t,l,a),l=Se?yi:0,!y&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ng(e,a,t);else if(e.tag===19)ng(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(a=t.child,c=null;a!==null;)e=a.alternate,e!==null&&Wr(e)===null&&(c=a),a=a.sibling;a=c,a===null?(c=t.child,t.child=null):(c=a.sibling,a.sibling=null),hc(t,!1,c,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Wr(e)===null){t.child=c;break}e=c.sibling,c.sibling=a,a=c,c=e}hc(t,!0,a,null,d,l);break;case"together":hc(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function Rn(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),ts|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(ha(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,a=En(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=En(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function mc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Vr(e)))}function X0(e,t,a){switch(t.tag){case 3:_t(t,t.stateNode.containerInfo),Kn(t,Xe,e.memoizedState.cache),Os();break;case 27:case 5:ni(t);break;case 4:_t(t,t.stateNode.containerInfo);break;case 10:Kn(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Lu(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(Zn(t),t.flags|=128,null):(a&t.child.childLanes)!==0?tg(e,t,a):(Zn(t),e=Rn(e,t,a),e!==null?e.sibling:null);Zn(t);break;case 19:var c=(e.flags&128)!==0;if(l=(a&t.childLanes)!==0,l||(ha(e,t,a,!1),l=(a&t.childLanes)!==0),c){if(l)return sg(e,t,a);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),X(Ye,Ye.current),l)break;return null;case 22:return t.lanes=0,Jm(e,t,a,t.pendingProps);case 24:Kn(t,Xe,e.memoizedState.cache)}return Rn(e,t,a)}function ag(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Qe=!0;else{if(!mc(e,a)&&(t.flags&128)===0)return Qe=!1,X0(e,t,a);Qe=(e.flags&131072)!==0}else Qe=!1,Se&&(t.flags&1048576)!==0&&zh(t,yi,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=js(t.elementType),t.type=e,typeof e=="function")vu(e)?(l=Us(e,l),t.tag=1,t=Fm(null,t,e,l,a)):(t.tag=0,t=lc(null,t,e,l,a));else{if(e!=null){var c=e.$$typeof;if(c===G){t.tag=11,t=Ym(null,t,e,l,a);break e}else if(c===P){t.tag=14,t=Km(null,t,e,l,a);break e}}throw t=an(e)||e,Error(i(306,t,""))}}return t;case 0:return lc(e,t,t.type,t.pendingProps,a);case 1:return l=t.type,c=Us(l,t.pendingProps),Fm(e,t,l,c,a);case 3:e:{if(_t(t,t.stateNode.containerInfo),e===null)throw Error(i(387));l=t.pendingProps;var d=t.memoizedState;c=d.element,Uu(e,t),Ti(t,l,null,a);var g=t.memoizedState;if(l=g.cache,Kn(t,Xe,l),l!==d.cache&&Cu(t,[Xe],a,!0),Ai(),l=g.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:g.cache},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){t=eg(e,t,l,a);break e}else if(l!==c){c=Jt(Error(i(424)),t),_i(c),t=eg(e,t,l,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Le=en(e.firstChild),ut=t,Se=!0,Pn=null,Wt=!0,a=Jh(t,null,l,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Os(),l===c){t=Rn(e,t,a);break e}dt(e,t,l,a)}t=t.child}return t;case 26:return ul(e,t),e===null?(a=gp(t.type,null,t.pendingProps,null))?t.memoizedState=a:Se||(a=t.type,e=t.pendingProps,l=Ol(ye.current).createElement(a),l[ot]=t,l[St]=e,ft(l,a,e),at(l),t.stateNode=l):t.memoizedState=gp(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return ni(t),e===null&&Se&&(l=t.stateNode=fp(t.type,t.pendingProps,ye.current),ut=t,Wt=!0,c=Le,rs(t.type)?(Kc=c,Le=en(l.firstChild)):Le=c),dt(e,t,t.pendingProps.children,a),ul(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Se&&((c=l=Le)&&(l=Aw(l,t.type,t.pendingProps,Wt),l!==null?(t.stateNode=l,ut=t,Le=en(l.firstChild),Wt=!1,c=!0):c=!1),c||Yn(t)),ni(t),c=t.type,d=t.pendingProps,g=e!==null?e.memoizedProps:null,l=d.children,Ic(c,d)?l=null:g!==null&&Ic(c,g)&&(t.flags|=32),t.memoizedState!==null&&(c=Hu(e,t,L0,null,null,a),Pi._currentValue=c),ul(e,t),dt(e,t,l,a),t.child;case 6:return e===null&&Se&&((e=a=Le)&&(a=Tw(a,t.pendingProps,Wt),a!==null?(t.stateNode=a,ut=t,Le=null,e=!0):e=!1),e||Yn(t)),null;case 13:return tg(e,t,a);case 4:return _t(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=ks(t,null,l,a):dt(e,t,l,a),t.child;case 11:return Ym(e,t,t.type,t.pendingProps,a);case 7:return dt(e,t,t.pendingProps,a),t.child;case 8:return dt(e,t,t.pendingProps.children,a),t.child;case 12:return dt(e,t,t.pendingProps.children,a),t.child;case 10:return l=t.pendingProps,Kn(t,t.type,l.value),dt(e,t,l.children,a),t.child;case 9:return c=t.type._context,l=t.pendingProps.children,Cs(t),c=ct(c),l=l(c),t.flags|=1,dt(e,t,l,a),t.child;case 14:return Km(e,t,t.type,t.pendingProps,a);case 15:return Xm(e,t,t.type,t.pendingProps,a);case 19:return sg(e,t,a);case 31:return K0(e,t,a);case 22:return Jm(e,t,a,t.pendingProps);case 24:return Cs(t),l=ct(Xe),e===null?(c=Nu(),c===null&&(c=Be,d=Ru(),c.pooledCache=d,d.refCount++,d!==null&&(c.pooledCacheLanes|=a),c=d),t.memoizedState={parent:l,cache:c},Du(t),Kn(t,Xe,c)):((e.lanes&a)!==0&&(Uu(e,t),Ti(t,null,null,a),Ai()),c=e.memoizedState,d=t.memoizedState,c.parent!==l?(c={parent:l,cache:l},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),Kn(t,Xe,l)):(l=d.cache,Kn(t,Xe,l),l!==c.cache&&Cu(t,[Xe],a,!0))),dt(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function jn(e){e.flags|=4}function gc(e,t,a,l,c){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if(Ng())e.flags|=8192;else throw Ns=Xr,ku}else e.flags&=-16777217}function ig(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!bp(t))if(Ng())e.flags|=8192;else throw Ns=Xr,ku}function dl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?$f():536870912,e.lanes|=t,Ta|=t)}function Ni(e,t){if(!Se)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function qe(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(t)for(var c=e.child;c!==null;)a|=c.lanes|c.childLanes,l|=c.subtreeFlags&65011712,l|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)a|=c.lanes|c.childLanes,l|=c.subtreeFlags,l|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=l,e.childLanes=a,t}function J0(e,t,a){var l=t.pendingProps;switch(Eu(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qe(t),null;case 1:return qe(t),null;case 3:return a=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),On(Xe),Pe(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(fa(t)?jn(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Tu())),qe(t),null;case 26:var c=t.type,d=t.memoizedState;return e===null?(jn(t),d!==null?(qe(t),ig(t,d)):(qe(t),gc(t,c,null,l,a))):d?d!==e.memoizedState?(jn(t),qe(t),ig(t,d)):(qe(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&jn(t),qe(t),gc(t,c,e,l,a)),null;case 27:if(Sr(t),a=ye.current,c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&jn(t);else{if(!l){if(t.stateNode===null)throw Error(i(166));return qe(t),null}e=Z.current,fa(t)?$h(t):(e=fp(c,l,a),t.stateNode=e,jn(t))}return qe(t),null;case 5:if(Sr(t),c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&jn(t);else{if(!l){if(t.stateNode===null)throw Error(i(166));return qe(t),null}if(d=Z.current,fa(t))$h(t);else{var g=Ol(ye.current);switch(d){case 1:d=g.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:d=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":d=g.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":d=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":d=g.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?g.createElement("select",{is:l.is}):g.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?g.createElement(c,{is:l.is}):g.createElement(c)}}d[ot]=t,d[St]=l;e:for(g=t.child;g!==null;){if(g.tag===5||g.tag===6)d.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}t.stateNode=d;e:switch(ft(d,c,l),c){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&jn(t)}}return qe(t),gc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&jn(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(i(166));if(e=ye.current,fa(t)){if(e=t.stateNode,a=t.memoizedProps,l=null,c=ut,c!==null)switch(c.tag){case 27:case 5:l=c.memoizedProps}e[ot]=t,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||tp(e.nodeValue,a)),e||Yn(t,!0)}else e=Ol(e).createTextNode(l),e[ot]=t,t.stateNode=e}return qe(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(l=fa(t),a!==null){if(e===null){if(!l)throw Error(i(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(557));e[ot]=t}else Os(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;qe(t),e=!1}else a=Tu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(zt(t),t):(zt(t),null);if((t.flags&128)!==0)throw Error(i(558))}return qe(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=fa(t),l!==null&&l.dehydrated!==null){if(e===null){if(!c)throw Error(i(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(i(317));c[ot]=t}else Os(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;qe(t),c=!1}else c=Tu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(zt(t),t):(zt(t),null)}return zt(t),(t.flags&128)!==0?(t.lanes=a,t):(a=l!==null,e=e!==null&&e.memoizedState!==null,a&&(l=t.child,c=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(c=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==c&&(l.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),dl(t,t.updateQueue),qe(t),null);case 4:return Pe(),e===null&&Bc(t.stateNode.containerInfo),qe(t),null;case 10:return On(t.type),qe(t),null;case 19:if(I(Ye),l=t.memoizedState,l===null)return qe(t),null;if(c=(t.flags&128)!==0,d=l.rendering,d===null)if(c)Ni(l,!1);else{if(Ve!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(d=Wr(e),d!==null){for(t.flags|=128,Ni(l,!1),e=d.updateQueue,t.updateQueue=e,dl(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)Dh(a,e),a=a.sibling;return X(Ye,Ye.current&1|2),Se&&An(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&jt()>pl&&(t.flags|=128,c=!0,Ni(l,!1),t.lanes=4194304)}else{if(!c)if(e=Wr(d),e!==null){if(t.flags|=128,c=!0,e=e.updateQueue,t.updateQueue=e,dl(t,e),Ni(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Se)return qe(t),null}else 2*jt()-l.renderingStartTime>pl&&a!==536870912&&(t.flags|=128,c=!0,Ni(l,!1),t.lanes=4194304);l.isBackwards?(d.sibling=t.child,t.child=d):(e=l.last,e!==null?e.sibling=d:t.child=d,l.last=d)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=jt(),e.sibling=null,a=Ye.current,X(Ye,c?a&1|2:a&1),Se&&An(t,l.treeForkCount),e):(qe(t),null);case 22:case 23:return zt(t),$u(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(a&536870912)!==0&&(t.flags&128)===0&&(qe(t),t.subtreeFlags&6&&(t.flags|=8192)):qe(t),a=t.updateQueue,a!==null&&dl(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==a&&(t.flags|=2048),e!==null&&I(Rs),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),On(Xe),qe(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function Q0(e,t){switch(Eu(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return On(Xe),Pe(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Sr(t),null;case 31:if(t.memoizedState!==null){if(zt(t),t.alternate===null)throw Error(i(340));Os()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(zt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));Os()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return I(Ye),null;case 4:return Pe(),null;case 10:return On(t.type),null;case 22:case 23:return zt(t),$u(),e!==null&&I(Rs),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return On(Xe),null;case 25:return null;default:return null}}function rg(e,t){switch(Eu(t),t.tag){case 3:On(Xe),Pe();break;case 26:case 27:case 5:Sr(t);break;case 4:Pe();break;case 31:t.memoizedState!==null&&zt(t);break;case 13:zt(t);break;case 19:I(Ye);break;case 10:On(t.type);break;case 22:case 23:zt(t),$u(),e!==null&&I(Rs);break;case 24:On(Xe)}}function ki(e,t){try{var a=t.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var c=l.next;a=c;do{if((a.tag&e)===e){l=void 0;var d=a.create,g=a.inst;l=d(),g.destroy=l}a=a.next}while(a!==c)}}catch(y){je(t,t.return,y)}}function Fn(e,t,a){try{var l=t.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var d=c.next;l=d;do{if((l.tag&e)===e){var g=l.inst,y=g.destroy;if(y!==void 0){g.destroy=void 0,c=t;var S=a,j=y;try{j()}catch(z){je(c,S,z)}}}l=l.next}while(l!==d)}}catch(z){je(t,t.return,z)}}function lg(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Zh(t,a)}catch(l){je(e,e.return,l)}}}function og(e,t,a){a.props=Us(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){je(e,t,l)}}function Di(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(c){je(e,t,c)}}function gn(e,t){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(c){je(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(c){je(e,t,c)}else a.current=null}function ug(e){var t=e.type,a=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(c){je(e,e.return,c)}}function pc(e,t,a){try{var l=e.stateNode;_w(l,e.type,a,t),l[St]=t}catch(c){je(e,e.return,c)}}function cg(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&rs(e.type)||e.tag===4}function yc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||cg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&rs(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function _c(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=wn));else if(l!==4&&(l===27&&rs(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(_c(e,t,a),e=e.sibling;e!==null;)_c(e,t,a),e=e.sibling}function fl(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(l!==4&&(l===27&&rs(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(fl(e,t,a),e=e.sibling;e!==null;)fl(e,t,a),e=e.sibling}function dg(e){var t=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);ft(t,l,a),t[ot]=e,t[St]=a}catch(d){je(e,e.return,d)}}var Nn=!1,Ze=!1,vc=!1,fg=typeof WeakSet=="function"?WeakSet:Set,it=null;function Z0(e,t){if(e=e.containerInfo,qc=Dl,e=Ah(e),fu(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var c=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var g=0,y=-1,S=-1,j=0,z=0,H=e,D=null;t:for(;;){for(var M;H!==a||c!==0&&H.nodeType!==3||(y=g+c),H!==d||l!==0&&H.nodeType!==3||(S=g+l),H.nodeType===3&&(g+=H.nodeValue.length),(M=H.firstChild)!==null;)D=H,H=M;for(;;){if(H===e)break t;if(D===a&&++j===c&&(y=g),D===d&&++z===l&&(S=g),(M=H.nextSibling)!==null)break;H=D,D=H.parentNode}H=M}a=y===-1||S===-1?null:{start:y,end:S}}else a=null}a=a||{start:0,end:0}}else a=null;for(Hc={focusedElem:e,selectionRange:a},Dl=!1,it=t;it!==null;)if(t=it,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,it=e;else for(;it!==null;){switch(t=it,d=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)c=e[a],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=t,c=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var J=Us(a.type,c);e=l.getSnapshotBeforeUpdate(J,d),l.__reactInternalSnapshotBeforeUpdate=e}catch(ie){je(a,a.return,ie)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)Vc(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Vc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,it=e;break}it=t.return}}function hg(e,t,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Dn(e,a),l&4&&ki(5,a);break;case 1:if(Dn(e,a),l&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(g){je(a,a.return,g)}else{var c=Us(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(g){je(a,a.return,g)}}l&64&&lg(a),l&512&&Di(a,a.return);break;case 3:if(Dn(e,a),l&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Zh(e,t)}catch(g){je(a,a.return,g)}}break;case 27:t===null&&l&4&&dg(a);case 26:case 5:Dn(e,a),t===null&&l&4&&ug(a),l&512&&Di(a,a.return);break;case 12:Dn(e,a);break;case 31:Dn(e,a),l&4&&pg(e,a);break;case 13:Dn(e,a),l&4&&yg(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=rw.bind(null,a),Ow(e,a))));break;case 22:if(l=a.memoizedState!==null||Nn,!l){t=t!==null&&t.memoizedState!==null||Ze,c=Nn;var d=Ze;Nn=l,(Ze=t)&&!d?Un(e,a,(a.subtreeFlags&8772)!==0):Dn(e,a),Nn=c,Ze=d}break;case 30:break;default:Dn(e,a)}}function mg(e){var t=e.alternate;t!==null&&(e.alternate=null,mg(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Jo(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var He=null,At=!1;function kn(e,t,a){for(a=a.child;a!==null;)gg(e,t,a),a=a.sibling}function gg(e,t,a){if(Nt&&typeof Nt.onCommitFiberUnmount=="function")try{Nt.onCommitFiberUnmount(si,a)}catch{}switch(a.tag){case 26:Ze||gn(a,t),kn(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ze||gn(a,t);var l=He,c=At;rs(a.type)&&(He=a.stateNode,At=!1),kn(e,t,a),Ii(a.stateNode),He=l,At=c;break;case 5:Ze||gn(a,t);case 6:if(l=He,c=At,He=null,kn(e,t,a),He=l,At=c,He!==null)if(At)try{(He.nodeType===9?He.body:He.nodeName==="HTML"?He.ownerDocument.body:He).removeChild(a.stateNode)}catch(d){je(a,t,d)}else try{He.removeChild(a.stateNode)}catch(d){je(a,t,d)}break;case 18:He!==null&&(At?(e=He,lp(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Da(e)):lp(He,a.stateNode));break;case 4:l=He,c=At,He=a.stateNode.containerInfo,At=!0,kn(e,t,a),He=l,At=c;break;case 0:case 11:case 14:case 15:Fn(2,a,t),Ze||Fn(4,a,t),kn(e,t,a);break;case 1:Ze||(gn(a,t),l=a.stateNode,typeof l.componentWillUnmount=="function"&&og(a,t,l)),kn(e,t,a);break;case 21:kn(e,t,a);break;case 22:Ze=(l=Ze)||a.memoizedState!==null,kn(e,t,a),Ze=l;break;default:kn(e,t,a)}}function pg(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Da(e)}catch(a){je(t,t.return,a)}}}function yg(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Da(e)}catch(a){je(t,t.return,a)}}function W0(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new fg),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new fg),t;default:throw Error(i(435,e.tag))}}function hl(e,t){var a=W0(e);t.forEach(function(l){if(!a.has(l)){a.add(l);var c=lw.bind(null,e,l);l.then(c,c)}})}function Tt(e,t){var a=t.deletions;if(a!==null)for(var l=0;l<a.length;l++){var c=a[l],d=e,g=t,y=g;e:for(;y!==null;){switch(y.tag){case 27:if(rs(y.type)){He=y.stateNode,At=!1;break e}break;case 5:He=y.stateNode,At=!1;break e;case 3:case 4:He=y.stateNode.containerInfo,At=!0;break e}y=y.return}if(He===null)throw Error(i(160));gg(d,g,c),He=null,At=!1,d=c.alternate,d!==null&&(d.return=null),c.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)_g(t,e),t=t.sibling}var ln=null;function _g(e,t){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Tt(t,e),Ot(e),l&4&&(Fn(3,e,e.return),ki(3,e),Fn(5,e,e.return));break;case 1:Tt(t,e),Ot(e),l&512&&(Ze||a===null||gn(a,a.return)),l&64&&Nn&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var c=ln;if(Tt(t,e),Ot(e),l&512&&(Ze||a===null||gn(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){e:{l=e.type,a=e.memoizedProps,c=c.ownerDocument||c;t:switch(l){case"title":d=c.getElementsByTagName("title")[0],(!d||d[ri]||d[ot]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=c.createElement(l),c.head.insertBefore(d,c.querySelector("head > title"))),ft(d,l,a),d[ot]=e,at(d),l=d;break e;case"link":var g=_p("link","href",c).get(l+(a.href||""));if(g){for(var y=0;y<g.length;y++)if(d=g[y],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){g.splice(y,1);break t}}d=c.createElement(l),ft(d,l,a),c.head.appendChild(d);break;case"meta":if(g=_p("meta","content",c).get(l+(a.content||""))){for(y=0;y<g.length;y++)if(d=g[y],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){g.splice(y,1);break t}}d=c.createElement(l),ft(d,l,a),c.head.appendChild(d);break;default:throw Error(i(468,l))}d[ot]=e,at(d),l=d}e.stateNode=l}else vp(c,e.type,e.stateNode);else e.stateNode=yp(c,l,e.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?vp(c,e.type,e.stateNode):yp(c,l,e.memoizedProps)):l===null&&e.stateNode!==null&&pc(e,e.memoizedProps,a.memoizedProps)}break;case 27:Tt(t,e),Ot(e),l&512&&(Ze||a===null||gn(a,a.return)),a!==null&&l&4&&pc(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Tt(t,e),Ot(e),l&512&&(Ze||a===null||gn(a,a.return)),e.flags&32){c=e.stateNode;try{na(c,"")}catch(J){je(e,e.return,J)}}l&4&&e.stateNode!=null&&(c=e.memoizedProps,pc(e,c,a!==null?a.memoizedProps:c)),l&1024&&(vc=!0);break;case 6:if(Tt(t,e),Ot(e),l&4){if(e.stateNode===null)throw Error(i(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(J){je(e,e.return,J)}}break;case 3:if(Rl=null,c=ln,ln=xl(t.containerInfo),Tt(t,e),ln=c,Ot(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Da(t.containerInfo)}catch(J){je(e,e.return,J)}vc&&(vc=!1,vg(e));break;case 4:l=ln,ln=xl(e.stateNode.containerInfo),Tt(t,e),Ot(e),ln=l;break;case 12:Tt(t,e),Ot(e);break;case 31:Tt(t,e),Ot(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,hl(e,l)));break;case 13:Tt(t,e),Ot(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(gl=jt()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,hl(e,l)));break;case 22:c=e.memoizedState!==null;var S=a!==null&&a.memoizedState!==null,j=Nn,z=Ze;if(Nn=j||c,Ze=z||S,Tt(t,e),Ze=z,Nn=j,Ot(e),l&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(a===null||S||Nn||Ze||Ms(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){S=a=t;try{if(d=S.stateNode,c)g=d.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{y=S.stateNode;var H=S.memoizedProps.style,D=H!=null&&H.hasOwnProperty("display")?H.display:null;y.style.display=D==null||typeof D=="boolean"?"":(""+D).trim()}}catch(J){je(S,S.return,J)}}}else if(t.tag===6){if(a===null){S=t;try{S.stateNode.nodeValue=c?"":S.memoizedProps}catch(J){je(S,S.return,J)}}}else if(t.tag===18){if(a===null){S=t;try{var M=S.stateNode;c?op(M,!0):op(S.stateNode,!1)}catch(J){je(S,S.return,J)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,hl(e,a))));break;case 19:Tt(t,e),Ot(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,hl(e,l)));break;case 30:break;case 21:break;default:Tt(t,e),Ot(e)}}function Ot(e){var t=e.flags;if(t&2){try{for(var a,l=e.return;l!==null;){if(cg(l)){a=l;break}l=l.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var c=a.stateNode,d=yc(e);fl(e,d,c);break;case 5:var g=a.stateNode;a.flags&32&&(na(g,""),a.flags&=-33);var y=yc(e);fl(e,y,g);break;case 3:case 4:var S=a.stateNode.containerInfo,j=yc(e);_c(e,j,S);break;default:throw Error(i(161))}}catch(z){je(e,e.return,z)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function vg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;vg(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Dn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)hg(e,t.alternate,t),t=t.sibling}function Ms(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Fn(4,t,t.return),Ms(t);break;case 1:gn(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&og(t,t.return,a),Ms(t);break;case 27:Ii(t.stateNode);case 26:case 5:gn(t,t.return),Ms(t);break;case 22:t.memoizedState===null&&Ms(t);break;case 30:Ms(t);break;default:Ms(t)}e=e.sibling}}function Un(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,c=e,d=t,g=d.flags;switch(d.tag){case 0:case 11:case 15:Un(c,d,a),ki(4,d);break;case 1:if(Un(c,d,a),l=d,c=l.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(j){je(l,l.return,j)}if(l=d,c=l.updateQueue,c!==null){var y=l.stateNode;try{var S=c.shared.hiddenCallbacks;if(S!==null)for(c.shared.hiddenCallbacks=null,c=0;c<S.length;c++)Qh(S[c],y)}catch(j){je(l,l.return,j)}}a&&g&64&&lg(d),Di(d,d.return);break;case 27:dg(d);case 26:case 5:Un(c,d,a),a&&l===null&&g&4&&ug(d),Di(d,d.return);break;case 12:Un(c,d,a);break;case 31:Un(c,d,a),a&&g&4&&pg(c,d);break;case 13:Un(c,d,a),a&&g&4&&yg(c,d);break;case 22:d.memoizedState===null&&Un(c,d,a),Di(d,d.return);break;case 30:break;default:Un(c,d,a)}t=t.sibling}}function bc(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&vi(a))}function wc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&vi(e))}function on(e,t,a,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)bg(e,t,a,l),t=t.sibling}function bg(e,t,a,l){var c=t.flags;switch(t.tag){case 0:case 11:case 15:on(e,t,a,l),c&2048&&ki(9,t);break;case 1:on(e,t,a,l);break;case 3:on(e,t,a,l),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&vi(e)));break;case 12:if(c&2048){on(e,t,a,l),e=t.stateNode;try{var d=t.memoizedProps,g=d.id,y=d.onPostCommit;typeof y=="function"&&y(g,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(S){je(t,t.return,S)}}else on(e,t,a,l);break;case 31:on(e,t,a,l);break;case 13:on(e,t,a,l);break;case 23:break;case 22:d=t.stateNode,g=t.alternate,t.memoizedState!==null?d._visibility&2?on(e,t,a,l):Ui(e,t):d._visibility&2?on(e,t,a,l):(d._visibility|=2,Sa(e,t,a,l,(t.subtreeFlags&10256)!==0||!1)),c&2048&&bc(g,t);break;case 24:on(e,t,a,l),c&2048&&wc(t.alternate,t);break;default:on(e,t,a,l)}}function Sa(e,t,a,l,c){for(c=c&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var d=e,g=t,y=a,S=l,j=g.flags;switch(g.tag){case 0:case 11:case 15:Sa(d,g,y,S,c),ki(8,g);break;case 23:break;case 22:var z=g.stateNode;g.memoizedState!==null?z._visibility&2?Sa(d,g,y,S,c):Ui(d,g):(z._visibility|=2,Sa(d,g,y,S,c)),c&&j&2048&&bc(g.alternate,g);break;case 24:Sa(d,g,y,S,c),c&&j&2048&&wc(g.alternate,g);break;default:Sa(d,g,y,S,c)}t=t.sibling}}function Ui(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,l=t,c=l.flags;switch(l.tag){case 22:Ui(a,l),c&2048&&bc(l.alternate,l);break;case 24:Ui(a,l),c&2048&&wc(l.alternate,l);break;default:Ui(a,l)}t=t.sibling}}var Mi=8192;function Ea(e,t,a){if(e.subtreeFlags&Mi)for(e=e.child;e!==null;)wg(e,t,a),e=e.sibling}function wg(e,t,a){switch(e.tag){case 26:Ea(e,t,a),e.flags&Mi&&e.memoizedState!==null&&$w(a,ln,e.memoizedState,e.memoizedProps);break;case 5:Ea(e,t,a);break;case 3:case 4:var l=ln;ln=xl(e.stateNode.containerInfo),Ea(e,t,a),ln=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=Mi,Mi=16777216,Ea(e,t,a),Mi=l):Ea(e,t,a));break;default:Ea(e,t,a)}}function Sg(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function zi(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];it=l,Ag(l,e)}Sg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Eg(e),e=e.sibling}function Eg(e){switch(e.tag){case 0:case 11:case 15:zi(e),e.flags&2048&&Fn(9,e,e.return);break;case 3:zi(e);break;case 12:zi(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,ml(e)):zi(e);break;default:zi(e)}}function ml(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];it=l,Ag(l,e)}Sg(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Fn(8,t,t.return),ml(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,ml(t));break;default:ml(t)}e=e.sibling}}function Ag(e,t){for(;it!==null;){var a=it;switch(a.tag){case 0:case 11:case 15:Fn(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:vi(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,it=l;else e:for(a=e;it!==null;){l=it;var c=l.sibling,d=l.return;if(mg(l),l===a){it=null;break e}if(c!==null){c.return=d,it=c;break e}it=d}}}var F0={getCacheForType:function(e){var t=ct(Xe),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return ct(Xe).controller.signal}},ew=typeof WeakMap=="function"?WeakMap:Map,Te=0,Be=null,_e=null,be=0,Re=0,Bt=null,es=!1,Aa=!1,Sc=!1,Mn=0,Ve=0,ts=0,zs=0,Ec=0,$t=0,Ta=0,Bi=null,xt=null,Ac=!1,gl=0,Tg=0,pl=1/0,yl=null,ns=null,et=0,ss=null,Oa=null,zn=0,Tc=0,Oc=null,Og=null,$i=0,xc=null;function Lt(){return(Te&2)!==0&&be!==0?be&-be:$.T!==null?Dc():If()}function xg(){if($t===0)if((be&536870912)===0||Se){var e=Tr;Tr<<=1,(Tr&3932160)===0&&(Tr=262144),$t=e}else $t=536870912;return e=Mt.current,e!==null&&(e.flags|=32),$t}function Ct(e,t,a){(e===Be&&(Re===2||Re===9)||e.cancelPendingCommit!==null)&&(xa(e,0),as(e,be,$t,!1)),ii(e,a),((Te&2)===0||e!==Be)&&(e===Be&&((Te&2)===0&&(zs|=a),Ve===4&&as(e,be,$t,!1)),pn(e))}function Cg(e,t,a){if((Te&6)!==0)throw Error(i(327));var l=!a&&(t&127)===0&&(t&e.expiredLanes)===0||ai(e,t),c=l?sw(e,t):Rc(e,t,!0),d=l;do{if(c===0){Aa&&!l&&as(e,t,0,!1);break}else{if(a=e.current.alternate,d&&!tw(a)){c=Rc(e,t,!1),d=!1;continue}if(c===2){if(d=t,e.errorRecoveryDisabledLanes&d)var g=0;else g=e.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){t=g;e:{var y=e;c=Bi;var S=y.current.memoizedState.isDehydrated;if(S&&(xa(y,g).flags|=256),g=Rc(y,g,!1),g!==2){if(Sc&&!S){y.errorRecoveryDisabledLanes|=d,zs|=d,c=4;break e}d=xt,xt=c,d!==null&&(xt===null?xt=d:xt.push.apply(xt,d))}c=g}if(d=!1,c!==2)continue}}if(c===1){xa(e,0),as(e,t,0,!0);break}e:{switch(l=e,d=c,d){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:as(l,t,$t,!es);break e;case 2:xt=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(c=gl+300-jt(),10<c)){if(as(l,t,$t,!es),xr(l,0,!0)!==0)break e;zn=t,l.timeoutHandle=ip(Rg.bind(null,l,a,xt,yl,Ac,t,$t,zs,Ta,es,d,"Throttled",-0,0),c);break e}Rg(l,a,xt,yl,Ac,t,$t,zs,Ta,es,d,null,-0,0)}}break}while(!0);pn(e)}function Rg(e,t,a,l,c,d,g,y,S,j,z,H,D,M){if(e.timeoutHandle=-1,H=t.subtreeFlags,H&8192||(H&16785408)===16785408){H={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:wn},wg(t,d,H);var J=(d&62914560)===d?gl-jt():(d&4194048)===d?Tg-jt():0;if(J=Lw(H,J),J!==null){zn=d,e.cancelPendingCommit=J(Bg.bind(null,e,t,d,a,l,c,g,y,S,z,H,null,D,M)),as(e,d,g,!j);return}}Bg(e,t,d,a,l,c,g,y,S)}function tw(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var c=a[l],d=c.getSnapshot;c=c.value;try{if(!Dt(d(),c))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function as(e,t,a,l){t&=~Ec,t&=~zs,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var c=t;0<c;){var d=31-kt(c),g=1<<d;l[d]=-1,c&=~g}a!==0&&Lf(e,a,t)}function _l(){return(Te&6)===0?(Li(0),!1):!0}function Cc(){if(_e!==null){if(Re===0)var e=_e.return;else e=_e,Tn=xs=null,Vu(e),ya=null,wi=0,e=_e;for(;e!==null;)rg(e.alternate,e),e=e.return;_e=null}}function xa(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,ww(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),zn=0,Cc(),Be=e,_e=a=En(e.current,null),be=t,Re=0,Bt=null,es=!1,Aa=ai(e,t),Sc=!1,Ta=$t=Ec=zs=ts=Ve=0,xt=Bi=null,Ac=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var c=31-kt(l),d=1<<c;t|=e[c],l&=~d}return Mn=t,Lr(),a}function jg(e,t){fe=null,$.H=Ri,t===pa||t===Kr?(t=Yh(),Re=3):t===ku?(t=Yh(),Re=4):Re=t===rc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Bt=t,_e===null&&(Ve=1,ll(e,Jt(t,e.current)))}function Ng(){var e=Mt.current;return e===null?!0:(be&4194048)===be?Ft===null:(be&62914560)===be||(be&536870912)!==0?e===Ft:!1}function kg(){var e=$.H;return $.H=Ri,e===null?Ri:e}function Dg(){var e=$.A;return $.A=F0,e}function vl(){Ve=4,es||(be&4194048)!==be&&Mt.current!==null||(Aa=!0),(ts&134217727)===0&&(zs&134217727)===0||Be===null||as(Be,be,$t,!1)}function Rc(e,t,a){var l=Te;Te|=2;var c=kg(),d=Dg();(Be!==e||be!==t)&&(yl=null,xa(e,t)),t=!1;var g=Ve;e:do try{if(Re!==0&&_e!==null){var y=_e,S=Bt;switch(Re){case 8:Cc(),g=6;break e;case 3:case 2:case 9:case 6:Mt.current===null&&(t=!0);var j=Re;if(Re=0,Bt=null,Ca(e,y,S,j),a&&Aa){g=0;break e}break;default:j=Re,Re=0,Bt=null,Ca(e,y,S,j)}}nw(),g=Ve;break}catch(z){jg(e,z)}while(!0);return t&&e.shellSuspendCounter++,Tn=xs=null,Te=l,$.H=c,$.A=d,_e===null&&(Be=null,be=0,Lr()),g}function nw(){for(;_e!==null;)Ug(_e)}function sw(e,t){var a=Te;Te|=2;var l=kg(),c=Dg();Be!==e||be!==t?(yl=null,pl=jt()+500,xa(e,t)):Aa=ai(e,t);e:do try{if(Re!==0&&_e!==null){t=_e;var d=Bt;t:switch(Re){case 1:Re=0,Bt=null,Ca(e,t,d,1);break;case 2:case 9:if(Vh(d)){Re=0,Bt=null,Mg(t);break}t=function(){Re!==2&&Re!==9||Be!==e||(Re=7),pn(e)},d.then(t,t);break e;case 3:Re=7;break e;case 4:Re=5;break e;case 7:Vh(d)?(Re=0,Bt=null,Mg(t)):(Re=0,Bt=null,Ca(e,t,d,7));break;case 5:var g=null;switch(_e.tag){case 26:g=_e.memoizedState;case 5:case 27:var y=_e;if(g?bp(g):y.stateNode.complete){Re=0,Bt=null;var S=y.sibling;if(S!==null)_e=S;else{var j=y.return;j!==null?(_e=j,bl(j)):_e=null}break t}}Re=0,Bt=null,Ca(e,t,d,5);break;case 6:Re=0,Bt=null,Ca(e,t,d,6);break;case 8:Cc(),Ve=6;break e;default:throw Error(i(462))}}aw();break}catch(z){jg(e,z)}while(!0);return Tn=xs=null,$.H=l,$.A=c,Te=a,_e!==null?0:(Be=null,be=0,Lr(),Ve)}function aw(){for(;_e!==null&&!xb();)Ug(_e)}function Ug(e){var t=ag(e.alternate,e,Mn);e.memoizedProps=e.pendingProps,t===null?bl(e):_e=t}function Mg(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Wm(a,t,t.pendingProps,t.type,void 0,be);break;case 11:t=Wm(a,t,t.pendingProps,t.type.render,t.ref,be);break;case 5:Vu(t);default:rg(a,t),t=_e=Dh(t,Mn),t=ag(a,t,Mn)}e.memoizedProps=e.pendingProps,t===null?bl(e):_e=t}function Ca(e,t,a,l){Tn=xs=null,Vu(t),ya=null,wi=0;var c=t.return;try{if(Y0(e,c,t,a,be)){Ve=1,ll(e,Jt(a,e.current)),_e=null;return}}catch(d){if(c!==null)throw _e=c,d;Ve=1,ll(e,Jt(a,e.current)),_e=null;return}t.flags&32768?(Se||l===1?e=!0:Aa||(be&536870912)!==0?e=!1:(es=e=!0,(l===2||l===9||l===3||l===6)&&(l=Mt.current,l!==null&&l.tag===13&&(l.flags|=16384))),zg(t,e)):bl(t)}function bl(e){var t=e;do{if((t.flags&32768)!==0){zg(t,es);return}e=t.return;var a=J0(t.alternate,t,Mn);if(a!==null){_e=a;return}if(t=t.sibling,t!==null){_e=t;return}_e=t=e}while(t!==null);Ve===0&&(Ve=5)}function zg(e,t){do{var a=Q0(e.alternate,e);if(a!==null){a.flags&=32767,_e=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){_e=e;return}_e=e=a}while(e!==null);Ve=6,_e=null}function Bg(e,t,a,l,c,d,g,y,S){e.cancelPendingCommit=null;do wl();while(et!==0);if((Te&6)!==0)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(d=t.lanes|t.childLanes,d|=yu,Bb(e,a,d,g,y,S),e===Be&&(_e=Be=null,be=0),Oa=t,ss=e,zn=a,Tc=d,Oc=c,Og=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,ow(Er,function(){return Ig(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=$.T,$.T=null,c=K.p,K.p=2,g=Te,Te|=4;try{Z0(e,t,a)}finally{Te=g,K.p=c,$.T=l}}et=1,$g(),Lg(),qg()}}function $g(){if(et===1){et=0;var e=ss,t=Oa,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=$.T,$.T=null;var l=K.p;K.p=2;var c=Te;Te|=4;try{_g(t,e);var d=Hc,g=Ah(e.containerInfo),y=d.focusedElem,S=d.selectionRange;if(g!==y&&y&&y.ownerDocument&&Eh(y.ownerDocument.documentElement,y)){if(S!==null&&fu(y)){var j=S.start,z=S.end;if(z===void 0&&(z=j),"selectionStart"in y)y.selectionStart=j,y.selectionEnd=Math.min(z,y.value.length);else{var H=y.ownerDocument||document,D=H&&H.defaultView||window;if(D.getSelection){var M=D.getSelection(),J=y.textContent.length,ie=Math.min(S.start,J),Ue=S.end===void 0?ie:Math.min(S.end,J);!M.extend&&ie>Ue&&(g=Ue,Ue=ie,ie=g);var x=Sh(y,ie),A=Sh(y,Ue);if(x&&A&&(M.rangeCount!==1||M.anchorNode!==x.node||M.anchorOffset!==x.offset||M.focusNode!==A.node||M.focusOffset!==A.offset)){var R=H.createRange();R.setStart(x.node,x.offset),M.removeAllRanges(),ie>Ue?(M.addRange(R),M.extend(A.node,A.offset)):(R.setEnd(A.node,A.offset),M.addRange(R))}}}}for(H=[],M=y;M=M.parentNode;)M.nodeType===1&&H.push({element:M,left:M.scrollLeft,top:M.scrollTop});for(typeof y.focus=="function"&&y.focus(),y=0;y<H.length;y++){var L=H[y];L.element.scrollLeft=L.left,L.element.scrollTop=L.top}}Dl=!!qc,Hc=qc=null}finally{Te=c,K.p=l,$.T=a}}e.current=t,et=2}}function Lg(){if(et===2){et=0;var e=ss,t=Oa,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=$.T,$.T=null;var l=K.p;K.p=2;var c=Te;Te|=4;try{hg(e,t.alternate,t)}finally{Te=c,K.p=l,$.T=a}}et=3}}function qg(){if(et===4||et===3){et=0,Cb();var e=ss,t=Oa,a=zn,l=Og;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?et=5:(et=0,Oa=ss=null,Hg(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(ns=null),Ko(a),t=t.stateNode,Nt&&typeof Nt.onCommitFiberRoot=="function")try{Nt.onCommitFiberRoot(si,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=$.T,c=K.p,K.p=2,$.T=null;try{for(var d=e.onRecoverableError,g=0;g<l.length;g++){var y=l[g];d(y.value,{componentStack:y.stack})}}finally{$.T=t,K.p=c}}(zn&3)!==0&&wl(),pn(e),c=e.pendingLanes,(a&261930)!==0&&(c&42)!==0?e===xc?$i++:($i=0,xc=e):$i=0,Li(0)}}function Hg(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,vi(t)))}function wl(){return $g(),Lg(),qg(),Ig()}function Ig(){if(et!==5)return!1;var e=ss,t=Tc;Tc=0;var a=Ko(zn),l=$.T,c=K.p;try{K.p=32>a?32:a,$.T=null,a=Oc,Oc=null;var d=ss,g=zn;if(et=0,Oa=ss=null,zn=0,(Te&6)!==0)throw Error(i(331));var y=Te;if(Te|=4,Eg(d.current),bg(d,d.current,g,a),Te=y,Li(0,!1),Nt&&typeof Nt.onPostCommitFiberRoot=="function")try{Nt.onPostCommitFiberRoot(si,d)}catch{}return!0}finally{K.p=c,$.T=l,Hg(e,t)}}function Gg(e,t,a){t=Jt(a,t),t=ic(e.stateNode,t,2),e=Qn(e,t,2),e!==null&&(ii(e,2),pn(e))}function je(e,t,a){if(e.tag===3)Gg(e,e,a);else for(;t!==null;){if(t.tag===3){Gg(t,e,a);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ns===null||!ns.has(l))){e=Jt(a,e),a=Vm(2),l=Qn(t,a,2),l!==null&&(Pm(a,l,t,e),ii(l,2),pn(l));break}}t=t.return}}function jc(e,t,a){var l=e.pingCache;if(l===null){l=e.pingCache=new ew;var c=new Set;l.set(t,c)}else c=l.get(t),c===void 0&&(c=new Set,l.set(t,c));c.has(a)||(Sc=!0,c.add(a),e=iw.bind(null,e,t,a),t.then(e,e))}function iw(e,t,a){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Be===e&&(be&a)===a&&(Ve===4||Ve===3&&(be&62914560)===be&&300>jt()-gl?(Te&2)===0&&xa(e,0):Ec|=a,Ta===be&&(Ta=0)),pn(e)}function Vg(e,t){t===0&&(t=$f()),e=As(e,t),e!==null&&(ii(e,t),pn(e))}function rw(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),Vg(e,a)}function lw(e,t){var a=0;switch(e.tag){case 31:case 13:var l=e.stateNode,c=e.memoizedState;c!==null&&(a=c.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(t),Vg(e,a)}function ow(e,t){return Go(e,t)}var Sl=null,Ra=null,Nc=!1,El=!1,kc=!1,is=0;function pn(e){e!==Ra&&e.next===null&&(Ra===null?Sl=Ra=e:Ra=Ra.next=e),El=!0,Nc||(Nc=!0,cw())}function Li(e,t){if(!kc&&El){kc=!0;do for(var a=!1,l=Sl;l!==null;){if(e!==0){var c=l.pendingLanes;if(c===0)var d=0;else{var g=l.suspendedLanes,y=l.pingedLanes;d=(1<<31-kt(42|e)+1)-1,d&=c&~(g&~y),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,Xg(l,d))}else d=be,d=xr(l,l===Be?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||ai(l,d)||(a=!0,Xg(l,d));l=l.next}while(a);kc=!1}}function uw(){Pg()}function Pg(){El=Nc=!1;var e=0;is!==0&&bw()&&(e=is);for(var t=jt(),a=null,l=Sl;l!==null;){var c=l.next,d=Yg(l,t);d===0?(l.next=null,a===null?Sl=c:a.next=c,c===null&&(Ra=a)):(a=l,(e!==0||(d&3)!==0)&&(El=!0)),l=c}et!==0&&et!==5||Li(e),is!==0&&(is=0)}function Yg(e,t){for(var a=e.suspendedLanes,l=e.pingedLanes,c=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var g=31-kt(d),y=1<<g,S=c[g];S===-1?((y&a)===0||(y&l)!==0)&&(c[g]=zb(y,t)):S<=t&&(e.expiredLanes|=y),d&=~y}if(t=Be,a=be,a=xr(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===t&&(Re===2||Re===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Vo(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||ai(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(l!==null&&Vo(l),Ko(a)){case 2:case 8:a=zf;break;case 32:a=Er;break;case 268435456:a=Bf;break;default:a=Er}return l=Kg.bind(null,e),a=Go(a,l),e.callbackPriority=t,e.callbackNode=a,t}return l!==null&&l!==null&&Vo(l),e.callbackPriority=2,e.callbackNode=null,2}function Kg(e,t){if(et!==0&&et!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(wl()&&e.callbackNode!==a)return null;var l=be;return l=xr(e,e===Be?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Cg(e,l,t),Yg(e,jt()),e.callbackNode!=null&&e.callbackNode===a?Kg.bind(null,e):null)}function Xg(e,t){if(wl())return null;Cg(e,t,!0)}function cw(){Sw(function(){(Te&6)!==0?Go(Mf,uw):Pg()})}function Dc(){if(is===0){var e=ma;e===0&&(e=Ar,Ar<<=1,(Ar&261888)===0&&(Ar=256)),is=e}return is}function Jg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Nr(""+e)}function Qg(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function dw(e,t,a,l,c){if(t==="submit"&&a&&a.stateNode===c){var d=Jg((c[St]||null).action),g=l.submitter;g&&(t=(t=g[St]||null)?Jg(t.formAction):g.getAttribute("formAction"),t!==null&&(d=t,g=null));var y=new Mr("action","action",null,l,c);e.push({event:y,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(is!==0){var S=g?Qg(c,g):new FormData(c);Fu(a,{pending:!0,data:S,method:c.method,action:d},null,S)}}else typeof d=="function"&&(y.preventDefault(),S=g?Qg(c,g):new FormData(c),Fu(a,{pending:!0,data:S,method:c.method,action:d},d,S))},currentTarget:c}]})}}for(var Uc=0;Uc<pu.length;Uc++){var Mc=pu[Uc],fw=Mc.toLowerCase(),hw=Mc[0].toUpperCase()+Mc.slice(1);rn(fw,"on"+hw)}rn(xh,"onAnimationEnd"),rn(Ch,"onAnimationIteration"),rn(Rh,"onAnimationStart"),rn("dblclick","onDoubleClick"),rn("focusin","onFocus"),rn("focusout","onBlur"),rn(R0,"onTransitionRun"),rn(j0,"onTransitionStart"),rn(N0,"onTransitionCancel"),rn(jh,"onTransitionEnd"),ea("onMouseEnter",["mouseout","mouseover"]),ea("onMouseLeave",["mouseout","mouseover"]),ea("onPointerEnter",["pointerout","pointerover"]),ea("onPointerLeave",["pointerout","pointerover"]),bs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bs("onBeforeInput",["compositionend","keypress","textInput","paste"]),bs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qi));function Zg(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],c=l.event;l=l.listeners;e:{var d=void 0;if(t)for(var g=l.length-1;0<=g;g--){var y=l[g],S=y.instance,j=y.currentTarget;if(y=y.listener,S!==d&&c.isPropagationStopped())break e;d=y,c.currentTarget=j;try{d(c)}catch(z){$r(z)}c.currentTarget=null,d=S}else for(g=0;g<l.length;g++){if(y=l[g],S=y.instance,j=y.currentTarget,y=y.listener,S!==d&&c.isPropagationStopped())break e;d=y,c.currentTarget=j;try{d(c)}catch(z){$r(z)}c.currentTarget=null,d=S}}}}function ve(e,t){var a=t[Xo];a===void 0&&(a=t[Xo]=new Set);var l=e+"__bubble";a.has(l)||(Wg(t,e,2,!1),a.add(l))}function zc(e,t,a){var l=0;t&&(l|=4),Wg(a,e,l,t)}var Al="_reactListening"+Math.random().toString(36).slice(2);function Bc(e){if(!e[Al]){e[Al]=!0,Pf.forEach(function(a){a!=="selectionchange"&&(mw.has(a)||zc(a,!1,e),zc(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Al]||(t[Al]=!0,zc("selectionchange",!1,t))}}function Wg(e,t,a,l){switch(xp(t)){case 2:var c=Iw;break;case 8:c=Gw;break;default:c=Wc}a=c.bind(null,t,a,e),c=void 0,!su||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),l?c!==void 0?e.addEventListener(t,a,{capture:!0,passive:c}):e.addEventListener(t,a,!0):c!==void 0?e.addEventListener(t,a,{passive:c}):e.addEventListener(t,a,!1)}function $c(e,t,a,l,c){var d=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var g=l.tag;if(g===3||g===4){var y=l.stateNode.containerInfo;if(y===c)break;if(g===4)for(g=l.return;g!==null;){var S=g.tag;if((S===3||S===4)&&g.stateNode.containerInfo===c)return;g=g.return}for(;y!==null;){if(g=Zs(y),g===null)return;if(S=g.tag,S===5||S===6||S===26||S===27){l=d=g;continue e}y=y.parentNode}}l=l.return}sh(function(){var j=d,z=tu(a),H=[];e:{var D=Nh.get(e);if(D!==void 0){var M=Mr,J=e;switch(e){case"keypress":if(Dr(a)===0)break e;case"keydown":case"keyup":M=l0;break;case"focusin":J="focus",M=lu;break;case"focusout":J="blur",M=lu;break;case"beforeblur":case"afterblur":M=lu;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":M=rh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":M=Jb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":M=c0;break;case xh:case Ch:case Rh:M=Wb;break;case jh:M=f0;break;case"scroll":case"scrollend":M=Kb;break;case"wheel":M=m0;break;case"copy":case"cut":case"paste":M=e0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":M=oh;break;case"toggle":case"beforetoggle":M=p0}var ie=(t&4)!==0,Ue=!ie&&(e==="scroll"||e==="scrollend"),x=ie?D!==null?D+"Capture":null:D;ie=[];for(var A=j,R;A!==null;){var L=A;if(R=L.stateNode,L=L.tag,L!==5&&L!==26&&L!==27||R===null||x===null||(L=oi(A,x),L!=null&&ie.push(Hi(A,L,R))),Ue)break;A=A.return}0<ie.length&&(D=new M(D,J,null,a,z),H.push({event:D,listeners:ie}))}}if((t&7)===0){e:{if(D=e==="mouseover"||e==="pointerover",M=e==="mouseout"||e==="pointerout",D&&a!==eu&&(J=a.relatedTarget||a.fromElement)&&(Zs(J)||J[Qs]))break e;if((M||D)&&(D=z.window===z?z:(D=z.ownerDocument)?D.defaultView||D.parentWindow:window,M?(J=a.relatedTarget||a.toElement,M=j,J=J?Zs(J):null,J!==null&&(Ue=u(J),ie=J.tag,J!==Ue||ie!==5&&ie!==27&&ie!==6)&&(J=null)):(M=null,J=j),M!==J)){if(ie=rh,L="onMouseLeave",x="onMouseEnter",A="mouse",(e==="pointerout"||e==="pointerover")&&(ie=oh,L="onPointerLeave",x="onPointerEnter",A="pointer"),Ue=M==null?D:li(M),R=J==null?D:li(J),D=new ie(L,A+"leave",M,a,z),D.target=Ue,D.relatedTarget=R,L=null,Zs(z)===j&&(ie=new ie(x,A+"enter",J,a,z),ie.target=R,ie.relatedTarget=Ue,L=ie),Ue=L,M&&J)t:{for(ie=gw,x=M,A=J,R=0,L=x;L;L=ie(L))R++;L=0;for(var ne=A;ne;ne=ie(ne))L++;for(;0<R-L;)x=ie(x),R--;for(;0<L-R;)A=ie(A),L--;for(;R--;){if(x===A||A!==null&&x===A.alternate){ie=x;break t}x=ie(x),A=ie(A)}ie=null}else ie=null;M!==null&&Fg(H,D,M,ie,!1),J!==null&&Ue!==null&&Fg(H,Ue,J,ie,!0)}}e:{if(D=j?li(j):window,M=D.nodeName&&D.nodeName.toLowerCase(),M==="select"||M==="input"&&D.type==="file")var Ee=ph;else if(mh(D))if(yh)Ee=O0;else{Ee=A0;var W=E0}else M=D.nodeName,!M||M.toLowerCase()!=="input"||D.type!=="checkbox"&&D.type!=="radio"?j&&Fo(j.elementType)&&(Ee=ph):Ee=T0;if(Ee&&(Ee=Ee(e,j))){gh(H,Ee,a,z);break e}W&&W(e,D,j),e==="focusout"&&j&&D.type==="number"&&j.memoizedProps.value!=null&&Wo(D,"number",D.value)}switch(W=j?li(j):window,e){case"focusin":(mh(W)||W.contentEditable==="true")&&(ra=W,hu=j,pi=null);break;case"focusout":pi=hu=ra=null;break;case"mousedown":mu=!0;break;case"contextmenu":case"mouseup":case"dragend":mu=!1,Th(H,a,z);break;case"selectionchange":if(C0)break;case"keydown":case"keyup":Th(H,a,z)}var me;if(uu)e:{switch(e){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else ia?fh(e,a)&&(we="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(we="onCompositionStart");we&&(uh&&a.locale!=="ko"&&(ia||we!=="onCompositionStart"?we==="onCompositionEnd"&&ia&&(me=ah()):(Gn=z,au="value"in Gn?Gn.value:Gn.textContent,ia=!0)),W=Tl(j,we),0<W.length&&(we=new lh(we,e,null,a,z),H.push({event:we,listeners:W}),me?we.data=me:(me=hh(a),me!==null&&(we.data=me)))),(me=_0?v0(e,a):b0(e,a))&&(we=Tl(j,"onBeforeInput"),0<we.length&&(W=new lh("onBeforeInput","beforeinput",null,a,z),H.push({event:W,listeners:we}),W.data=me)),dw(H,e,j,a,z)}Zg(H,t)})}function Hi(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Tl(e,t){for(var a=t+"Capture",l=[];e!==null;){var c=e,d=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||d===null||(c=oi(e,a),c!=null&&l.unshift(Hi(e,c,d)),c=oi(e,t),c!=null&&l.push(Hi(e,c,d))),e.tag===3)return l;e=e.return}return[]}function gw(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Fg(e,t,a,l,c){for(var d=t._reactName,g=[];a!==null&&a!==l;){var y=a,S=y.alternate,j=y.stateNode;if(y=y.tag,S!==null&&S===l)break;y!==5&&y!==26&&y!==27||j===null||(S=j,c?(j=oi(a,d),j!=null&&g.unshift(Hi(a,j,S))):c||(j=oi(a,d),j!=null&&g.push(Hi(a,j,S)))),a=a.return}g.length!==0&&e.push({event:t,listeners:g})}var pw=/\r\n?/g,yw=/\u0000|\uFFFD/g;function ep(e){return(typeof e=="string"?e:""+e).replace(pw,`
`).replace(yw,"")}function tp(e,t){return t=ep(t),ep(e)===t}function De(e,t,a,l,c,d){switch(a){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||na(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&na(e,""+l);break;case"className":Rr(e,"class",l);break;case"tabIndex":Rr(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Rr(e,a,l);break;case"style":th(e,l,d);break;case"data":if(t!=="object"){Rr(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Nr(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(t!=="input"&&De(e,t,"name",c.name,c,null),De(e,t,"formEncType",c.formEncType,c,null),De(e,t,"formMethod",c.formMethod,c,null),De(e,t,"formTarget",c.formTarget,c,null)):(De(e,t,"encType",c.encType,c,null),De(e,t,"method",c.method,c,null),De(e,t,"target",c.target,c,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Nr(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=wn);break;case"onScroll":l!=null&&ve("scroll",e);break;case"onScrollEnd":l!=null&&ve("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(c.children!=null)throw Error(i(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=Nr(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":ve("beforetoggle",e),ve("toggle",e),Cr(e,"popover",l);break;case"xlinkActuate":bn(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":bn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":bn(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":bn(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":bn(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":bn(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":bn(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":bn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":bn(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Cr(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Pb.get(a)||a,Cr(e,a,l))}}function Lc(e,t,a,l,c,d){switch(a){case"style":th(e,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(c.children!=null)throw Error(i(60));e.innerHTML=a}}break;case"children":typeof l=="string"?na(e,l):(typeof l=="number"||typeof l=="bigint")&&na(e,""+l);break;case"onScroll":l!=null&&ve("scroll",e);break;case"onScrollEnd":l!=null&&ve("scrollend",e);break;case"onClick":l!=null&&(e.onclick=wn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yf.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(c=a.endsWith("Capture"),t=a.slice(2,c?a.length-7:void 0),d=e[St]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(t,d,c),typeof l=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,l,c);break e}a in e?e[a]=l:l===!0?e.setAttribute(a,""):Cr(e,a,l)}}}function ft(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ve("error",e),ve("load",e);var l=!1,c=!1,d;for(d in a)if(a.hasOwnProperty(d)){var g=a[d];if(g!=null)switch(d){case"src":l=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:De(e,t,d,g,a,null)}}c&&De(e,t,"srcSet",a.srcSet,a,null),l&&De(e,t,"src",a.src,a,null);return;case"input":ve("invalid",e);var y=d=g=c=null,S=null,j=null;for(l in a)if(a.hasOwnProperty(l)){var z=a[l];if(z!=null)switch(l){case"name":c=z;break;case"type":g=z;break;case"checked":S=z;break;case"defaultChecked":j=z;break;case"value":d=z;break;case"defaultValue":y=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(i(137,t));break;default:De(e,t,l,z,a,null)}}Zf(e,d,y,S,j,g,c,!1);return;case"select":ve("invalid",e),l=g=d=null;for(c in a)if(a.hasOwnProperty(c)&&(y=a[c],y!=null))switch(c){case"value":d=y;break;case"defaultValue":g=y;break;case"multiple":l=y;default:De(e,t,c,y,a,null)}t=d,a=g,e.multiple=!!l,t!=null?ta(e,!!l,t,!1):a!=null&&ta(e,!!l,a,!0);return;case"textarea":ve("invalid",e),d=c=l=null;for(g in a)if(a.hasOwnProperty(g)&&(y=a[g],y!=null))switch(g){case"value":l=y;break;case"defaultValue":c=y;break;case"children":d=y;break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:De(e,t,g,y,a,null)}Ff(e,l,c,d);return;case"option":for(S in a)if(a.hasOwnProperty(S)&&(l=a[S],l!=null))switch(S){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:De(e,t,S,l,a,null)}return;case"dialog":ve("beforetoggle",e),ve("toggle",e),ve("cancel",e),ve("close",e);break;case"iframe":case"object":ve("load",e);break;case"video":case"audio":for(l=0;l<qi.length;l++)ve(qi[l],e);break;case"image":ve("error",e),ve("load",e);break;case"details":ve("toggle",e);break;case"embed":case"source":case"link":ve("error",e),ve("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in a)if(a.hasOwnProperty(j)&&(l=a[j],l!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:De(e,t,j,l,a,null)}return;default:if(Fo(t)){for(z in a)a.hasOwnProperty(z)&&(l=a[z],l!==void 0&&Lc(e,t,z,l,a,void 0));return}}for(y in a)a.hasOwnProperty(y)&&(l=a[y],l!=null&&De(e,t,y,l,a,null))}function _w(e,t,a,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,d=null,g=null,y=null,S=null,j=null,z=null;for(M in a){var H=a[M];if(a.hasOwnProperty(M)&&H!=null)switch(M){case"checked":break;case"value":break;case"defaultValue":S=H;default:l.hasOwnProperty(M)||De(e,t,M,null,l,H)}}for(var D in l){var M=l[D];if(H=a[D],l.hasOwnProperty(D)&&(M!=null||H!=null))switch(D){case"type":d=M;break;case"name":c=M;break;case"checked":j=M;break;case"defaultChecked":z=M;break;case"value":g=M;break;case"defaultValue":y=M;break;case"children":case"dangerouslySetInnerHTML":if(M!=null)throw Error(i(137,t));break;default:M!==H&&De(e,t,D,M,l,H)}}Zo(e,g,y,S,j,z,d,c);return;case"select":M=g=y=D=null;for(d in a)if(S=a[d],a.hasOwnProperty(d)&&S!=null)switch(d){case"value":break;case"multiple":M=S;default:l.hasOwnProperty(d)||De(e,t,d,null,l,S)}for(c in l)if(d=l[c],S=a[c],l.hasOwnProperty(c)&&(d!=null||S!=null))switch(c){case"value":D=d;break;case"defaultValue":y=d;break;case"multiple":g=d;default:d!==S&&De(e,t,c,d,l,S)}t=y,a=g,l=M,D!=null?ta(e,!!a,D,!1):!!l!=!!a&&(t!=null?ta(e,!!a,t,!0):ta(e,!!a,a?[]:"",!1));return;case"textarea":M=D=null;for(y in a)if(c=a[y],a.hasOwnProperty(y)&&c!=null&&!l.hasOwnProperty(y))switch(y){case"value":break;case"children":break;default:De(e,t,y,null,l,c)}for(g in l)if(c=l[g],d=a[g],l.hasOwnProperty(g)&&(c!=null||d!=null))switch(g){case"value":D=c;break;case"defaultValue":M=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(i(91));break;default:c!==d&&De(e,t,g,c,l,d)}Wf(e,D,M);return;case"option":for(var J in a)if(D=a[J],a.hasOwnProperty(J)&&D!=null&&!l.hasOwnProperty(J))switch(J){case"selected":e.selected=!1;break;default:De(e,t,J,null,l,D)}for(S in l)if(D=l[S],M=a[S],l.hasOwnProperty(S)&&D!==M&&(D!=null||M!=null))switch(S){case"selected":e.selected=D&&typeof D!="function"&&typeof D!="symbol";break;default:De(e,t,S,D,l,M)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ie in a)D=a[ie],a.hasOwnProperty(ie)&&D!=null&&!l.hasOwnProperty(ie)&&De(e,t,ie,null,l,D);for(j in l)if(D=l[j],M=a[j],l.hasOwnProperty(j)&&D!==M&&(D!=null||M!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(D!=null)throw Error(i(137,t));break;default:De(e,t,j,D,l,M)}return;default:if(Fo(t)){for(var Ue in a)D=a[Ue],a.hasOwnProperty(Ue)&&D!==void 0&&!l.hasOwnProperty(Ue)&&Lc(e,t,Ue,void 0,l,D);for(z in l)D=l[z],M=a[z],!l.hasOwnProperty(z)||D===M||D===void 0&&M===void 0||Lc(e,t,z,D,l,M);return}}for(var x in a)D=a[x],a.hasOwnProperty(x)&&D!=null&&!l.hasOwnProperty(x)&&De(e,t,x,null,l,D);for(H in l)D=l[H],M=a[H],!l.hasOwnProperty(H)||D===M||D==null&&M==null||De(e,t,H,D,l,M)}function np(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function vw(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var c=a[l],d=c.transferSize,g=c.initiatorType,y=c.duration;if(d&&y&&np(g)){for(g=0,y=c.responseEnd,l+=1;l<a.length;l++){var S=a[l],j=S.startTime;if(j>y)break;var z=S.transferSize,H=S.initiatorType;z&&np(H)&&(S=S.responseEnd,g+=z*(S<y?1:(y-j)/(S-j)))}if(--l,t+=8*(d+g)/(c.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var qc=null,Hc=null;function Ol(e){return e.nodeType===9?e:e.ownerDocument}function sp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ap(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Ic(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Gc=null;function bw(){var e=window.event;return e&&e.type==="popstate"?e===Gc?!1:(Gc=e,!0):(Gc=null,!1)}var ip=typeof setTimeout=="function"?setTimeout:void 0,ww=typeof clearTimeout=="function"?clearTimeout:void 0,rp=typeof Promise=="function"?Promise:void 0,Sw=typeof queueMicrotask=="function"?queueMicrotask:typeof rp<"u"?function(e){return rp.resolve(null).then(e).catch(Ew)}:ip;function Ew(e){setTimeout(function(){throw e})}function rs(e){return e==="head"}function lp(e,t){var a=t,l=0;do{var c=a.nextSibling;if(e.removeChild(a),c&&c.nodeType===8)if(a=c.data,a==="/$"||a==="/&"){if(l===0){e.removeChild(c),Da(t);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Ii(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Ii(a);for(var d=a.firstChild;d;){var g=d.nextSibling,y=d.nodeName;d[ri]||y==="SCRIPT"||y==="STYLE"||y==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=g}}else a==="body"&&Ii(e.ownerDocument.body);a=c}while(a);Da(t)}function op(e,t){var a=e;e=0;do{var l=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=l}while(a)}function Vc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Vc(a),Jo(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Aw(e,t,a,l){for(;e.nodeType===1;){var c=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[ri])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var d=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=en(e.nextSibling),e===null)break}return null}function Tw(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=en(e.nextSibling),e===null))return null;return e}function up(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=en(e.nextSibling),e===null))return null;return e}function Pc(e){return e.data==="$?"||e.data==="$~"}function Yc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Ow(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var l=function(){t(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function en(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Kc=null;function cp(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return en(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function dp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function fp(e,t,a){switch(t=Ol(a),e){case"html":if(e=t.documentElement,!e)throw Error(i(452));return e;case"head":if(e=t.head,!e)throw Error(i(453));return e;case"body":if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function Ii(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Jo(e)}var tn=new Map,hp=new Set;function xl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Bn=K.d;K.d={f:xw,r:Cw,D:Rw,C:jw,L:Nw,m:kw,X:Uw,S:Dw,M:Mw};function xw(){var e=Bn.f(),t=_l();return e||t}function Cw(e){var t=Ws(e);t!==null&&t.tag===5&&t.type==="form"?jm(t):Bn.r(e)}var ja=typeof document>"u"?null:document;function mp(e,t,a){var l=ja;if(l&&typeof t=="string"&&t){var c=Kt(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof a=="string"&&(c+='[crossorigin="'+a+'"]'),hp.has(c)||(hp.add(c),e={rel:e,crossOrigin:a,href:t},l.querySelector(c)===null&&(t=l.createElement("link"),ft(t,"link",e),at(t),l.head.appendChild(t)))}}function Rw(e){Bn.D(e),mp("dns-prefetch",e,null)}function jw(e,t){Bn.C(e,t),mp("preconnect",e,t)}function Nw(e,t,a){Bn.L(e,t,a);var l=ja;if(l&&e&&t){var c='link[rel="preload"][as="'+Kt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(c+='[imagesrcset="'+Kt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(c+='[imagesizes="'+Kt(a.imageSizes)+'"]')):c+='[href="'+Kt(e)+'"]';var d=c;switch(t){case"style":d=Na(e);break;case"script":d=ka(e)}tn.has(d)||(e=b({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),tn.set(d,e),l.querySelector(c)!==null||t==="style"&&l.querySelector(Gi(d))||t==="script"&&l.querySelector(Vi(d))||(t=l.createElement("link"),ft(t,"link",e),at(t),l.head.appendChild(t)))}}function kw(e,t){Bn.m(e,t);var a=ja;if(a&&e){var l=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+Kt(l)+'"][href="'+Kt(e)+'"]',d=c;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=ka(e)}if(!tn.has(d)&&(e=b({rel:"modulepreload",href:e},t),tn.set(d,e),a.querySelector(c)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Vi(d)))return}l=a.createElement("link"),ft(l,"link",e),at(l),a.head.appendChild(l)}}}function Dw(e,t,a){Bn.S(e,t,a);var l=ja;if(l&&e){var c=Fs(l).hoistableStyles,d=Na(e);t=t||"default";var g=c.get(d);if(!g){var y={loading:0,preload:null};if(g=l.querySelector(Gi(d)))y.loading=5;else{e=b({rel:"stylesheet",href:e,"data-precedence":t},a),(a=tn.get(d))&&Xc(e,a);var S=g=l.createElement("link");at(S),ft(S,"link",e),S._p=new Promise(function(j,z){S.onload=j,S.onerror=z}),S.addEventListener("load",function(){y.loading|=1}),S.addEventListener("error",function(){y.loading|=2}),y.loading|=4,Cl(g,t,l)}g={type:"stylesheet",instance:g,count:1,state:y},c.set(d,g)}}}function Uw(e,t){Bn.X(e,t);var a=ja;if(a&&e){var l=Fs(a).hoistableScripts,c=ka(e),d=l.get(c);d||(d=a.querySelector(Vi(c)),d||(e=b({src:e,async:!0},t),(t=tn.get(c))&&Jc(e,t),d=a.createElement("script"),at(d),ft(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(c,d))}}function Mw(e,t){Bn.M(e,t);var a=ja;if(a&&e){var l=Fs(a).hoistableScripts,c=ka(e),d=l.get(c);d||(d=a.querySelector(Vi(c)),d||(e=b({src:e,async:!0,type:"module"},t),(t=tn.get(c))&&Jc(e,t),d=a.createElement("script"),at(d),ft(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(c,d))}}function gp(e,t,a,l){var c=(c=ye.current)?xl(c):null;if(!c)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=Na(a.href),a=Fs(c).hoistableStyles,l=a.get(t),l||(l={type:"style",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Na(a.href);var d=Fs(c).hoistableStyles,g=d.get(e);if(g||(c=c.ownerDocument||c,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,g),(d=c.querySelector(Gi(e)))&&!d._p&&(g.instance=d,g.state.loading=5),tn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},tn.set(e,a),d||zw(c,e,a,g.state))),t&&l===null)throw Error(i(528,""));return g}if(t&&l!==null)throw Error(i(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ka(a),a=Fs(c).hoistableScripts,l=a.get(t),l||(l={type:"script",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Na(e){return'href="'+Kt(e)+'"'}function Gi(e){return'link[rel="stylesheet"]['+e+"]"}function pp(e){return b({},e,{"data-precedence":e.precedence,precedence:null})}function zw(e,t,a,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),ft(t,"link",a),at(t),e.head.appendChild(t))}function ka(e){return'[src="'+Kt(e)+'"]'}function Vi(e){return"script[async]"+e}function yp(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+Kt(a.href)+'"]');if(l)return t.instance=l,at(l),l;var c=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),at(l),ft(l,"style",c),Cl(l,a.precedence,e),t.instance=l;case"stylesheet":c=Na(a.href);var d=e.querySelector(Gi(c));if(d)return t.state.loading|=4,t.instance=d,at(d),d;l=pp(a),(c=tn.get(c))&&Xc(l,c),d=(e.ownerDocument||e).createElement("link"),at(d);var g=d;return g._p=new Promise(function(y,S){g.onload=y,g.onerror=S}),ft(d,"link",l),t.state.loading|=4,Cl(d,a.precedence,e),t.instance=d;case"script":return d=ka(a.src),(c=e.querySelector(Vi(d)))?(t.instance=c,at(c),c):(l=a,(c=tn.get(d))&&(l=b({},a),Jc(l,c)),e=e.ownerDocument||e,c=e.createElement("script"),at(c),ft(c,"link",l),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(i(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,Cl(l,a.precedence,e));return t.instance}function Cl(e,t,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=l.length?l[l.length-1]:null,d=c,g=0;g<l.length;g++){var y=l[g];if(y.dataset.precedence===t)d=y;else if(d!==c)break}d?d.parentNode.insertBefore(e,d.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function Xc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Jc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Rl=null;function _p(e,t,a){if(Rl===null){var l=new Map,c=Rl=new Map;c.set(a,l)}else c=Rl,l=c.get(a),l||(l=new Map,c.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),c=0;c<a.length;c++){var d=a[c];if(!(d[ri]||d[ot]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var g=d.getAttribute(t)||"";g=e+g;var y=l.get(g);y?y.push(d):l.set(g,[d])}}return l}function vp(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function Bw(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function bp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function $w(e,t,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var c=Na(l.href),d=t.querySelector(Gi(c));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=jl.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=d,at(d);return}d=t.ownerDocument||t,l=pp(l),(c=tn.get(c))&&Xc(l,c),d=d.createElement("link"),at(d);var g=d;g._p=new Promise(function(y,S){g.onload=y,g.onerror=S}),ft(d,"link",l),a.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=jl.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var Qc=0;function Lw(e,t){return e.stylesheets&&e.count===0&&kl(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var l=setTimeout(function(){if(e.stylesheets&&kl(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+t);0<e.imgBytes&&Qc===0&&(Qc=62500*vw());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&kl(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>Qc?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(c)}}:null}function jl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)kl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Nl=null;function kl(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Nl=new Map,t.forEach(qw,e),Nl=null,jl.call(e))}function qw(e,t){if(!(t.state.loading&4)){var a=Nl.get(e);if(a)var l=a.get(null);else{a=new Map,Nl.set(e,a);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<c.length;d++){var g=c[d];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(a.set(g.dataset.precedence,g),l=g)}l&&a.set(null,l)}c=t.instance,g=c.getAttribute("data-precedence"),d=a.get(g)||l,d===l&&a.set(null,c),a.set(g,c),this.count++,l=jl.bind(this),c.addEventListener("load",l),c.addEventListener("error",l),d?d.parentNode.insertBefore(c,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var Pi={$$typeof:B,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function Hw(e,t,a,l,c,d,g,y,S){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Po(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Po(0),this.hiddenUpdates=Po(null),this.identifierPrefix=l,this.onUncaughtError=c,this.onCaughtError=d,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function wp(e,t,a,l,c,d,g,y,S,j,z,H){return e=new Hw(e,t,a,g,S,j,z,H,y),t=1,d===!0&&(t|=24),d=Ut(3,null,null,t),e.current=d,d.stateNode=e,t=Ru(),t.refCount++,e.pooledCache=t,t.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:t},Du(d),e}function Sp(e){return e?(e=ua,e):ua}function Ep(e,t,a,l,c,d){c=Sp(c),l.context===null?l.context=c:l.pendingContext=c,l=Jn(t),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Qn(e,l,t),a!==null&&(Ct(a,e,t),Ei(a,e,t))}function Ap(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Zc(e,t){Ap(e,t),(e=e.alternate)&&Ap(e,t)}function Tp(e){if(e.tag===13||e.tag===31){var t=As(e,67108864);t!==null&&Ct(t,e,67108864),Zc(e,67108864)}}function Op(e){if(e.tag===13||e.tag===31){var t=Lt();t=Yo(t);var a=As(e,t);a!==null&&Ct(a,e,t),Zc(e,t)}}var Dl=!0;function Iw(e,t,a,l){var c=$.T;$.T=null;var d=K.p;try{K.p=2,Wc(e,t,a,l)}finally{K.p=d,$.T=c}}function Gw(e,t,a,l){var c=$.T;$.T=null;var d=K.p;try{K.p=8,Wc(e,t,a,l)}finally{K.p=d,$.T=c}}function Wc(e,t,a,l){if(Dl){var c=Fc(l);if(c===null)$c(e,t,l,Ul,a),Cp(e,l);else if(Pw(c,e,t,a,l))l.stopPropagation();else if(Cp(e,l),t&4&&-1<Vw.indexOf(e)){for(;c!==null;){var d=Ws(c);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var g=vs(d.pendingLanes);if(g!==0){var y=d;for(y.pendingLanes|=2,y.entangledLanes|=2;g;){var S=1<<31-kt(g);y.entanglements[1]|=S,g&=~S}pn(d),(Te&6)===0&&(pl=jt()+500,Li(0))}}break;case 31:case 13:y=As(d,2),y!==null&&Ct(y,d,2),_l(),Zc(d,2)}if(d=Fc(l),d===null&&$c(e,t,l,Ul,a),d===c)break;c=d}c!==null&&l.stopPropagation()}else $c(e,t,l,null,a)}}function Fc(e){return e=tu(e),ed(e)}var Ul=null;function ed(e){if(Ul=null,e=Zs(e),e!==null){var t=u(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=f(t),e!==null)return e;e=null}else if(a===31){if(e=h(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Ul=e,null}function xp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Rb()){case Mf:return 2;case zf:return 8;case Er:case jb:return 32;case Bf:return 268435456;default:return 32}default:return 32}}var td=!1,ls=null,os=null,us=null,Yi=new Map,Ki=new Map,cs=[],Vw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Cp(e,t){switch(e){case"focusin":case"focusout":ls=null;break;case"dragenter":case"dragleave":os=null;break;case"mouseover":case"mouseout":us=null;break;case"pointerover":case"pointerout":Yi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ki.delete(t.pointerId)}}function Xi(e,t,a,l,c,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[c]},t!==null&&(t=Ws(t),t!==null&&Tp(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function Pw(e,t,a,l,c){switch(t){case"focusin":return ls=Xi(ls,e,t,a,l,c),!0;case"dragenter":return os=Xi(os,e,t,a,l,c),!0;case"mouseover":return us=Xi(us,e,t,a,l,c),!0;case"pointerover":var d=c.pointerId;return Yi.set(d,Xi(Yi.get(d)||null,e,t,a,l,c)),!0;case"gotpointercapture":return d=c.pointerId,Ki.set(d,Xi(Ki.get(d)||null,e,t,a,l,c)),!0}return!1}function Rp(e){var t=Zs(e.target);if(t!==null){var a=u(t);if(a!==null){if(t=a.tag,t===13){if(t=f(a),t!==null){e.blockedOn=t,Gf(e.priority,function(){Op(a)});return}}else if(t===31){if(t=h(a),t!==null){e.blockedOn=t,Gf(e.priority,function(){Op(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ml(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Fc(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);eu=l,a.target.dispatchEvent(l),eu=null}else return t=Ws(a),t!==null&&Tp(t),e.blockedOn=a,!1;t.shift()}return!0}function jp(e,t,a){Ml(e)&&a.delete(t)}function Yw(){td=!1,ls!==null&&Ml(ls)&&(ls=null),os!==null&&Ml(os)&&(os=null),us!==null&&Ml(us)&&(us=null),Yi.forEach(jp),Ki.forEach(jp)}function zl(e,t){e.blockedOn===t&&(e.blockedOn=null,td||(td=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Yw)))}var Bl=null;function Np(e){Bl!==e&&(Bl=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Bl===e&&(Bl=null);for(var t=0;t<e.length;t+=3){var a=e[t],l=e[t+1],c=e[t+2];if(typeof l!="function"){if(ed(l||a)===null)continue;break}var d=Ws(a);d!==null&&(e.splice(t,3),t-=3,Fu(d,{pending:!0,data:c,method:a.method,action:l},l,c))}}))}function Da(e){function t(S){return zl(S,e)}ls!==null&&zl(ls,e),os!==null&&zl(os,e),us!==null&&zl(us,e),Yi.forEach(t),Ki.forEach(t);for(var a=0;a<cs.length;a++){var l=cs[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<cs.length&&(a=cs[0],a.blockedOn===null);)Rp(a),a.blockedOn===null&&cs.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var c=a[l],d=a[l+1],g=c[St]||null;if(typeof d=="function")g||Np(a);else if(g){var y=null;if(d&&d.hasAttribute("formAction")){if(c=d,g=d[St]||null)y=g.formAction;else if(ed(c)!==null)continue}else y=g.action;typeof y=="function"?a[l+1]=y:(a.splice(l,3),l-=3),Np(a)}}}function kp(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(g){return c=g})},focusReset:"manual",scroll:"manual"})}function t(){c!==null&&(c(),c=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),c!==null&&(c(),c=null)}}}function nd(e){this._internalRoot=e}$l.prototype.render=nd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var a=t.current,l=Lt();Ep(a,l,e,t,null,null)},$l.prototype.unmount=nd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ep(e.current,2,null,e,null,null),_l(),t[Qs]=null}};function $l(e){this._internalRoot=e}$l.prototype.unstable_scheduleHydration=function(e){if(e){var t=If();e={blockedOn:null,target:e,priority:t};for(var a=0;a<cs.length&&t!==0&&t<cs[a].priority;a++);cs.splice(a,0,e),a===0&&Rp(e)}};var Dp=n.version;if(Dp!=="19.2.0")throw Error(i(527,Dp,"19.2.0"));K.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=m(t),e=e!==null?v(e):null,e=e===null?null:e.stateNode,e};var Kw={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ll=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ll.isDisabled&&Ll.supportsFiber)try{si=Ll.inject(Kw),Nt=Ll}catch{}}return Qi.createRoot=function(e,t){if(!o(e))throw Error(i(299));var a=!1,l="",c=qm,d=Hm,g=Im;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(d=t.onCaughtError),t.onRecoverableError!==void 0&&(g=t.onRecoverableError)),t=wp(e,1,!1,null,null,a,l,null,c,d,g,kp),e[Qs]=t.current,Bc(e),new nd(t)},Qi.hydrateRoot=function(e,t,a){if(!o(e))throw Error(i(299));var l=!1,c="",d=qm,g=Hm,y=Im,S=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(g=a.onCaughtError),a.onRecoverableError!==void 0&&(y=a.onRecoverableError),a.formState!==void 0&&(S=a.formState)),t=wp(e,1,!0,t,a??null,l,c,S,d,g,y,kp),t.context=Sp(null),a=t.current,l=Lt(),l=Yo(l),c=Jn(l),c.callback=null,Qn(a,c,l),a=l,t.current.lanes=a,ii(t,a),pn(t),e[Qs]=t.current,Bc(e),new $l(t)},Qi.version="19.2.0",Qi}var Gp;function iS(){if(Gp)return id.exports;Gp=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(n){console.error(n)}}return r(),id.exports=aS(),id.exports}var rS=iS();function lS(){return w.jsx("header",{className:"header-banner",children:w.jsx("h1",{className:"header-title",children:"SpeakEasy"})})}var Od=function(r,n){return Od=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,i){s.__proto__=i}||function(s,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(s[o]=i[o])},Od(r,n)};function e_(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");Od(r,n);function s(){this.constructor=r}r.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}var fo=function(){return fo=Object.assign||function(n){for(var s,i=1,o=arguments.length;i<o;i++){s=arguments[i];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(n[u]=s[u])}return n},fo.apply(this,arguments)};function Za(r,n){var s={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&n.indexOf(i)<0&&(s[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)n.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(s[i[o]]=r[i[o]]);return s}function t_(r,n,s,i){var o=arguments.length,u=o<3?n:i===null?i=Object.getOwnPropertyDescriptor(n,s):i,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(r,n,s,i);else for(var h=r.length-1;h>=0;h--)(f=r[h])&&(u=(o<3?f(u):o>3?f(n,s,u):f(n,s))||u);return o>3&&u&&Object.defineProperty(n,s,u),u}function n_(r,n){return function(s,i){n(s,i,r)}}function s_(r,n,s,i,o,u){function f(q){if(q!==void 0&&typeof q!="function")throw new TypeError("Function expected");return q}for(var h=i.kind,p=h==="getter"?"get":h==="setter"?"set":"value",m=!n&&r?i.static?r:r.prototype:null,v=n||(m?Object.getOwnPropertyDescriptor(m,i.name):{}),b,E=!1,_=s.length-1;_>=0;_--){var C={};for(var O in i)C[O]=O==="access"?{}:i[O];for(var O in i.access)C.access[O]=i.access[O];C.addInitializer=function(q){if(E)throw new TypeError("Cannot add initializers after decoration has completed");u.push(f(q||null))};var N=(0,s[_])(h==="accessor"?{get:v.get,set:v.set}:v[p],C);if(h==="accessor"){if(N===void 0)continue;if(N===null||typeof N!="object")throw new TypeError("Object expected");(b=f(N.get))&&(v.get=b),(b=f(N.set))&&(v.set=b),(b=f(N.init))&&o.unshift(b)}else(b=f(N))&&(h==="field"?o.unshift(b):v[p]=b)}m&&Object.defineProperty(m,i.name,v),E=!0}function a_(r,n,s){for(var i=arguments.length>2,o=0;o<n.length;o++)s=i?n[o].call(r,s):n[o].call(r);return i?s:void 0}function i_(r){return typeof r=="symbol"?r:"".concat(r)}function r_(r,n,s){return typeof n=="symbol"&&(n=n.description?"[".concat(n.description,"]"):""),Object.defineProperty(r,"name",{configurable:!0,value:s?"".concat(s," ",n):n})}function l_(r,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,n)}function F(r,n,s,i){function o(u){return u instanceof s?u:new s(function(f){f(u)})}return new(s||(s=Promise))(function(u,f){function h(v){try{m(i.next(v))}catch(b){f(b)}}function p(v){try{m(i.throw(v))}catch(b){f(b)}}function m(v){v.done?u(v.value):o(v.value).then(h,p)}m((i=i.apply(r,n||[])).next())})}function o_(r,n){var s={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,o,u,f=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return f.next=h(0),f.throw=h(1),f.return=h(2),typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function h(m){return function(v){return p([m,v])}}function p(m){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,m[0]&&(s=0)),s;)try{if(i=1,o&&(u=m[0]&2?o.return:m[0]?o.throw||((u=o.return)&&u.call(o),0):o.next)&&!(u=u.call(o,m[1])).done)return u;switch(o=0,u&&(m=[m[0]&2,u.value]),m[0]){case 0:case 1:u=m;break;case 4:return s.label++,{value:m[1],done:!1};case 5:s.label++,o=m[1],m=[0];continue;case 7:m=s.ops.pop(),s.trys.pop();continue;default:if(u=s.trys,!(u=u.length>0&&u[u.length-1])&&(m[0]===6||m[0]===2)){s=0;continue}if(m[0]===3&&(!u||m[1]>u[0]&&m[1]<u[3])){s.label=m[1];break}if(m[0]===6&&s.label<u[1]){s.label=u[1],u=m;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(m);break}u[2]&&s.ops.pop(),s.trys.pop();continue}m=n.call(r,s)}catch(v){m=[6,v],o=0}finally{i=u=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}var Oo=Object.create?(function(r,n,s,i){i===void 0&&(i=s);var o=Object.getOwnPropertyDescriptor(n,s);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[s]}}),Object.defineProperty(r,i,o)}):(function(r,n,s,i){i===void 0&&(i=s),r[i]=n[s]});function u_(r,n){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(n,s)&&Oo(n,r,s)}function ho(r){var n=typeof Symbol=="function"&&Symbol.iterator,s=n&&r[n],i=0;if(s)return s.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function ef(r,n){var s=typeof Symbol=="function"&&r[Symbol.iterator];if(!s)return r;var i=s.call(r),o,u=[],f;try{for(;(n===void 0||n-- >0)&&!(o=i.next()).done;)u.push(o.value)}catch(h){f={error:h}}finally{try{o&&!o.done&&(s=i.return)&&s.call(i)}finally{if(f)throw f.error}}return u}function c_(){for(var r=[],n=0;n<arguments.length;n++)r=r.concat(ef(arguments[n]));return r}function d_(){for(var r=0,n=0,s=arguments.length;n<s;n++)r+=arguments[n].length;for(var i=Array(r),o=0,n=0;n<s;n++)for(var u=arguments[n],f=0,h=u.length;f<h;f++,o++)i[o]=u[f];return i}function f_(r,n,s){if(s||arguments.length===2)for(var i=0,o=n.length,u;i<o;i++)(u||!(i in n))&&(u||(u=Array.prototype.slice.call(n,0,i)),u[i]=n[i]);return r.concat(u||Array.prototype.slice.call(n))}function Ja(r){return this instanceof Ja?(this.v=r,this):new Ja(r)}function h_(r,n,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=s.apply(r,n||[]),o,u=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",f),o[Symbol.asyncIterator]=function(){return this},o;function f(_){return function(C){return Promise.resolve(C).then(_,b)}}function h(_,C){i[_]&&(o[_]=function(O){return new Promise(function(N,q){u.push([_,O,N,q])>1||p(_,O)})},C&&(o[_]=C(o[_])))}function p(_,C){try{m(i[_](C))}catch(O){E(u[0][3],O)}}function m(_){_.value instanceof Ja?Promise.resolve(_.value.v).then(v,b):E(u[0][2],_)}function v(_){p("next",_)}function b(_){p("throw",_)}function E(_,C){_(C),u.shift(),u.length&&p(u[0][0],u[0][1])}}function m_(r){var n,s;return n={},i("next"),i("throw",function(o){throw o}),i("return"),n[Symbol.iterator]=function(){return this},n;function i(o,u){n[o]=r[o]?function(f){return(s=!s)?{value:Ja(r[o](f)),done:!1}:u?u(f):f}:u}}function g_(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r[Symbol.asyncIterator],s;return n?n.call(r):(r=typeof ho=="function"?ho(r):r[Symbol.iterator](),s={},i("next"),i("throw"),i("return"),s[Symbol.asyncIterator]=function(){return this},s);function i(u){s[u]=r[u]&&function(f){return new Promise(function(h,p){f=r[u](f),o(h,p,f.done,f.value)})}}function o(u,f,h,p){Promise.resolve(p).then(function(m){u({value:m,done:h})},f)}}function p_(r,n){return Object.defineProperty?Object.defineProperty(r,"raw",{value:n}):r.raw=n,r}var oS=Object.create?(function(r,n){Object.defineProperty(r,"default",{enumerable:!0,value:n})}):function(r,n){r.default=n},xd=function(r){return xd=Object.getOwnPropertyNames||function(n){var s=[];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(s[s.length]=i);return s},xd(r)};function y_(r){if(r&&r.__esModule)return r;var n={};if(r!=null)for(var s=xd(r),i=0;i<s.length;i++)s[i]!=="default"&&Oo(n,r,s[i]);return oS(n,r),n}function __(r){return r&&r.__esModule?r:{default:r}}function v_(r,n,s,i){if(s==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?r!==n||!i:!n.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?i:s==="a"?i.call(r):i?i.value:n.get(r)}function b_(r,n,s,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?r!==n||!o:!n.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(r,s):o?o.value=s:n.set(r,s),s}function w_(r,n){if(n===null||typeof n!="object"&&typeof n!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof r=="function"?n===r:r.has(n)}function S_(r,n,s){if(n!=null){if(typeof n!="object"&&typeof n!="function")throw new TypeError("Object expected.");var i,o;if(s){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=n[Symbol.asyncDispose]}if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=n[Symbol.dispose],s&&(o=i)}if(typeof i!="function")throw new TypeError("Object not disposable.");o&&(i=function(){try{o.call(this)}catch(u){return Promise.reject(u)}}),r.stack.push({value:n,dispose:i,async:s})}else s&&r.stack.push({async:!0});return n}var uS=typeof SuppressedError=="function"?SuppressedError:function(r,n,s){var i=new Error(s);return i.name="SuppressedError",i.error=r,i.suppressed=n,i};function E_(r){function n(u){r.error=r.hasError?new uS(u,r.error,"An error was suppressed during disposal."):u,r.hasError=!0}var s,i=0;function o(){for(;s=r.stack.pop();)try{if(!s.async&&i===1)return i=0,r.stack.push(s),Promise.resolve().then(o);if(s.dispose){var u=s.dispose.call(s.value);if(s.async)return i|=2,Promise.resolve(u).then(o,function(f){return n(f),o()})}else i|=1}catch(f){n(f)}if(i===1)return r.hasError?Promise.reject(r.error):Promise.resolve();if(r.hasError)throw r.error}return o()}function A_(r,n){return typeof r=="string"&&/^\.\.?\//.test(r)?r.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(s,i,o,u,f){return i?n?".jsx":".js":o&&(!u||!f)?s:o+u+"."+f.toLowerCase()+"js"}):r}const cS={__extends:e_,__assign:fo,__rest:Za,__decorate:t_,__param:n_,__esDecorate:s_,__runInitializers:a_,__propKey:i_,__setFunctionName:r_,__metadata:l_,__awaiter:F,__generator:o_,__createBinding:Oo,__exportStar:u_,__values:ho,__read:ef,__spread:c_,__spreadArrays:d_,__spreadArray:f_,__await:Ja,__asyncGenerator:h_,__asyncDelegator:m_,__asyncValues:g_,__makeTemplateObject:p_,__importStar:y_,__importDefault:__,__classPrivateFieldGet:v_,__classPrivateFieldSet:b_,__classPrivateFieldIn:w_,__addDisposableResource:S_,__disposeResources:E_,__rewriteRelativeImportExtension:A_},dS=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:S_,get __assign(){return fo},__asyncDelegator:m_,__asyncGenerator:h_,__asyncValues:g_,__await:Ja,__awaiter:F,__classPrivateFieldGet:v_,__classPrivateFieldIn:w_,__classPrivateFieldSet:b_,__createBinding:Oo,__decorate:t_,__disposeResources:E_,__esDecorate:s_,__exportStar:u_,__extends:e_,__generator:o_,__importDefault:__,__importStar:y_,__makeTemplateObject:p_,__metadata:l_,__param:n_,__propKey:i_,__read:ef,__rest:Za,__rewriteRelativeImportExtension:A_,__runInitializers:a_,__setFunctionName:r_,__spread:c_,__spreadArray:f_,__spreadArrays:d_,__values:ho,default:cS},Symbol.toStringTag,{value:"Module"})),fS="modulepreload",hS=function(r){return"/"+r},Vp={},Wa=function(n,s,i){let o=Promise.resolve();if(s&&s.length>0){let m=function(v){return Promise.all(v.map(b=>Promise.resolve(b).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};var f=m;document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),p=h?.nonce||h?.getAttribute("nonce");o=m(s.map(v=>{if(v=hS(v),v in Vp)return;Vp[v]=!0;const b=v.endsWith(".css"),E=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${E}`))return;const _=document.createElement("link");if(_.rel=b?"stylesheet":fS,b||(_.as="script"),_.crossOrigin="",_.href=v,p&&_.setAttribute("nonce",p),document.head.appendChild(_),b)return new Promise((C,O)=>{_.addEventListener("load",C),_.addEventListener("error",()=>O(new Error(`Unable to preload CSS for ${v}`)))})}))}function u(h){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=h,window.dispatchEvent(p),!p.defaultPrevented)throw h}return o.then(h=>{for(const p of h||[])p.status==="rejected"&&u(p.reason);return n().catch(u)})},mS=r=>{let n;return r?n=r:typeof fetch>"u"?n=(...s)=>Wa(async()=>{const{default:i}=await Promise.resolve().then(()=>Js);return{default:i}},void 0).then(({default:i})=>i(...s)):n=fetch,(...s)=>n(...s)};class tf extends Error{constructor(n,s="FunctionsError",i){super(n),this.name=s,this.context=i}}class Pp extends tf{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class Yp extends tf{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class Kp extends tf{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var Cd;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(Cd||(Cd={}));class gS{constructor(n,{headers:s={},customFetch:i,region:o=Cd.Any}={}){this.url=n,this.headers=s,this.region=o,this.fetch=mS(i)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return F(this,arguments,void 0,function*(s,i={}){var o;try{const{headers:u,method:f,body:h,signal:p}=i;let m={},{region:v}=i;v||(v=this.region);const b=new URL(`${this.url}/${s}`);v&&v!=="any"&&(m["x-region"]=v,b.searchParams.set("forceFunctionRegion",v));let E;h&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)?typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",E=h):typeof h=="string"?(m["Content-Type"]="text/plain",E=h):typeof FormData<"u"&&h instanceof FormData?E=h:(m["Content-Type"]="application/json",E=JSON.stringify(h)):E=h;const _=yield this.fetch(b.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),u),body:E,signal:p}).catch(q=>{throw q.name==="AbortError"?q:new Pp(q)}),C=_.headers.get("x-relay-error");if(C&&C==="true")throw new Yp(_);if(!_.ok)throw new Kp(_);let O=((o=_.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),N;return O==="application/json"?N=yield _.json():O==="application/octet-stream"||O==="application/pdf"?N=yield _.blob():O==="text/event-stream"?N=_:O==="multipart/form-data"?N=yield _.formData():N=yield _.text(),{data:N,error:null,response:_}}catch(u){return u instanceof Error&&u.name==="AbortError"?{data:null,error:new Pp(u)}:{data:null,error:u,response:u instanceof Kp||u instanceof Yp?u.context:void 0}}})}}var yt={};const Fa=Fy(dS);var ql={},Hl={},Il={},Gl={},Vl={},pS=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Qa=pS();const yS=Qa.fetch,T_=Qa.fetch.bind(Qa),O_=Qa.Headers,_S=Qa.Request,vS=Qa.Response,Js=Object.freeze(Object.defineProperty({__proto__:null,Headers:O_,Request:_S,Response:vS,default:T_,fetch:yS},Symbol.toStringTag,{value:"Module"})),bS=Fy(Js);var Pl={},Xp;function x_(){if(Xp)return Pl;Xp=1,Object.defineProperty(Pl,"__esModule",{value:!0});class r extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return Pl.default=r,Pl}var Jp;function C_(){if(Jp)return Vl;Jp=1,Object.defineProperty(Vl,"__esModule",{value:!0});const r=Fa,n=r.__importDefault(bS),s=r.__importDefault(x_());class i{constructor(u){var f,h;this.shouldThrowOnError=!1,this.method=u.method,this.url=u.url,this.headers=new Headers(u.headers),this.schema=u.schema,this.body=u.body,this.shouldThrowOnError=(f=u.shouldThrowOnError)!==null&&f!==void 0?f:!1,this.signal=u.signal,this.isMaybeSingle=(h=u.isMaybeSingle)!==null&&h!==void 0?h:!1,u.fetch?this.fetch=u.fetch:typeof fetch>"u"?this.fetch=n.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(u,f){return this.headers=new Headers(this.headers),this.headers.set(u,f),this}then(u,f){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const h=this.fetch;let p=h(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var v,b,E,_;let C=null,O=null,N=null,q=m.status,U=m.statusText;if(m.ok){if(this.method!=="HEAD"){const Y=await m.text();Y===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((v=this.headers.get("Accept"))===null||v===void 0)&&v.includes("application/vnd.pgrst.plan+text"))?O=Y:O=JSON.parse(Y))}const G=(b=this.headers.get("Prefer"))===null||b===void 0?void 0:b.match(/count=(exact|planned|estimated)/),ee=(E=m.headers.get("content-range"))===null||E===void 0?void 0:E.split("/");G&&ee&&ee.length>1&&(N=parseInt(ee[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(O)&&(O.length>1?(C={code:"PGRST116",details:`Results contain ${O.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},O=null,N=null,q=406,U="Not Acceptable"):O.length===1?O=O[0]:O=null)}else{const G=await m.text();try{C=JSON.parse(G),Array.isArray(C)&&m.status===404&&(O=[],C=null,q=200,U="OK")}catch{m.status===404&&G===""?(q=204,U="No Content"):C={message:G}}if(C&&this.isMaybeSingle&&(!((_=C?.details)===null||_===void 0)&&_.includes("0 rows"))&&(C=null,q=200,U="OK"),C&&this.shouldThrowOnError)throw new s.default(C)}return{error:C,data:O,count:N,status:q,statusText:U}});return this.shouldThrowOnError||(p=p.catch(m=>{var v,b,E;return{error:{message:`${(v=m?.name)!==null&&v!==void 0?v:"FetchError"}: ${m?.message}`,details:`${(b=m?.stack)!==null&&b!==void 0?b:""}`,hint:"",code:`${(E=m?.code)!==null&&E!==void 0?E:""}`},data:null,count:null,status:0,statusText:""}})),p.then(u,f)}returns(){return this}overrideTypes(){return this}}return Vl.default=i,Vl}var Qp;function R_(){if(Qp)return Gl;Qp=1,Object.defineProperty(Gl,"__esModule",{value:!0});const n=Fa.__importDefault(C_());class s extends n.default{select(o){let u=!1;const f=(o??"*").split("").map(h=>/\s/.test(h)&&!u?"":(h==='"'&&(u=!u),h)).join("");return this.url.searchParams.set("select",f),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:u=!0,nullsFirst:f,foreignTable:h,referencedTable:p=h}={}){const m=p?`${p}.order`:"order",v=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${v?`${v},`:""}${o}.${u?"asc":"desc"}${f===void 0?"":f?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:u,referencedTable:f=u}={}){const h=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(h,`${o}`),this}range(o,u,{foreignTable:f,referencedTable:h=f}={}){const p=typeof h>"u"?"offset":`${h}.offset`,m=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(p,`${o}`),this.url.searchParams.set(m,`${u-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:u=!1,settings:f=!1,buffers:h=!1,wal:p=!1,format:m="text"}={}){var v;const b=[o?"analyze":null,u?"verbose":null,f?"settings":null,h?"buffers":null,p?"wal":null].filter(Boolean).join("|"),E=(v=this.headers.get("Accept"))!==null&&v!==void 0?v:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${E}"; options=${b};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}}return Gl.default=s,Gl}var Zp;function nf(){if(Zp)return Il;Zp=1,Object.defineProperty(Il,"__esModule",{value:!0});const n=Fa.__importDefault(R_()),s=new RegExp("[,()]");class i extends n.default{eq(u,f){return this.url.searchParams.append(u,`eq.${f}`),this}neq(u,f){return this.url.searchParams.append(u,`neq.${f}`),this}gt(u,f){return this.url.searchParams.append(u,`gt.${f}`),this}gte(u,f){return this.url.searchParams.append(u,`gte.${f}`),this}lt(u,f){return this.url.searchParams.append(u,`lt.${f}`),this}lte(u,f){return this.url.searchParams.append(u,`lte.${f}`),this}like(u,f){return this.url.searchParams.append(u,`like.${f}`),this}likeAllOf(u,f){return this.url.searchParams.append(u,`like(all).{${f.join(",")}}`),this}likeAnyOf(u,f){return this.url.searchParams.append(u,`like(any).{${f.join(",")}}`),this}ilike(u,f){return this.url.searchParams.append(u,`ilike.${f}`),this}ilikeAllOf(u,f){return this.url.searchParams.append(u,`ilike(all).{${f.join(",")}}`),this}ilikeAnyOf(u,f){return this.url.searchParams.append(u,`ilike(any).{${f.join(",")}}`),this}is(u,f){return this.url.searchParams.append(u,`is.${f}`),this}in(u,f){const h=Array.from(new Set(f)).map(p=>typeof p=="string"&&s.test(p)?`"${p}"`:`${p}`).join(",");return this.url.searchParams.append(u,`in.(${h})`),this}contains(u,f){return typeof f=="string"?this.url.searchParams.append(u,`cs.${f}`):Array.isArray(f)?this.url.searchParams.append(u,`cs.{${f.join(",")}}`):this.url.searchParams.append(u,`cs.${JSON.stringify(f)}`),this}containedBy(u,f){return typeof f=="string"?this.url.searchParams.append(u,`cd.${f}`):Array.isArray(f)?this.url.searchParams.append(u,`cd.{${f.join(",")}}`):this.url.searchParams.append(u,`cd.${JSON.stringify(f)}`),this}rangeGt(u,f){return this.url.searchParams.append(u,`sr.${f}`),this}rangeGte(u,f){return this.url.searchParams.append(u,`nxl.${f}`),this}rangeLt(u,f){return this.url.searchParams.append(u,`sl.${f}`),this}rangeLte(u,f){return this.url.searchParams.append(u,`nxr.${f}`),this}rangeAdjacent(u,f){return this.url.searchParams.append(u,`adj.${f}`),this}overlaps(u,f){return typeof f=="string"?this.url.searchParams.append(u,`ov.${f}`):this.url.searchParams.append(u,`ov.{${f.join(",")}}`),this}textSearch(u,f,{config:h,type:p}={}){let m="";p==="plain"?m="pl":p==="phrase"?m="ph":p==="websearch"&&(m="w");const v=h===void 0?"":`(${h})`;return this.url.searchParams.append(u,`${m}fts${v}.${f}`),this}match(u){return Object.entries(u).forEach(([f,h])=>{this.url.searchParams.append(f,`eq.${h}`)}),this}not(u,f,h){return this.url.searchParams.append(u,`not.${f}.${h}`),this}or(u,{foreignTable:f,referencedTable:h=f}={}){const p=h?`${h}.or`:"or";return this.url.searchParams.append(p,`(${u})`),this}filter(u,f,h){return this.url.searchParams.append(u,`${f}.${h}`),this}}return Il.default=i,Il}var Wp;function j_(){if(Wp)return Hl;Wp=1,Object.defineProperty(Hl,"__esModule",{value:!0});const n=Fa.__importDefault(nf());class s{constructor(o,{headers:u={},schema:f,fetch:h}){this.url=o,this.headers=new Headers(u),this.schema=f,this.fetch=h}select(o,u){const{head:f=!1,count:h}=u??{},p=f?"HEAD":"GET";let m=!1;const v=(o??"*").split("").map(b=>/\s/.test(b)&&!m?"":(b==='"'&&(m=!m),b)).join("");return this.url.searchParams.set("select",v),h&&this.headers.append("Prefer",`count=${h}`),new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:u,defaultToNull:f=!0}={}){var h;const p="POST";if(u&&this.headers.append("Prefer",`count=${u}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const m=o.reduce((v,b)=>v.concat(Object.keys(b)),[]);if(m.length>0){const v=[...new Set(m)].map(b=>`"${b}"`);this.url.searchParams.set("columns",v.join(","))}}return new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}upsert(o,{onConflict:u,ignoreDuplicates:f=!1,count:h,defaultToNull:p=!0}={}){var m;const v="POST";if(this.headers.append("Prefer",`resolution=${f?"ignore":"merge"}-duplicates`),u!==void 0&&this.url.searchParams.set("on_conflict",u),h&&this.headers.append("Prefer",`count=${h}`),p||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const b=o.reduce((E,_)=>E.concat(Object.keys(_)),[]);if(b.length>0){const E=[...new Set(b)].map(_=>`"${_}"`);this.url.searchParams.set("columns",E.join(","))}}return new n.default({method:v,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(o,{count:u}={}){var f;const h="PATCH";return u&&this.headers.append("Prefer",`count=${u}`),new n.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}delete({count:o}={}){var u;const f="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new n.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return Hl.default=s,Hl}var Fp;function wS(){if(Fp)return ql;Fp=1,Object.defineProperty(ql,"__esModule",{value:!0});const r=Fa,n=r.__importDefault(j_()),s=r.__importDefault(nf());class i{constructor(u,{headers:f={},schema:h,fetch:p}={}){this.url=u,this.headers=new Headers(f),this.schemaName=h,this.fetch=p}from(u){const f=new URL(`${this.url}/${u}`);return new n.default(f,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new i(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,f={},{head:h=!1,get:p=!1,count:m}={}){var v;let b;const E=new URL(`${this.url}/rpc/${u}`);let _;h||p?(b=h?"HEAD":"GET",Object.entries(f).filter(([O,N])=>N!==void 0).map(([O,N])=>[O,Array.isArray(N)?`{${N.join(",")}}`:`${N}`]).forEach(([O,N])=>{E.searchParams.append(O,N)})):(b="POST",_=f);const C=new Headers(this.headers);return m&&C.set("Prefer",`count=${m}`),new s.default({method:b,url:E,headers:C,schema:this.schemaName,body:_,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}}return ql.default=i,ql}var ey;function SS(){if(ey)return yt;ey=1,Object.defineProperty(yt,"__esModule",{value:!0}),yt.PostgrestError=yt.PostgrestBuilder=yt.PostgrestTransformBuilder=yt.PostgrestFilterBuilder=yt.PostgrestQueryBuilder=yt.PostgrestClient=void 0;const r=Fa,n=r.__importDefault(wS());yt.PostgrestClient=n.default;const s=r.__importDefault(j_());yt.PostgrestQueryBuilder=s.default;const i=r.__importDefault(nf());yt.PostgrestFilterBuilder=i.default;const o=r.__importDefault(R_());yt.PostgrestTransformBuilder=o.default;const u=r.__importDefault(C_());yt.PostgrestBuilder=u.default;const f=r.__importDefault(x_());return yt.PostgrestError=f.default,yt.default={PostgrestClient:n.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:u.default,PostgrestError:f.default},yt}var N_=SS();const k_=Qw(N_),ES=Jw({__proto__:null,default:k_},[N_]),{PostgrestClient:AS,PostgrestQueryBuilder:SO,PostgrestFilterBuilder:EO,PostgrestTransformBuilder:AO,PostgrestBuilder:TO,PostgrestError:OO}=k_||ES;class TS{static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const s=process.versions;if(s&&s.node){const i=s.node,o=parseInt(i.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let s=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(s+=`

Suggested solution: ${n.workaround}`),new Error(s)}static createWebSocket(n,s){const i=this.getWebSocketConstructor();return new i(n,s)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const OS="2.77.0",xS=`realtime-js/${OS}`,CS="1.0.0",Rd=1e4,RS=1e3,jS=100;var or;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(or||(or={}));var nt;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(nt||(nt={}));var fn;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(fn||(fn={}));var jd;(function(r){r.websocket="websocket"})(jd||(jd={}));var Hs;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(Hs||(Hs={}));class NS{constructor(){this.HEADER_LENGTH=1}decode(n,s){return n.constructor===ArrayBuffer?s(this._binaryDecode(n)):s(typeof n=="string"?JSON.parse(n):{})}_binaryDecode(n){const s=new DataView(n),i=new TextDecoder;return this._decodeBroadcast(n,s,i)}_decodeBroadcast(n,s,i){const o=s.getUint8(1),u=s.getUint8(2);let f=this.HEADER_LENGTH+2;const h=i.decode(n.slice(f,f+o));f=f+o;const p=i.decode(n.slice(f,f+u));f=f+u;const m=JSON.parse(i.decode(n.slice(f,n.byteLength)));return{ref:null,topic:h,event:p,payload:m}}}class D_{constructor(n,s){this.callback=n,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var $e;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})($e||($e={}));const ty=(r,n,s={})=>{var i;const o=(i=s.skipTypes)!==null&&i!==void 0?i:[];return n?Object.keys(n).reduce((u,f)=>(u[f]=kS(f,r,n,o),u),{}):{}},kS=(r,n,s,i)=>{const o=n.find(h=>h.name===r),u=o?.type,f=s[r];return u&&!i.includes(u)?U_(u,f):Nd(f)},U_=(r,n)=>{if(r.charAt(0)==="_"){const s=r.slice(1,r.length);return zS(n,s)}switch(r){case $e.bool:return DS(n);case $e.float4:case $e.float8:case $e.int2:case $e.int4:case $e.int8:case $e.numeric:case $e.oid:return US(n);case $e.json:case $e.jsonb:return MS(n);case $e.timestamp:return BS(n);case $e.abstime:case $e.date:case $e.daterange:case $e.int4range:case $e.int8range:case $e.money:case $e.reltime:case $e.text:case $e.time:case $e.timestamptz:case $e.timetz:case $e.tsrange:case $e.tstzrange:return Nd(n);default:return Nd(n)}},Nd=r=>r,DS=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},US=r=>{if(typeof r=="string"){const n=parseFloat(r);if(!Number.isNaN(n))return n}return r},MS=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(n){return console.log(`JSON parse error: ${n}`),r}return r},zS=(r,n)=>{if(typeof r!="string")return r;const s=r.length-1,i=r[s];if(r[0]==="{"&&i==="}"){let u;const f=r.slice(1,s);try{u=JSON.parse("["+f+"]")}catch{u=f?f.split(","):[]}return u.map(h=>U_(n,h))}return r},BS=r=>typeof r=="string"?r.replace(" ","T"):r,M_=r=>{const n=new URL(r);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class ud{constructor(n,s,i={},o=Rd){this.channel=n,this.event=s,this.payload=i,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,s){var i;return this._hasReceived(n)&&s((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:n,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:s}){this.recHooks.filter(i=>i.status===n).forEach(i=>i.callback(s))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var ny;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(ny||(ny={}));class ur{constructor(n,s){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=s?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},o=>{const{onJoin:u,onLeave:f,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ur.syncState(this.state,o,u,f),this.pendingDiffs.forEach(p=>{this.state=ur.syncDiff(this.state,p,u,f)}),this.pendingDiffs=[],h()}),this.channel._on(i.diff,{},o=>{const{onJoin:u,onLeave:f,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=ur.syncDiff(this.state,o,u,f),h())}),this.onJoin((o,u,f)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:u,newPresences:f})}),this.onLeave((o,u,f)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:u,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,s,i,o){const u=this.cloneDeep(n),f=this.transformState(s),h={},p={};return this.map(u,(m,v)=>{f[m]||(p[m]=v)}),this.map(f,(m,v)=>{const b=u[m];if(b){const E=v.map(N=>N.presence_ref),_=b.map(N=>N.presence_ref),C=v.filter(N=>_.indexOf(N.presence_ref)<0),O=b.filter(N=>E.indexOf(N.presence_ref)<0);C.length>0&&(h[m]=C),O.length>0&&(p[m]=O)}else h[m]=v}),this.syncDiff(u,{joins:h,leaves:p},i,o)}static syncDiff(n,s,i,o){const{joins:u,leaves:f}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return i||(i=()=>{}),o||(o=()=>{}),this.map(u,(h,p)=>{var m;const v=(m=n[h])!==null&&m!==void 0?m:[];if(n[h]=this.cloneDeep(p),v.length>0){const b=n[h].map(_=>_.presence_ref),E=v.filter(_=>b.indexOf(_.presence_ref)<0);n[h].unshift(...E)}i(h,v,p)}),this.map(f,(h,p)=>{let m=n[h];if(!m)return;const v=p.map(b=>b.presence_ref);m=m.filter(b=>v.indexOf(b.presence_ref)<0),n[h]=m,o(h,m,p),m.length===0&&delete n[h]}),n}static map(n,s){return Object.getOwnPropertyNames(n).map(i=>s(i,n[i]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((s,i)=>{const o=n[i];return"metas"in o?s[i]=o.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):s[i]=o,s},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var sy;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(sy||(sy={}));var cr;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(cr||(cr={}));var qn;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(qn||(qn={}));class sf{constructor(n,s={config:{}},i){var o,u;if(this.topic=n,this.params=s,this.socket=i,this.bindings={},this.state=nt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new ud(this,fn.join,this.params,this.timeout),this.rejoinTimer=new D_(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=nt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=nt.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(fn.reply,{},(f,h)=>{this._trigger(this._replyEventName(h),f)}),this.presence=new ur(this),this.broadcastEndpointURL=M_(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((u=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||u===void 0)&&u.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,s=this.timeout){var i,o,u;if(this.socket.isConnected()||this.socket.connect(),this.state==nt.closed){const{config:{broadcast:f,presence:h,private:p}}=this.params,m=(o=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(_=>_.filter))!==null&&o!==void 0?o:[],v=!!this.bindings[cr.PRESENCE]&&this.bindings[cr.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,b={},E={broadcast:f,presence:Object.assign(Object.assign({},h),{enabled:v}),postgres_changes:m,private:p};this.socket.accessTokenValue&&(b.access_token=this.socket.accessTokenValue),this._onError(_=>n?.(qn.CHANNEL_ERROR,_)),this._onClose(()=>n?.(qn.CLOSED)),this.updateJoinPayload(Object.assign({config:E},b)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:_})=>{var C;if(this.socket.setAuth(),_===void 0){n?.(qn.SUBSCRIBED);return}else{const O=this.bindings.postgres_changes,N=(C=O?.length)!==null&&C!==void 0?C:0,q=[];for(let U=0;U<N;U++){const B=O[U],{filter:{event:G,schema:ee,table:Y,filter:P}}=B,he=_&&_[U];if(he&&he.event===G&&he.schema===ee&&he.table===Y&&he.filter===P)q.push(Object.assign(Object.assign({},B),{id:he.id}));else{this.unsubscribe(),this.state=nt.errored,n?.(qn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=q,n&&n(qn.SUBSCRIBED);return}}).receive("error",_=>{this.state=nt.errored,n?.(qn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(_).join(", ")||"error")))}).receive("timeout",()=>{n?.(qn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,s={}){return await this.send({type:"presence",event:"track",payload:n},s.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,s,i){return this.state===nt.joined&&n===cr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(n,s,i)}async httpSend(n,s,i={}){var o;const u=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(s==null)return Promise.reject("Payload is required for httpSend()");const f={method:"POST",headers:{Authorization:u,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:s,private:this.private}]})},h=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(o=i.timeout)!==null&&o!==void 0?o:this.timeout);if(h.status===202)return{success:!0};let p=h.statusText;try{const m=await h.json();p=m.error||m.message||p}catch{}return Promise.reject(new Error(p))}async send(n,s={}){var i,o;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:u,payload:f}=n,p={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:f,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(i=s.timeout)!==null&&i!==void 0?i:this.timeout);return await((o=m.body)===null||o===void 0?void 0:o.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var f,h,p;const m=this._push(n.type,n,s.timeout||this.timeout);n.type==="broadcast"&&!(!((p=(h=(f=this.params)===null||f===void 0?void 0:f.config)===null||h===void 0?void 0:h.broadcast)===null||p===void 0)&&p.ack)&&u("ok"),m.receive("ok",()=>u("ok")),m.receive("error",()=>u("error")),m.receive("timeout",()=>u("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=nt.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(fn.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(o=>{i=new ud(this,fn.leave,{},n),i.receive("ok",()=>{s(),o("ok")}).receive("timeout",()=>{s(),o("timed out")}).receive("error",()=>{o("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=nt.closed,this.bindings={}}async _fetchWithTimeout(n,s,i){const o=new AbortController,u=setTimeout(()=>o.abort(),i),f=await this.socket.fetch(n,Object.assign(Object.assign({},s),{signal:o.signal}));return clearTimeout(u),f}_push(n,s,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new ud(this,n,s,i);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>jS){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(n,s,i){return s}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,s,i){var o,u;const f=n.toLocaleLowerCase(),{close:h,error:p,leave:m,join:v}=fn;if(i&&[h,p,m,v].indexOf(f)>=0&&i!==this._joinRef())return;let E=this._onMessage(f,s,i);if(s&&!E)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(_=>{var C,O,N;return((C=_.filter)===null||C===void 0?void 0:C.event)==="*"||((N=(O=_.filter)===null||O===void 0?void 0:O.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===f}).map(_=>_.callback(E,i)):(u=this.bindings[f])===null||u===void 0||u.filter(_=>{var C,O,N,q,U,B;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in _){const G=_.id,ee=(C=_.filter)===null||C===void 0?void 0:C.event;return G&&((O=s.ids)===null||O===void 0?void 0:O.includes(G))&&(ee==="*"||ee?.toLocaleLowerCase()===((N=s.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const G=(U=(q=_?.filter)===null||q===void 0?void 0:q.event)===null||U===void 0?void 0:U.toLocaleLowerCase();return G==="*"||G===((B=s?.event)===null||B===void 0?void 0:B.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===f}).map(_=>{if(typeof E=="object"&&"ids"in E){const C=E.data,{schema:O,table:N,commit_timestamp:q,type:U,errors:B}=C;E=Object.assign(Object.assign({},{schema:O,table:N,commit_timestamp:q,eventType:U,new:{},old:{},errors:B}),this._getPayloadRecords(C))}_.callback(E,i)})}_isClosed(){return this.state===nt.closed}_isJoined(){return this.state===nt.joined}_isJoining(){return this.state===nt.joining}_isLeaving(){return this.state===nt.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,s,i){const o=n.toLocaleLowerCase(),u={type:o,filter:s,callback:i};return this.bindings[o]?this.bindings[o].push(u):this.bindings[o]=[u],this}_off(n,s){const i=n.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(o=>{var u;return!(((u=o.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===i&&sf.isEqual(o.filter,s))})),this}static isEqual(n,s){if(Object.keys(n).length!==Object.keys(s).length)return!1;for(const i in n)if(n[i]!==s[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(fn.close,{},n)}_onError(n){this._on(fn.error,{},s=>n(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=nt.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const s={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(s.new=ty(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(s.old=ty(n.columns,n.old_record)),s}}const cd=()=>{},Yl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},$S=[1e3,2e3,5e3,1e4],LS=1e4,qS=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class HS{constructor(n,s){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Rd,this.transport=null,this.heartbeatIntervalMs=Yl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=cd,this.ref=0,this.reconnectTimer=null,this.logger=cd,this.conn=null,this.sendBuffer=[],this.serializer=new NS,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let u;return o?u=o:typeof fetch>"u"?u=(...f)=>Wa(async()=>{const{default:h}=await Promise.resolve().then(()=>Js);return{default:h}},void 0).then(({default:h})=>h(...f)).catch(h=>{throw new Error(`Failed to load @supabase/node-fetch: ${h.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):u=fetch,(...f)=>u(...f)},!(!((i=s?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${n}/${jd.websocket}`,this.httpEndpoint=M_(n),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=TS.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const s=n.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:CS}))}disconnect(n,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},n?this.conn.close(n,s??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const s=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const n=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,s,i){this.logger(n,s,i)}connectionState(){switch(this.conn&&this.conn.readyState){case or.connecting:return Hs.Connecting;case or.open:return Hs.Open;case or.closing:return Hs.Closing;default:return Hs.Closed}}isConnected(){return this.connectionState()===Hs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,s={config:{}}){const i=`realtime:${n}`,o=this.getChannels().find(u=>u.topic===i);if(o)return o;{const u=new sf(`realtime:${n}`,s,this);return this.channels.push(u),u}}push(n){const{topic:s,event:i,payload:o,ref:u}=n,f=()=>{this.encode(n,h=>{var p;(p=this.conn)===null||p===void 0||p.send(h)})};this.log("push",`${s} ${i} (${u})`,o),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(RS,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},Yl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let s=this.channels.find(i=>i.topic===n&&(i._isJoined()||i._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${n}"`),s.unsubscribe())}_remove(n){this.channels=this.channels.filter(s=>s.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply")try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:o,payload:u,ref:f}=s,h=f?`(${f})`:"",p=u.status||"";this.log("receive",`${p} ${i} ${o} ${h}`.trim(),u),this.channels.filter(m=>m._isMember(i)).forEach(m=>m._trigger(o,u,f)),this._triggerStateCallbacks("message",s)})}_clearTimer(n){var s;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(n){var s;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(fn.error))}_appendParams(n,s){if(Object.keys(s).length===0)return n;const i=n.match(/\?/)?"&":"?",o=new URLSearchParams(s);return`${n}${i}${o}`}_workerObjectUrl(n){let s;if(n)s=n;else{const i=new Blob([qS],{type:"application/javascript"});s=URL.createObjectURL(i)}return s}_setConnectionState(n,s=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(n=null){let s;n?s=n:this.accessToken?s=await this.accessToken():s=this.accessTokenValue,this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(i=>{const o={access_token:s,version:xS};s&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(fn.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this.setAuth().catch(s=>{this.log("error",`error setting auth in ${n}`,s)})}_triggerStateCallbacks(n,s){try{this.stateChangeCallbacks[n].forEach(i=>{try{i(s)}catch(o){this.log("error",`error in ${n} callback`,o)}})}catch(i){this.log("error",`error triggering ${n} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new D_(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Yl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var s,i,o,u,f,h,p,m,v;if(this.transport=(s=n?.transport)!==null&&s!==void 0?s:null,this.timeout=(i=n?.timeout)!==null&&i!==void 0?i:Rd,this.heartbeatIntervalMs=(o=n?.heartbeatIntervalMs)!==null&&o!==void 0?o:Yl.HEARTBEAT_INTERVAL,this.worker=(u=n?.worker)!==null&&u!==void 0?u:!1,this.accessToken=(f=n?.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(h=n?.heartbeatCallback)!==null&&h!==void 0?h:cd,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=n?.reconnectAfterMs)!==null&&p!==void 0?p:(b=>$S[b-1]||LS),this.encode=(m=n?.encode)!==null&&m!==void 0?m:((b,E)=>E(JSON.stringify(b))),this.decode=(v=n?.decode)!==null&&v!==void 0?v:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}class af extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function Ie(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class IS extends af{constructor(n,s,i){super(n),this.name="StorageApiError",this.status=s,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class kd extends af{constructor(n,s){super(n),this.name="StorageUnknownError",this.originalError=s}}const rf=r=>{let n;return r?n=r:typeof fetch>"u"?n=(...s)=>Wa(async()=>{const{default:i}=await Promise.resolve().then(()=>Js);return{default:i}},void 0).then(({default:i})=>i(...s)):n=fetch,(...s)=>n(...s)},GS=()=>F(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Wa(()=>Promise.resolve().then(()=>Js),void 0)).Response:Response}),Dd=r=>{if(Array.isArray(r))return r.map(s=>Dd(s));if(typeof r=="function"||r!==Object(r))return r;const n={};return Object.entries(r).forEach(([s,i])=>{const o=s.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));n[o]=Dd(i)}),n},VS=r=>{if(typeof r!="object"||r===null)return!1;const n=Object.getPrototypeOf(r);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},dd=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),PS=(r,n,s)=>F(void 0,void 0,void 0,function*(){const i=yield GS();r instanceof i&&!s?.noResolveJson?r.json().then(o=>{const u=r.status||500,f=o?.statusCode||u+"";n(new IS(dd(o),u,f))}).catch(o=>{n(new kd(dd(o),o))}):n(new kd(dd(r),r))}),YS=(r,n,s,i)=>{const o={method:r,headers:n?.headers||{}};return r==="GET"||!i?o:(VS(i)?(o.headers=Object.assign({"Content-Type":"application/json"},n?.headers),o.body=JSON.stringify(i)):o.body=i,n?.duplex&&(o.duplex=n.duplex),Object.assign(Object.assign({},o),s))};function _r(r,n,s,i,o,u){return F(this,void 0,void 0,function*(){return new Promise((f,h)=>{r(s,YS(n,i,o,u)).then(p=>{if(!p.ok)throw p;return i?.noResolveJson?p:p.json()}).then(p=>f(p)).catch(p=>PS(p,h,i))})})}function mr(r,n,s,i){return F(this,void 0,void 0,function*(){return _r(r,"GET",n,s,i)})}function cn(r,n,s,i,o){return F(this,void 0,void 0,function*(){return _r(r,"POST",n,i,o,s)})}function Ud(r,n,s,i,o){return F(this,void 0,void 0,function*(){return _r(r,"PUT",n,i,o,s)})}function KS(r,n,s,i){return F(this,void 0,void 0,function*(){return _r(r,"HEAD",n,Object.assign(Object.assign({},s),{noResolveJson:!0}),i)})}function lf(r,n,s,i,o){return F(this,void 0,void 0,function*(){return _r(r,"DELETE",n,i,o,s)})}class XS{constructor(n,s){this.downloadFn=n,this.shouldThrowOnError=s}then(n,s){return this.execute().then(n,s)}execute(){return F(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ie(n))return{data:null,error:n};throw n}})}}var z_;class JS{constructor(n,s){this.downloadFn=n,this.shouldThrowOnError=s,this[z_]="BlobDownloadBuilder",this.promise=null}asStream(){return new XS(this.downloadFn,this.shouldThrowOnError)}then(n,s){return this.getPromise().then(n,s)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return F(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ie(n))return{data:null,error:n};throw n}})}}z_=Symbol.toStringTag;const QS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ay={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ZS{constructor(n,s={},i,o){this.shouldThrowOnError=!1,this.url=n,this.headers=s,this.bucketId=i,this.fetch=rf(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(n,s,i,o){return F(this,void 0,void 0,function*(){try{let u;const f=Object.assign(Object.assign({},ay),o);let h=Object.assign(Object.assign({},this.headers),n==="POST"&&{"x-upsert":String(f.upsert)});const p=f.metadata;typeof Blob<"u"&&i instanceof Blob?(u=new FormData,u.append("cacheControl",f.cacheControl),p&&u.append("metadata",this.encodeMetadata(p)),u.append("",i)):typeof FormData<"u"&&i instanceof FormData?(u=i,u.append("cacheControl",f.cacheControl),p&&u.append("metadata",this.encodeMetadata(p))):(u=i,h["cache-control"]=`max-age=${f.cacheControl}`,h["content-type"]=f.contentType,p&&(h["x-metadata"]=this.toBase64(this.encodeMetadata(p)))),o?.headers&&(h=Object.assign(Object.assign({},h),o.headers));const m=this._removeEmptyFolders(s),v=this._getFinalPath(m),b=yield(n=="PUT"?Ud:cn)(this.fetch,`${this.url}/object/${v}`,u,Object.assign({headers:h},f?.duplex?{duplex:f.duplex}:{}));return{data:{path:m,id:b.Id,fullPath:b.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Ie(u))return{data:null,error:u};throw u}})}upload(n,s,i){return F(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,s,i)})}uploadToSignedUrl(n,s,i,o){return F(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(n),f=this._getFinalPath(u),h=new URL(this.url+`/object/upload/sign/${f}`);h.searchParams.set("token",s);try{let p;const m=Object.assign({upsert:ay.upsert},o),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&i instanceof Blob?(p=new FormData,p.append("cacheControl",m.cacheControl),p.append("",i)):typeof FormData<"u"&&i instanceof FormData?(p=i,p.append("cacheControl",m.cacheControl)):(p=i,v["cache-control"]=`max-age=${m.cacheControl}`,v["content-type"]=m.contentType);const b=yield Ud(this.fetch,h.toString(),p,{headers:v});return{data:{path:u,fullPath:b.Key},error:null}}catch(p){if(this.shouldThrowOnError)throw p;if(Ie(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(n,s){return F(this,void 0,void 0,function*(){try{let i=this._getFinalPath(n);const o=Object.assign({},this.headers);s?.upsert&&(o["x-upsert"]="true");const u=yield cn(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:o}),f=new URL(this.url+u.url),h=f.searchParams.get("token");if(!h)throw new af("No token returned by API");return{data:{signedUrl:f.toString(),path:n,token:h},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ie(i))return{data:null,error:i};throw i}})}update(n,s,i){return F(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,s,i)})}move(n,s,i){return F(this,void 0,void 0,function*(){try{return{data:yield cn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:s,destinationBucket:i?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ie(o))return{data:null,error:o};throw o}})}copy(n,s,i){return F(this,void 0,void 0,function*(){try{return{data:{path:(yield cn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:s,destinationBucket:i?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ie(o))return{data:null,error:o};throw o}})}createSignedUrl(n,s,i){return F(this,void 0,void 0,function*(){try{let o=this._getFinalPath(n),u=yield cn(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:s},i?.transform?{transform:i.transform}:{}),{headers:this.headers});const f=i?.download?`&download=${i.download===!0?"":i.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${f}`)},{data:u,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ie(o))return{data:null,error:o};throw o}})}createSignedUrls(n,s,i){return F(this,void 0,void 0,function*(){try{const o=yield cn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:n},{headers:this.headers}),u=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:o.map(f=>Object.assign(Object.assign({},f),{signedUrl:f.signedURL?encodeURI(`${this.url}${f.signedURL}${u}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ie(o))return{data:null,error:o};throw o}})}download(n,s){const o=typeof s?.transform<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString(s?.transform||{}),f=u?`?${u}`:"",h=this._getFinalPath(n),p=()=>mr(this.fetch,`${this.url}/${o}/${h}${f}`,{headers:this.headers,noResolveJson:!0});return new JS(p,this.shouldThrowOnError)}info(n){return F(this,void 0,void 0,function*(){const s=this._getFinalPath(n);try{const i=yield mr(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:Dd(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ie(i))return{data:null,error:i};throw i}})}exists(n){return F(this,void 0,void 0,function*(){const s=this._getFinalPath(n);try{return yield KS(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ie(i)&&i instanceof kd){const o=i.originalError;if([400,404].includes(o?.status))return{data:!1,error:i}}throw i}})}getPublicUrl(n,s){const i=this._getFinalPath(n),o=[],u=s?.download?`download=${s.download===!0?"":s.download}`:"";u!==""&&o.push(u);const h=typeof s?.transform<"u"?"render/image":"object",p=this.transformOptsToQueryString(s?.transform||{});p!==""&&o.push(p);let m=o.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${i}${m}`)}}}remove(n){return F(this,void 0,void 0,function*(){try{return{data:yield lf(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ie(s))return{data:null,error:s};throw s}})}list(n,s,i){return F(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},QS),s),{prefix:n||""});return{data:yield cn(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},i),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ie(o))return{data:null,error:o};throw o}})}listV2(n,s){return F(this,void 0,void 0,function*(){try{const i=Object.assign({},n);return{data:yield cn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},s),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ie(i))return{data:null,error:i};throw i}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const s=[];return n.width&&s.push(`width=${n.width}`),n.height&&s.push(`height=${n.height}`),n.resize&&s.push(`resize=${n.resize}`),n.format&&s.push(`format=${n.format}`),n.quality&&s.push(`quality=${n.quality}`),s.join("&")}}const B_="2.77.0",$_={"X-Client-Info":`storage-js/${B_}`};class WS{constructor(n,s={},i,o){this.shouldThrowOnError=!1;const u=new URL(n);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$_),s),this.fetch=rf(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(n){return F(this,void 0,void 0,function*(){try{const s=this.listBucketOptionsToQueryString(n);return{data:yield mr(this.fetch,`${this.url}/bucket${s}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ie(s))return{data:null,error:s};throw s}})}getBucket(n){return F(this,void 0,void 0,function*(){try{return{data:yield mr(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ie(s))return{data:null,error:s};throw s}})}createBucket(n){return F(this,arguments,void 0,function*(s,i={public:!1}){try{return{data:yield cn(this.fetch,`${this.url}/bucket`,{id:s,name:s,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ie(o))return{data:null,error:o};throw o}})}updateBucket(n,s){return F(this,void 0,void 0,function*(){try{return{data:yield Ud(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ie(i))return{data:null,error:i};throw i}})}emptyBucket(n){return F(this,void 0,void 0,function*(){try{return{data:yield cn(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ie(s))return{data:null,error:s};throw s}})}deleteBucket(n){return F(this,void 0,void 0,function*(){try{return{data:yield lf(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ie(s))return{data:null,error:s};throw s}})}listBucketOptionsToQueryString(n){const s={};return n&&("limit"in n&&(s.limit=String(n.limit)),"offset"in n&&(s.offset=String(n.offset)),n.search&&(s.search=n.search),n.sortColumn&&(s.sortColumn=n.sortColumn),n.sortOrder&&(s.sortOrder=n.sortOrder)),Object.keys(s).length>0?"?"+new URLSearchParams(s).toString():""}}class FS{constructor(n,s={},i){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$_),s),this.fetch=rf(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(n){return F(this,void 0,void 0,function*(){try{return{data:yield cn(this.fetch,`${this.url}/bucket`,{name:n},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ie(s))return{data:null,error:s};throw s}})}listBuckets(n){return F(this,void 0,void 0,function*(){try{const s=new URLSearchParams;n?.limit!==void 0&&s.set("limit",n.limit.toString()),n?.offset!==void 0&&s.set("offset",n.offset.toString()),n?.sortColumn&&s.set("sortColumn",n.sortColumn),n?.sortOrder&&s.set("sortOrder",n.sortOrder),n?.search&&s.set("search",n.search);const i=s.toString(),o=i?`${this.url}/bucket?${i}`:`${this.url}/bucket`;return{data:yield mr(this.fetch,o,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ie(s))return{data:null,error:s};throw s}})}deleteBucket(n){return F(this,void 0,void 0,function*(){try{return{data:yield lf(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ie(s))return{data:null,error:s};throw s}})}}const of={"X-Client-Info":`storage-js/${B_}`,"Content-Type":"application/json"};class L_ extends Error{constructor(n){super(n),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Vt(r){return typeof r=="object"&&r!==null&&"__isStorageVectorsError"in r}class fd extends L_{constructor(n,s,i){super(n),this.name="StorageVectorsApiError",this.status=s,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class eE extends L_{constructor(n,s){super(n),this.name="StorageVectorsUnknownError",this.originalError=s}}var iy;(function(r){r.InternalError="InternalError",r.S3VectorConflictException="S3VectorConflictException",r.S3VectorNotFoundException="S3VectorNotFoundException",r.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",r.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",r.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(iy||(iy={}));const uf=r=>{let n;return r?n=r:typeof fetch>"u"?n=(...s)=>Wa(async()=>{const{default:i}=await Promise.resolve().then(()=>Js);return{default:i}},void 0).then(({default:i})=>i(...s)):n=fetch,(...s)=>n(...s)},tE=r=>{if(typeof r!="object"||r===null)return!1;const n=Object.getPrototypeOf(r);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},ry=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),nE=(r,n,s)=>F(void 0,void 0,void 0,function*(){if(r&&typeof r=="object"&&"status"in r&&"ok"in r&&typeof r.status=="number"&&!s?.noResolveJson){const o=r.status||500,u=r;if(typeof u.json=="function")u.json().then(f=>{const h=f?.statusCode||f?.code||o+"";n(new fd(ry(f),o,h))}).catch(()=>{const f=o+"",h=u.statusText||`HTTP ${o} error`;n(new fd(h,o,f))});else{const f=o+"",h=u.statusText||`HTTP ${o} error`;n(new fd(h,o,f))}}else n(new eE(ry(r),r))}),sE=(r,n,s,i)=>{const o={method:r,headers:n?.headers||{}};return i?(tE(i)?(o.headers=Object.assign({"Content-Type":"application/json"},n?.headers),o.body=JSON.stringify(i)):o.body=i,Object.assign(Object.assign({},o),s)):o};function aE(r,n,s,i,o,u){return F(this,void 0,void 0,function*(){return new Promise((f,h)=>{r(s,sE(n,i,o,u)).then(p=>{if(!p.ok)throw p;if(i?.noResolveJson)return p;const m=p.headers.get("content-type");return!m||!m.includes("application/json")?{}:p.json()}).then(p=>f(p)).catch(p=>nE(p,h,i))})})}function Pt(r,n,s,i,o){return F(this,void 0,void 0,function*(){return aE(r,"POST",n,i,o,s)})}class iE{constructor(n,s={},i){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},of),s),this.fetch=uf(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(n){return F(this,void 0,void 0,function*(){try{return{data:(yield Pt(this.fetch,`${this.url}/CreateIndex`,n,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Vt(s))return{data:null,error:s};throw s}})}getIndex(n,s){return F(this,void 0,void 0,function*(){try{return{data:yield Pt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:n,indexName:s},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Vt(i))return{data:null,error:i};throw i}})}listIndexes(n){return F(this,void 0,void 0,function*(){try{return{data:yield Pt(this.fetch,`${this.url}/ListIndexes`,n,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Vt(s))return{data:null,error:s};throw s}})}deleteIndex(n,s){return F(this,void 0,void 0,function*(){try{return{data:(yield Pt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:n,indexName:s},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Vt(i))return{data:null,error:i};throw i}})}}class rE{constructor(n,s={},i){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},of),s),this.fetch=uf(i)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(n){return F(this,void 0,void 0,function*(){try{if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Pt(this.fetch,`${this.url}/PutVectors`,n,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Vt(s))return{data:null,error:s};throw s}})}getVectors(n){return F(this,void 0,void 0,function*(){try{return{data:yield Pt(this.fetch,`${this.url}/GetVectors`,n,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Vt(s))return{data:null,error:s};throw s}})}listVectors(n){return F(this,void 0,void 0,function*(){try{if(n.segmentCount!==void 0){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(n.segmentIndex!==void 0&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error(`segmentIndex must be between 0 and ${n.segmentCount-1}`)}return{data:yield Pt(this.fetch,`${this.url}/ListVectors`,n,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Vt(s))return{data:null,error:s};throw s}})}queryVectors(n){return F(this,void 0,void 0,function*(){try{return{data:yield Pt(this.fetch,`${this.url}/QueryVectors`,n,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Vt(s))return{data:null,error:s};throw s}})}deleteVectors(n){return F(this,void 0,void 0,function*(){try{if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Pt(this.fetch,`${this.url}/DeleteVectors`,n,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Vt(s))return{data:null,error:s};throw s}})}}class lE{constructor(n,s={},i){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},of),s),this.fetch=uf(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(n){return F(this,void 0,void 0,function*(){try{return{data:(yield Pt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Vt(s))return{data:null,error:s};throw s}})}getBucket(n){return F(this,void 0,void 0,function*(){try{return{data:yield Pt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:n},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Vt(s))return{data:null,error:s};throw s}})}listBuckets(){return F(this,arguments,void 0,function*(n={}){try{return{data:yield Pt(this.fetch,`${this.url}/ListVectorBuckets`,n,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Vt(s))return{data:null,error:s};throw s}})}deleteBucket(n){return F(this,void 0,void 0,function*(){try{return{data:(yield Pt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Vt(s))return{data:null,error:s};throw s}})}}class oE extends lE{constructor(n,s={}){super(n,s.headers||{},s.fetch)}from(n){return new uE(this.url,this.headers,n,this.fetch)}}class uE extends iE{constructor(n,s,i,o){super(n,s,o),this.vectorBucketName=i}createIndex(n){const s=Object.create(null,{createIndex:{get:()=>super.createIndex}});return F(this,void 0,void 0,function*(){return s.createIndex.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const n=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return F(this,arguments,void 0,function*(s={}){return n.listIndexes.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName}))})}getIndex(n){const s=Object.create(null,{getIndex:{get:()=>super.getIndex}});return F(this,void 0,void 0,function*(){return s.getIndex.call(this,this.vectorBucketName,n)})}deleteIndex(n){const s=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return F(this,void 0,void 0,function*(){return s.deleteIndex.call(this,this.vectorBucketName,n)})}index(n){return new cE(this.url,this.headers,this.vectorBucketName,n,this.fetch)}}class cE extends rE{constructor(n,s,i,o,u){super(n,s,u),this.vectorBucketName=i,this.indexName=o}putVectors(n){const s=Object.create(null,{putVectors:{get:()=>super.putVectors}});return F(this,void 0,void 0,function*(){return s.putVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(n){const s=Object.create(null,{getVectors:{get:()=>super.getVectors}});return F(this,void 0,void 0,function*(){return s.getVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const n=Object.create(null,{listVectors:{get:()=>super.listVectors}});return F(this,arguments,void 0,function*(s={}){return n.listVectors.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(n){const s=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return F(this,void 0,void 0,function*(){return s.queryVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(n){const s=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return F(this,void 0,void 0,function*(){return s.deleteVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class dE extends WS{constructor(n,s={},i,o){super(n,s,i,o)}from(n){return new ZS(this.url,this.headers,n,this.fetch)}get vectors(){return new oE(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new FS(this.url+"/iceberg",this.headers,this.fetch)}}const fE="2.77.0";let Wi="";typeof Deno<"u"?Wi="deno":typeof document<"u"?Wi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Wi="react-native":Wi="node";const hE={"X-Client-Info":`supabase-js-${Wi}/${fE}`},mE={headers:hE},gE={schema:"public"},pE={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},yE={},_E=r=>{let n;return r?n=r:typeof fetch>"u"?n=T_:n=fetch,(...s)=>n(...s)},vE=()=>typeof Headers>"u"?O_:Headers,bE=(r,n,s)=>{const i=_E(s),o=vE();return async(u,f)=>{var h;const p=(h=await n())!==null&&h!==void 0?h:r;let m=new o(f?.headers);return m.has("apikey")||m.set("apikey",r),m.has("Authorization")||m.set("Authorization",`Bearer ${p}`),i(u,Object.assign(Object.assign({},f),{headers:m}))}};function wE(r){return r.endsWith("/")?r:r+"/"}function SE(r,n){var s,i;const{db:o,auth:u,realtime:f,global:h}=r,{db:p,auth:m,realtime:v,global:b}=n,E={db:Object.assign(Object.assign({},p),o),auth:Object.assign(Object.assign({},m),u),realtime:Object.assign(Object.assign({},v),f),storage:{},global:Object.assign(Object.assign(Object.assign({},b),h),{headers:Object.assign(Object.assign({},(s=b?.headers)!==null&&s!==void 0?s:{}),(i=h?.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return r.accessToken?E.accessToken=r.accessToken:delete E.accessToken,E}function EE(r){const n=r?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(wE(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const q_="2.77.0",Ia=30*1e3,Md=3,hd=Md*Ia,AE="http://localhost:9999",TE="supabase.auth.token",OE={"X-Client-Info":`gotrue-js/${q_}`},zd="X-Supabase-Api-Version",H_={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},xE=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,CE=600*1e3;class gr extends Error{constructor(n,s,i){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=i}}function ae(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class RE extends gr{constructor(n,s,i){super(n,s,i),this.name="AuthApiError",this.status=s,this.code=i}}function jE(r){return ae(r)&&r.name==="AuthApiError"}class Is extends gr{constructor(n,s){super(n),this.name="AuthUnknownError",this.originalError=s}}class ys extends gr{constructor(n,s,i,o){super(n,i,o),this.name=s,this.status=i}}class gs extends ys{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function NE(r){return ae(r)&&r.name==="AuthSessionMissingError"}class Ua extends ys{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Kl extends ys{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class Xl extends ys{constructor(n,s=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function kE(r){return ae(r)&&r.name==="AuthImplicitGrantRedirectError"}class ly extends ys{constructor(n,s=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Bd extends ys{constructor(n,s){super(n,"AuthRetryableFetchError",s,void 0)}}function md(r){return ae(r)&&r.name==="AuthRetryableFetchError"}class oy extends ys{constructor(n,s,i){super(n,"AuthWeakPasswordError",s,"weak_password"),this.reasons=i}}class $d extends ys{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const mo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),uy=` 	
\r=`.split(""),DE=(()=>{const r=new Array(128);for(let n=0;n<r.length;n+=1)r[n]=-1;for(let n=0;n<uy.length;n+=1)r[uy[n].charCodeAt(0)]=-2;for(let n=0;n<mo.length;n+=1)r[mo[n].charCodeAt(0)]=n;return r})();function cy(r,n,s){if(r!==null)for(n.queue=n.queue<<8|r,n.queuedBits+=8;n.queuedBits>=6;){const i=n.queue>>n.queuedBits-6&63;s(mo[i]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const i=n.queue>>n.queuedBits-6&63;s(mo[i]),n.queuedBits-=6}}function I_(r,n,s){const i=DE[r];if(i>-1)for(n.queue=n.queue<<6|i,n.queuedBits+=6;n.queuedBits>=8;)s(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function dy(r){const n=[],s=f=>{n.push(String.fromCodePoint(f))},i={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},u=f=>{zE(f,i,s)};for(let f=0;f<r.length;f+=1)I_(r.charCodeAt(f),o,u);return n.join("")}function UE(r,n){if(r<=127){n(r);return}else if(r<=2047){n(192|r>>6),n(128|r&63);return}else if(r<=65535){n(224|r>>12),n(128|r>>6&63),n(128|r&63);return}else if(r<=1114111){n(240|r>>18),n(128|r>>12&63),n(128|r>>6&63),n(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function ME(r,n){for(let s=0;s<r.length;s+=1){let i=r.charCodeAt(s);if(i>55295&&i<=56319){const o=(i-55296)*1024&65535;i=(r.charCodeAt(s+1)-56320&65535|o)+65536,s+=1}UE(i,n)}}function zE(r,n,s){if(n.utf8seq===0){if(r<=127){s(r);return}for(let i=1;i<6;i+=1)if((r>>7-i&1)===0){n.utf8seq=i;break}if(n.utf8seq===2)n.codepoint=r&31;else if(n.utf8seq===3)n.codepoint=r&15;else if(n.utf8seq===4)n.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|r&63,n.utf8seq-=1,n.utf8seq===0&&s(n.codepoint)}}function Xa(r){const n=[],s={queue:0,queuedBits:0},i=o=>{n.push(o)};for(let o=0;o<r.length;o+=1)I_(r.charCodeAt(o),s,i);return new Uint8Array(n)}function BE(r){const n=[];return ME(r,s=>n.push(s)),new Uint8Array(n)}function Ps(r){const n=[],s={queue:0,queuedBits:0},i=o=>{n.push(o)};return r.forEach(o=>cy(o,s,i)),cy(null,s,i),n.join("")}function $E(r){return Math.round(Date.now()/1e3)+r}function LE(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const n=Math.random()*16|0;return(r=="x"?n:n&3|8).toString(16)})}const It=()=>typeof window<"u"&&typeof document<"u",Bs={tested:!1,writable:!1},G_=()=>{if(!It())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Bs.tested)return Bs.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),Bs.tested=!0,Bs.writable=!0}catch{Bs.tested=!0,Bs.writable=!1}return Bs.writable};function qE(r){const n={},s=new URL(r);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((o,u)=>{n[u]=o})}catch{}return s.searchParams.forEach((i,o)=>{n[o]=i}),n}const V_=r=>{let n;return r?n=r:typeof fetch>"u"?n=(...s)=>Wa(async()=>{const{default:i}=await Promise.resolve().then(()=>Js);return{default:i}},void 0).then(({default:i})=>i(...s)):n=fetch,(...s)=>n(...s)},HE=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",Ga=async(r,n,s)=>{await r.setItem(n,JSON.stringify(s))},$s=async(r,n)=>{const s=await r.getItem(n);if(!s)return null;try{return JSON.parse(s)}catch{return s}},fs=async(r,n)=>{await r.removeItem(n)};class xo{constructor(){this.promise=new xo.promiseConstructor((n,s)=>{this.resolve=n,this.reject=s})}}xo.promiseConstructor=Promise;function gd(r){const n=r.split(".");if(n.length!==3)throw new $d("Invalid JWT structure");for(let i=0;i<n.length;i++)if(!xE.test(n[i]))throw new $d("JWT not in base64url format");return{header:JSON.parse(dy(n[0])),payload:JSON.parse(dy(n[1])),signature:Xa(n[2]),raw:{header:n[0],payload:n[1]}}}async function IE(r){return await new Promise(n=>{setTimeout(()=>n(null),r)})}function GE(r,n){return new Promise((i,o)=>{(async()=>{for(let u=0;u<1/0;u++)try{const f=await r(u);if(!n(u,null,f)){i(f);return}}catch(f){if(!n(u,f)){o(f);return}}})()})}function VE(r){return("0"+r.toString(16)).substr(-2)}function PE(){const n=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=s.length;let o="";for(let u=0;u<56;u++)o+=s.charAt(Math.floor(Math.random()*i));return o}return crypto.getRandomValues(n),Array.from(n,VE).join("")}async function YE(r){const s=new TextEncoder().encode(r),i=await crypto.subtle.digest("SHA-256",s),o=new Uint8Array(i);return Array.from(o).map(u=>String.fromCharCode(u)).join("")}async function KE(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const s=await YE(r);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ma(r,n,s=!1){const i=PE();let o=i;s&&(o+="/PASSWORD_RECOVERY"),await Ga(r,`${n}-code-verifier`,o);const u=await KE(i);return[u,i===u?"plain":"s256"]}const XE=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function JE(r){const n=r.headers.get(zd);if(!n||!n.match(XE))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function QE(r){if(!r)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(r<=n)throw new Error("JWT has expired")}function ZE(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const WE=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function za(r){if(!WE.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function pd(){const r={};return new Proxy(r,{get:(n,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const i=s.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function fy(r){return JSON.parse(JSON.stringify(r))}const Ls=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),FE=[502,503,504];async function hy(r){var n;if(!HE(r))throw new Bd(Ls(r),0);if(FE.includes(r.status))throw new Bd(Ls(r),r.status);let s;try{s=await r.json()}catch(u){throw new Is(Ls(u),u)}let i;const o=JE(r);if(o&&o.getTime()>=H_["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?i=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(i=s.error_code),i){if(i==="weak_password")throw new oy(Ls(s),r.status,((n=s.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(i==="session_not_found")throw new gs}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((u,f)=>u&&typeof f=="string",!0))throw new oy(Ls(s),r.status,s.weak_password.reasons);throw new RE(Ls(s),r.status||500,i)}const eA=(r,n,s,i)=>{const o={method:r,headers:n?.headers||{}};return r==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),o.body=JSON.stringify(i),Object.assign(Object.assign({},o),s))};async function ce(r,n,s,i){var o;const u=Object.assign({},i?.headers);u[zd]||(u[zd]=H_["2024-01-01"].name),i?.jwt&&(u.Authorization=`Bearer ${i.jwt}`);const f=(o=i?.query)!==null&&o!==void 0?o:{};i?.redirectTo&&(f.redirect_to=i.redirectTo);const h=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",p=await tA(r,n,s+h,{headers:u,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(p):{data:Object.assign({},p),error:null}}async function tA(r,n,s,i,o,u){const f=eA(n,i,o,u);let h;try{h=await r(s,Object.assign({},f))}catch(p){throw console.error(p),new Bd(Ls(p),0)}if(h.ok||await hy(h),i?.noResolveJson)return h;try{return await h.json()}catch(p){await hy(p)}}function un(r){var n;let s=null;aA(r)&&(s=Object.assign({},r),r.expires_at||(s.expires_at=$E(r.expires_in)));const i=(n=r.user)!==null&&n!==void 0?n:r;return{data:{session:s,user:i},error:null}}function my(r){const n=un(r);return!n.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((s,i)=>s&&typeof i=="string",!0)&&(n.data.weak_password=r.weak_password),n}function ps(r){var n;return{data:{user:(n=r.user)!==null&&n!==void 0?n:r},error:null}}function nA(r){return{data:r,error:null}}function sA(r){const{action_link:n,email_otp:s,hashed_token:i,redirect_to:o,verification_type:u}=r,f=Za(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:n,email_otp:s,hashed_token:i,redirect_to:o,verification_type:u},p=Object.assign({},f);return{data:{properties:h,user:p},error:null}}function gy(r){return r}function aA(r){return r.access_token&&r.refresh_token&&r.expires_in}const yd=["global","local","others"];class iA{constructor({url:n="",headers:s={},fetch:i}){this.url=n,this.headers=s,this.fetch=V_(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,s=yd[0]){if(yd.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${yd.join(", ")}`);try{return await ce(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(i){if(ae(i))return{data:null,error:i};throw i}}async inviteUserByEmail(n,s={}){try{return await ce(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:ps})}catch(i){if(ae(i))return{data:{user:null},error:i};throw i}}async generateLink(n){try{const{options:s}=n,i=Za(n,["options"]),o=Object.assign(Object.assign({},i),s);return"newEmail"in i&&(o.new_email=i?.newEmail,delete o.newEmail),await ce(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:sA,redirectTo:s?.redirectTo})}catch(s){if(ae(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(n){try{return await ce(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:ps})}catch(s){if(ae(s))return{data:{user:null},error:s};throw s}}async listUsers(n){var s,i,o,u,f,h,p;try{const m={nextPage:null,lastPage:0,total:0},v=await ce(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(s=n?.page)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:"",per_page:(u=(o=n?.perPage)===null||o===void 0?void 0:o.toString())!==null&&u!==void 0?u:""},xform:gy});if(v.error)throw v.error;const b=await v.json(),E=(f=v.headers.get("x-total-count"))!==null&&f!==void 0?f:0,_=(p=(h=v.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&p!==void 0?p:[];return _.length>0&&(_.forEach(C=>{const O=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(C.split(";")[1].split("=")[1]);m[`${N}Page`]=O}),m.total=parseInt(E)),{data:Object.assign(Object.assign({},b),m),error:null}}catch(m){if(ae(m))return{data:{users:[]},error:m};throw m}}async getUserById(n){za(n);try{return await ce(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:ps})}catch(s){if(ae(s))return{data:{user:null},error:s};throw s}}async updateUserById(n,s){za(n);try{return await ce(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:s,headers:this.headers,xform:ps})}catch(i){if(ae(i))return{data:{user:null},error:i};throw i}}async deleteUser(n,s=!1){za(n);try{return await ce(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:s},xform:ps})}catch(i){if(ae(i))return{data:{user:null},error:i};throw i}}async _listFactors(n){za(n.userId);try{const{data:s,error:i}=await ce(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:s,error:i}}catch(s){if(ae(s))return{data:null,error:s};throw s}}async _deleteFactor(n){za(n.userId),za(n.id);try{return{data:await ce(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(s){if(ae(s))return{data:null,error:s};throw s}}async _listOAuthClients(n){var s,i,o,u,f,h,p;try{const m={nextPage:null,lastPage:0,total:0},v=await ce(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(s=n?.page)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:"",per_page:(u=(o=n?.perPage)===null||o===void 0?void 0:o.toString())!==null&&u!==void 0?u:""},xform:gy});if(v.error)throw v.error;const b=await v.json(),E=(f=v.headers.get("x-total-count"))!==null&&f!==void 0?f:0,_=(p=(h=v.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&p!==void 0?p:[];return _.length>0&&(_.forEach(C=>{const O=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(C.split(";")[1].split("=")[1]);m[`${N}Page`]=O}),m.total=parseInt(E)),{data:Object.assign(Object.assign({},b),m),error:null}}catch(m){if(ae(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(n){try{return await ce(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(ae(s))return{data:null,error:s};throw s}}async _getOAuthClient(n){try{return await ce(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(ae(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(n){try{return await ce(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if(ae(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(n){try{return await ce(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(ae(s))return{data:null,error:s};throw s}}}function py(r={}){return{getItem:n=>r[n]||null,setItem:(n,s)=>{r[n]=s},removeItem:n=>{delete r[n]}}}const Ba={debug:!!(globalThis&&G_()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class P_ extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class rA extends P_{}async function lA(r,n,s){Ba.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,n);const i=new globalThis.AbortController;return n>0&&setTimeout(()=>{i.abort(),Ba.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async o=>{if(o){Ba.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,o.name);try{return await s()}finally{Ba.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,o.name)}}else{if(n===0)throw Ba.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new rA(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(Ba.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function oA(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Y_(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function uA(r){return parseInt(r,16)}function cA(r){const n=new TextEncoder().encode(r);return"0x"+Array.from(n,i=>i.toString(16).padStart(2,"0")).join("")}function dA(r){var n;const{chainId:s,domain:i,expirationTime:o,issuedAt:u=new Date,nonce:f,notBefore:h,requestId:p,resources:m,scheme:v,uri:b,version:E}=r;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!b)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(E!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${E}`);if(!((n=r.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const _=Y_(r.address),C=v?`${v}://${i}`:i,O=r.statement?`${r.statement}
`:"",N=`${C} wants you to sign in with your Ethereum account:
${_}

${O}`;let q=`URI: ${b}
Version: ${E}
Chain ID: ${s}${f?`
Nonce: ${f}`:""}
Issued At: ${u.toISOString()}`;if(o&&(q+=`
Expiration Time: ${o.toISOString()}`),h&&(q+=`
Not Before: ${h.toISOString()}`),p&&(q+=`
Request ID: ${p}`),m){let U=`
Resources:`;for(const B of m){if(!B||typeof B!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${B}`);U+=`
- ${B}`}q+=U}return`${N}
${q}`}class We extends Error{constructor({message:n,code:s,cause:i,name:o}){var u;super(n,{cause:i}),this.__isWebAuthnError=!0,this.name=(u=o??(i instanceof Error?i.name:void 0))!==null&&u!==void 0?u:"Unknown Error",this.code=s}}class go extends We{constructor(n,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:n}),this.name="WebAuthnUnknownError",this.originalError=s}}function fA({error:r,options:n}){var s,i,o;const{publicKey:u}=n;if(!u)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(n.signal instanceof AbortSignal)return new We({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((s=u.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new We({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(n.mediation==="conditional"&&((i=u.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new We({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((o=u.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new We({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new We({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new We({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return u.pubKeyCredParams.filter(h=>h.type==="public-key").length===0?new We({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new We({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){const f=window.location.hostname;if(K_(f)){if(u.rp.id!==f)return new We({message:`The RP ID "${u.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new We({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(u.user.id.byteLength<1||u.user.id.byteLength>64)return new We({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new We({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new We({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function hA({error:r,options:n}){const{publicKey:s}=n;if(!s)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(n.signal instanceof AbortSignal)return new We({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new We({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){const i=window.location.hostname;if(K_(i)){if(s.rpId!==i)return new We({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new We({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new We({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new We({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}class mA{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const gA=new mA;function pA(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);const{challenge:n,user:s,excludeCredentials:i}=r,o=Za(r,["challenge","user","excludeCredentials"]),u=Xa(n).buffer,f=Object.assign(Object.assign({},s),{id:Xa(s.id).buffer}),h=Object.assign(Object.assign({},o),{challenge:u,user:f});if(i&&i.length>0){h.excludeCredentials=new Array(i.length);for(let p=0;p<i.length;p++){const m=i[p];h.excludeCredentials[p]=Object.assign(Object.assign({},m),{id:Xa(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return h}function yA(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);const{challenge:n,allowCredentials:s}=r,i=Za(r,["challenge","allowCredentials"]),o=Xa(n).buffer,u=Object.assign(Object.assign({},i),{challenge:o});if(s&&s.length>0){u.allowCredentials=new Array(s.length);for(let f=0;f<s.length;f++){const h=s[f];u.allowCredentials[f]=Object.assign(Object.assign({},h),{id:Xa(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return u}function _A(r){var n;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const s=r;return{id:r.id,rawId:r.id,response:{attestationObject:Ps(new Uint8Array(r.response.attestationObject)),clientDataJSON:Ps(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(n=s.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function vA(r){var n;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const s=r,i=r.getClientExtensionResults(),o=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:Ps(new Uint8Array(o.authenticatorData)),clientDataJSON:Ps(new Uint8Array(o.clientDataJSON)),signature:Ps(new Uint8Array(o.signature)),userHandle:o.userHandle?Ps(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(n=s.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function K_(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function yy(){var r,n;return!!(It()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.get)=="function")}async function bA(r){try{const n=await navigator.credentials.create(r);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new go("Browser returned unexpected credential type",n)}:{data:null,error:new go("Empty credential response",n)}}catch(n){return{data:null,error:fA({error:n,options:r})}}}async function wA(r){try{const n=await navigator.credentials.get(r);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new go("Browser returned unexpected credential type",n)}:{data:null,error:new go("Empty credential response",n)}}catch(n){return{data:null,error:hA({error:n,options:r})}}}const SA={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},EA={userVerification:"preferred",hints:["security-key"]};function po(...r){const n=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),s=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),i={};for(const o of r)if(o)for(const u in o){const f=o[u];if(f!==void 0)if(Array.isArray(f))i[u]=f;else if(s(f))i[u]=f;else if(n(f)){const h=i[u];n(h)?i[u]=po(h,f):i[u]=po(f)}else i[u]=f}return i}function AA(r,n){return po(SA,r,n||{})}function TA(r,n){return po(EA,r,n||{})}class OA{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:s,friendlyName:i,signal:o},u){try{const{data:f,error:h}=await this.client.mfa.challenge({factorId:n,webauthn:s});if(!f)return{data:null,error:h};const p=o??gA.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:m}=f.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${i}`),m.displayName||(m.displayName=m.name)}switch(f.webauthn.type){case"create":{const m=AA(f.webauthn.credential_options.publicKey,u?.create),{data:v,error:b}=await bA({publicKey:m,signal:p});return v?{data:{factorId:n,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:v}},error:null}:{data:null,error:b}}case"request":{const m=TA(f.webauthn.credential_options.publicKey,u?.request),{data:v,error:b}=await wA(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:m,signal:p}));return v?{data:{factorId:n,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:v}},error:null}:{data:null,error:b}}}}catch(f){return ae(f)?{data:null,error:f}:{data:null,error:new Is("Unexpected error in challenge",f)}}}async _verify({challengeId:n,factorId:s,webauthn:i}){return this.client.mfa.verify({factorId:s,challengeId:n,webauthn:i})}async _authenticate({factorId:n,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o}},u){if(!s)return{data:null,error:new gr("rpId is required for WebAuthn authentication")};try{if(!yy())return{data:null,error:new Is("Browser does not support WebAuthn",null)};const{data:f,error:h}=await this.challenge({factorId:n,webauthn:{rpId:s,rpOrigins:i},signal:o},{request:u});if(!f)return{data:null,error:h};const{webauthn:p}=f;return this._verify({factorId:n,challengeId:f.challengeId,webauthn:{type:p.type,rpId:s,rpOrigins:i,credential_response:p.credential_response}})}catch(f){return ae(f)?{data:null,error:f}:{data:null,error:new Is("Unexpected error in authenticate",f)}}}async _register({friendlyName:n,rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o},u){if(!s)return{data:null,error:new gr("rpId is required for WebAuthn registration")};try{if(!yy())return{data:null,error:new Is("Browser does not support WebAuthn",null)};const{data:f,error:h}=await this._enroll({friendlyName:n});if(!f)return await this.client.mfa.listFactors().then(v=>{var b;return(b=v.data)===null||b===void 0?void 0:b.all.find(E=>E.factor_type==="webauthn"&&E.friendly_name===n&&E.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v?.id}):void 0),{data:null,error:h};const{data:p,error:m}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:s,rpOrigins:i},signal:o},{create:u});return p?this._verify({factorId:f.id,challengeId:p.challengeId,webauthn:{rpId:s,rpOrigins:i,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:m}}catch(f){return ae(f)?{data:null,error:f}:{data:null,error:new Is("Unexpected error in register",f)}}}}oA();const xA={url:AE,storageKey:TE,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:OE,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function _y(r,n,s){return await s()}const $a={};class pr{get jwks(){var n,s;return(s=(n=$a[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(n){$a[this.storageKey]=Object.assign(Object.assign({},$a[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,s;return(s=(n=$a[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){$a[this.storageKey]=Object.assign(Object.assign({},$a[this.storageKey]),{cachedAt:n})}constructor(n){var s,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=pr.nextInstanceID,pr.nextInstanceID+=1,this.instanceID>0&&It()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},xA),n);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new iA({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=V_(o.fetch),this.lock=o.lock||_y,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:It()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=lA:this.lock=_y,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new OA(this)},this.persistSession?(o.storage?this.storage=o.storage:G_()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=py(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=py(this.memoryStorage)),It()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}_debug(...n){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${q_}) ${new Date().toISOString()}`,...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{const s=qE(window.location.href);let i="none";if(this._isImplicitGrantCallback(s)?i="implicit":await this._isPKCECallback(s)&&(i="pkce"),It()&&this.detectSessionInUrl&&i!=="none"){const{data:o,error:u}=await this._getSessionFromURL(s,i);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),kE(u)){const p=(n=u.details)===null||n===void 0?void 0:n.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:f,redirectType:h}=o;return this._debug("#_initialize()","detected session in URL",f,"redirect type",h),await this._saveSession(f),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return ae(s)?{error:s}:{error:new Is("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var s,i,o;try{const u=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(s=n?.options)===null||s===void 0?void 0:s.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=n?.options)===null||o===void 0?void 0:o.captchaToken}},xform:un}),{data:f,error:h}=u;if(h||!f)return{data:{user:null,session:null},error:h};const p=f.session,m=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:m,session:p},error:null}}catch(u){if(ae(u))return{data:{user:null,session:null},error:u};throw u}}async signUp(n){var s,i,o;try{let u;if("email"in n){const{email:v,password:b,options:E}=n;let _=null,C=null;this.flowType==="pkce"&&([_,C]=await Ma(this.storage,this.storageKey)),u=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:E?.emailRedirectTo,body:{email:v,password:b,data:(s=E?.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:E?.captchaToken},code_challenge:_,code_challenge_method:C},xform:un})}else if("phone"in n){const{phone:v,password:b,options:E}=n;u=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:b,data:(i=E?.data)!==null&&i!==void 0?i:{},channel:(o=E?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:E?.captchaToken}},xform:un})}else throw new Kl("You must provide either an email or phone number and a password");const{data:f,error:h}=u;if(h||!f)return{data:{user:null,session:null},error:h};const p=f.session,m=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:m,session:p},error:null}}catch(u){if(ae(u))return{data:{user:null,session:null},error:u};throw u}}async signInWithPassword(n){try{let s;if("email"in n){const{email:u,password:f,options:h}=n;s=await ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:f,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:my})}else if("phone"in n){const{phone:u,password:f,options:h}=n;s=await ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:f,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:my})}else throw new Kl("You must provide either an email or phone number and a password");const{data:i,error:o}=s;return o?{data:{user:null,session:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new Ua}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(s){if(ae(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(n){var s,i,o,u;return await this._handleProviderSignIn(n.provider,{redirectTo:(s=n.options)===null||s===void 0?void 0:s.redirectTo,scopes:(i=n.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=n.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(u=n.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:s}=n;switch(s){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(n){var s,i,o,u,f,h,p,m,v,b,E;let _,C;if("message"in n)_=n.message,C=n.signature;else{const{chain:O,wallet:N,statement:q,options:U}=n;let B;if(It())if(typeof N=="object")B=N;else{const pe=window;if("ethereum"in pe&&typeof pe.ethereum=="object"&&"request"in pe.ethereum&&typeof pe.ethereum.request=="function")B=pe.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!U?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");B=N}const G=new URL((s=U?.url)!==null&&s!==void 0?s:window.location.href),ee=await B.request({method:"eth_requestAccounts"}).then(pe=>pe).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!ee||ee.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const Y=Y_(ee[0]);let P=(i=U?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!P){const pe=await B.request({method:"eth_chainId"});P=uA(pe)}const he={domain:G.host,address:Y,statement:q,uri:G.href,version:"1",chainId:P,nonce:(o=U?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(f=(u=U?.signInWithEthereum)===null||u===void 0?void 0:u.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(h=U?.signInWithEthereum)===null||h===void 0?void 0:h.expirationTime,notBefore:(p=U?.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(m=U?.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(v=U?.signInWithEthereum)===null||v===void 0?void 0:v.resources};_=dA(he),C=await B.request({method:"personal_sign",params:[cA(_),Y]})}try{const{data:O,error:N}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:_,signature:C},!((b=n.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(E=n.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:un});if(N)throw N;return!O||!O.session||!O.user?{data:{user:null,session:null},error:new Ua}:(O.session&&(await this._saveSession(O.session),await this._notifyAllSubscribers("SIGNED_IN",O.session)),{data:Object.assign({},O),error:N})}catch(O){if(ae(O))return{data:{user:null,session:null},error:O};throw O}}async signInWithSolana(n){var s,i,o,u,f,h,p,m,v,b,E,_;let C,O;if("message"in n)C=n.message,O=n.signature;else{const{chain:N,wallet:q,statement:U,options:B}=n;let G;if(It())if(typeof q=="object")G=q;else{const Y=window;if("solana"in Y&&typeof Y.solana=="object"&&("signIn"in Y.solana&&typeof Y.solana.signIn=="function"||"signMessage"in Y.solana&&typeof Y.solana.signMessage=="function"))G=Y.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof q!="object"||!B?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");G=q}const ee=new URL((s=B?.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in G&&G.signIn){const Y=await G.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},B?.signInWithSolana),{version:"1",domain:ee.host,uri:ee.href}),U?{statement:U}:null));let P;if(Array.isArray(Y)&&Y[0]&&typeof Y[0]=="object")P=Y[0];else if(Y&&typeof Y=="object"&&"signedMessage"in Y&&"signature"in Y)P=Y;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)C=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),O=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in G)||typeof G.signMessage!="function"||!("publicKey"in G)||typeof G!="object"||!G.publicKey||!("toBase58"in G.publicKey)||typeof G.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");C=[`${ee.host} wants you to sign in with your Solana account:`,G.publicKey.toBase58(),...U?["",U,""]:[""],"Version: 1",`URI: ${ee.href}`,`Issued At: ${(o=(i=B?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((u=B?.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${B.signInWithSolana.notBefore}`]:[],...!((f=B?.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${B.signInWithSolana.expirationTime}`]:[],...!((h=B?.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${B.signInWithSolana.chainId}`]:[],...!((p=B?.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${B.signInWithSolana.nonce}`]:[],...!((m=B?.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${B.signInWithSolana.requestId}`]:[],...!((b=(v=B?.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||b===void 0)&&b.length?["Resources",...B.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const Y=await G.signMessage(new TextEncoder().encode(C),"utf8");if(!Y||!(Y instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");O=Y}}try{const{data:N,error:q}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:C,signature:Ps(O)},!((E=n.options)===null||E===void 0)&&E.captchaToken?{gotrue_meta_security:{captcha_token:(_=n.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:un});if(q)throw q;return!N||!N.session||!N.user?{data:{user:null,session:null},error:new Ua}:(N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),{data:Object.assign({},N),error:q})}catch(N){if(ae(N))return{data:{user:null,session:null},error:N};throw N}}async _exchangeCodeForSession(n){const s=await $s(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(s??"").split("/");try{const{data:u,error:f}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:i},xform:un});if(await fs(this.storage,`${this.storageKey}-code-verifier`),f)throw f;return!u||!u.session||!u.user?{data:{user:null,session:null,redirectType:null},error:new Ua}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:Object.assign(Object.assign({},u),{redirectType:o??null}),error:f})}catch(u){if(ae(u))return{data:{user:null,session:null,redirectType:null},error:u};throw u}}async signInWithIdToken(n){try{const{options:s,provider:i,token:o,access_token:u,nonce:f}=n,h=await ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:u,nonce:f,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:un}),{data:p,error:m}=h;return m?{data:{user:null,session:null},error:m}:!p||!p.session||!p.user?{data:{user:null,session:null},error:new Ua}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:p,error:m})}catch(s){if(ae(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(n){var s,i,o,u,f;try{if("email"in n){const{email:h,options:p}=n;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await Ma(this.storage,this.storageKey));const{error:b}=await ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(s=p?.data)!==null&&s!==void 0?s:{},create_user:(i=p?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:m,code_challenge_method:v},redirectTo:p?.emailRedirectTo});return{data:{user:null,session:null},error:b}}if("phone"in n){const{phone:h,options:p}=n,{data:m,error:v}=await ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(o=p?.data)!==null&&o!==void 0?o:{},create_user:(u=p?.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},channel:(f=p?.channel)!==null&&f!==void 0?f:"sms"}});return{data:{user:null,session:null,messageId:m?.message_id},error:v}}throw new Kl("You must provide either an email or phone number.")}catch(h){if(ae(h))return{data:{user:null,session:null},error:h};throw h}}async verifyOtp(n){var s,i;try{let o,u;"options"in n&&(o=(s=n.options)===null||s===void 0?void 0:s.redirectTo,u=(i=n.options)===null||i===void 0?void 0:i.captchaToken);const{data:f,error:h}=await ce(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:u}}),redirectTo:o,xform:un});if(h)throw h;if(!f)throw new Error("An error occurred on token verification.");const p=f.session,m=f.user;return p?.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),{data:{user:m,session:p},error:null}}catch(o){if(ae(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(n){var s,i,o;try{let u=null,f=null;return this.flowType==="pkce"&&([u,f]=await Ma(this.storage,this.storageKey)),await ce(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(i=(s=n.options)===null||s===void 0?void 0:s.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=n?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:f}),headers:this.headers,xform:nA})}catch(u){if(ae(u))return{data:null,error:u};throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)throw i;if(!s)throw new gs;const{error:o}=await ce(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:o}})}catch(n){if(ae(n))return{data:{user:null,session:null},error:n};throw n}}async resend(n){try{const s=`${this.url}/resend`;if("email"in n){const{email:i,type:o,options:u}=n,{error:f}=await ce(this.fetch,"POST",s,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:u?.captchaToken}},redirectTo:u?.emailRedirectTo});return{data:{user:null,session:null},error:f}}else if("phone"in n){const{phone:i,type:o,options:u}=n,{data:f,error:h}=await ce(this.fetch,"POST",s,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:u?.captchaToken}}});return{data:{user:null,session:null,messageId:f?.message_id},error:h}}throw new Kl("You must provide either an email or phone number and a type")}catch(s){if(ae(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(n,s){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await s()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=s();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await n(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const s=await $s(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?n=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const i=n.expires_at?n.expires_at*1e3-Date.now()<hd:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",n.expires_at),!i){if(this.userStorage){const f=await $s(this.userStorage,this.storageKey+"-user");f?.user?n.user=f.user:n.user=pd()}if(this.storage.isServer&&n.user){let f=this.suppressGetSessionWarning;n=new Proxy(n,{get:(p,m,v)=>(!f&&m==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),f=!0,this.suppressGetSessionWarning=!0),Reflect.get(p,m,v))})}return{data:{session:n},error:null}}const{data:o,error:u}=await this._callRefreshToken(n.refresh_token);return u?{data:{session:null},error:u}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(n){return n?await this._getUser(n):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(n){try{return n?await ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:ps}):await this._useSession(async s=>{var i,o,u;const{data:f,error:h}=s;if(h)throw h;return!(!((i=f.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new gs}:await ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(o=f.session)===null||o===void 0?void 0:o.access_token)!==null&&u!==void 0?u:void 0,xform:ps})})}catch(s){if(ae(s))return NE(s)&&(await this._removeSession(),await fs(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(n,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,s))}async _updateUser(n,s={}){try{return await this._useSession(async i=>{const{data:o,error:u}=i;if(u)throw u;if(!o.session)throw new gs;const f=o.session;let h=null,p=null;this.flowType==="pkce"&&n.email!=null&&([h,p]=await Ma(this.storage,this.storageKey));const{data:m,error:v}=await ce(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:h,code_challenge_method:p}),jwt:f.access_token,xform:ps});if(v)throw v;return f.user=m.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),{data:{user:f.user},error:null}})}catch(i){if(ae(i))return{data:{user:null},error:i};throw i}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new gs;const s=Date.now()/1e3;let i=s,o=!0,u=null;const{payload:f}=gd(n.access_token);if(f.exp&&(i=f.exp,o=i<=s),o){const{data:h,error:p}=await this._callRefreshToken(n.refresh_token);if(p)return{data:{user:null,session:null},error:p};if(!h)return{data:{user:null,session:null},error:null};u=h}else{const{data:h,error:p}=await this._getUser(n.access_token);if(p)throw p;u={access_token:n.access_token,refresh_token:n.refresh_token,user:h.user,token_type:"bearer",expires_in:i-s,expires_at:i},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return{data:{user:u.user,session:u},error:null}}catch(s){if(ae(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async s=>{var i;if(!n){const{data:f,error:h}=s;if(h)throw h;n=(i=f.session)!==null&&i!==void 0?i:void 0}if(!n?.refresh_token)throw new gs;const{data:o,error:u}=await this._callRefreshToken(n.refresh_token);return u?{data:{user:null,session:null},error:u}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(ae(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(n,s){try{if(!It())throw new Xl("No browser detected.");if(n.error||n.error_description||n.error_code)throw new Xl(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new ly("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Xl("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new ly("No code detected.");const{data:U,error:B}=await this._exchangeCodeForSession(n.code);if(B)throw B;const G=new URL(window.location.href);return G.searchParams.delete("code"),window.history.replaceState(window.history.state,"",G.toString()),{data:{session:U.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:o,access_token:u,refresh_token:f,expires_in:h,expires_at:p,token_type:m}=n;if(!u||!h||!f||!m)throw new Xl("No session defined in URL");const v=Math.round(Date.now()/1e3),b=parseInt(h);let E=v+b;p&&(E=parseInt(p));const _=E-v;_*1e3<=Ia&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${b}s`);const C=E-b;v-C>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",C,E,v):v-C<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",C,E,v);const{data:O,error:N}=await this._getUser(u);if(N)throw N;const q={provider_token:i,provider_refresh_token:o,access_token:u,expires_in:b,expires_at:E,refresh_token:f,token_type:m,user:O.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:q,redirectType:n.type},error:null}}catch(i){if(ae(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(n){return!!(n.access_token||n.error_description)}async _isPKCECallback(n){const s=await $s(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&s)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async s=>{var i;const{data:o,error:u}=s;if(u)return{error:u};const f=(i=o.session)===null||i===void 0?void 0:i.access_token;if(f){const{error:h}=await this.admin.signOut(f,n);if(h&&!(jE(h)&&(h.status===404||h.status===401||h.status===403)))return{error:h}}return n!=="others"&&(await this._removeSession(),await fs(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(n){const s=LE(),i={id:s,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:i}}}async _emitInitialSession(n){return await this._useSession(async s=>{var i,o;try{const{data:{session:u},error:f}=s;if(f)throw f;await((i=this.stateChangeEmitters.get(n))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",n,"session",u)}catch(u){await((o=this.stateChangeEmitters.get(n))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",u),console.error(u)}})}async resetPasswordForEmail(n,s={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await Ma(this.storage,this.storageKey,!0));try{return await ce(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(u){if(ae(u))return{data:null,error:u};throw u}}async getUserIdentities(){var n;try{const{data:s,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(n=s.user.identities)!==null&&n!==void 0?n:[]},error:null}}catch(s){if(ae(s))return{data:null,error:s};throw s}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var s;try{const{data:i,error:o}=await this._useSession(async u=>{var f,h,p,m,v;const{data:b,error:E}=u;if(E)throw E;const _=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(f=n.options)===null||f===void 0?void 0:f.redirectTo,scopes:(h=n.options)===null||h===void 0?void 0:h.scopes,queryParams:(p=n.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await ce(this.fetch,"GET",_,{headers:this.headers,jwt:(v=(m=b.session)===null||m===void 0?void 0:m.access_token)!==null&&v!==void 0?v:void 0})});if(o)throw o;return It()&&!(!((s=n.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:n.provider,url:i?.url},error:null}}catch(i){if(ae(i))return{data:{provider:n.provider,url:null},error:i};throw i}}async linkIdentityIdToken(n){return await this._useSession(async s=>{var i;try{const{error:o,data:{session:u}}=s;if(o)throw o;const{options:f,provider:h,token:p,access_token:m,nonce:v}=n,b=await ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=u?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:h,id_token:p,access_token:m,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:un}),{data:E,error:_}=b;return _?{data:{user:null,session:null},error:_}:!E||!E.session||!E.user?{data:{user:null,session:null},error:new Ua}:(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("USER_UPDATED",E.session)),{data:E,error:_})}catch(o){if(ae(o))return{data:{user:null,session:null},error:o};throw o}})}async unlinkIdentity(n){try{return await this._useSession(async s=>{var i,o;const{data:u,error:f}=s;if(f)throw f;return await ce(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(o=(i=u.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(s){if(ae(s))return{data:null,error:s};throw s}}async _refreshAccessToken(n){const s=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(s,"begin");try{const i=Date.now();return await GE(async o=>(o>0&&await IE(200*Math.pow(2,o-1)),this._debug(s,"refreshing attempt",o),await ce(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:un})),(o,u)=>{const f=200*Math.pow(2,o);return u&&md(u)&&Date.now()+f-i<Ia})}catch(i){if(this._debug(s,"error",i),ae(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(s,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,s){const i=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",s,"url",i),It()&&!s.skipBrowserRedirect&&window.location.assign(i),{data:{provider:n,url:i},error:null}}async _recoverAndRefresh(){var n,s;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const o=await $s(this.storage,this.storageKey);if(o&&this.userStorage){let f=await $s(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:o.user},await Ga(this.userStorage,this.storageKey+"-user",f)),o.user=(n=f?.user)!==null&&n!==void 0?n:pd()}else if(o&&!o.user&&!o.user){const f=await $s(this.storage,this.storageKey+"-user");f&&f?.user?(o.user=f.user,await fs(this.storage,this.storageKey+"-user"),await Ga(this.storage,this.storageKey,o)):o.user=pd()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}const u=((s=o.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<hd;if(this._debug(i,`session has${u?"":" not"} expired with margin of ${hd}s`),u){if(this.autoRefreshToken&&o.refresh_token){const{error:f}=await this._callRefreshToken(o.refresh_token);f&&(console.error(f),md(f)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:h}=await this._getUser(o.access_token);!h&&f?.user?(o.user=f.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(i,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(n){var s,i;if(!n)throw new gs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new xo;const{data:u,error:f}=await this._refreshAccessToken(n);if(f)throw f;if(!u.session)throw new gs;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const h={data:u.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(u){if(this._debug(o,"error",u),ae(u)){const f={data:null,error:u};return md(u)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(f),f}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(u),u}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(n,s,i=!0){const o=`#_notifyAllSubscribers(${n})`;this._debug(o,"begin",s,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:n,session:s});const u=[],f=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(n,s)}catch(p){u.push(p)}});if(await Promise.all(f),u.length>0){for(let h=0;h<u.length;h+=1)console.error(u[h]);throw u[0]}}finally{this._debug(o,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0;const s=Object.assign({},n),i=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&s.user&&await Ga(this.userStorage,this.storageKey+"-user",{user:s.user});const o=Object.assign({},s);delete o.user;const u=fy(o);await Ga(this.storage,this.storageKey,u)}else{const o=fy(s);await Ga(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await fs(this.storage,this.storageKey),await fs(this.storage,this.storageKey+"-code-verifier"),await fs(this.storage,this.storageKey+"-user"),this.userStorage&&await fs(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&It()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),Ia);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async s=>{const{data:{session:i}}=s;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((i.expires_at*1e3-n)/Ia);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Ia}ms, refresh threshold is ${Md} ticks`),o<=Md&&await this._callRefreshToken(i.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof P_)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!It()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const s=`#_onVisibilityChanged(${n})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,s,i){const o=[`provider=${encodeURIComponent(s)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[u,f]=await Ma(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(f)}`});o.push(h.toString())}if(i?.queryParams){const u=new URLSearchParams(i.queryParams);o.push(u.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${n}?${o.join("&")}`}async _unenroll(n){try{return await this._useSession(async s=>{var i;const{data:o,error:u}=s;return u?{data:null,error:u}:await ce(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(s){if(ae(s))return{data:null,error:s};throw s}}async _enroll(n){try{return await this._useSession(async s=>{var i,o;const{data:u,error:f}=s;if(f)return{data:null,error:f};const h=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:p,error:m}=await ce(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(i=u?.session)===null||i===void 0?void 0:i.access_token});return m?{data:null,error:m}:(n.factorType==="totp"&&p.type==="totp"&&(!((o=p?.totp)===null||o===void 0)&&o.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),{data:p,error:null})})}catch(s){if(ae(s))return{data:null,error:s};throw s}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var i;const{data:o,error:u}=s;if(u)return{data:null,error:u};const f=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?_A(n.webauthn.credential_response):vA(n.webauthn.credential_response)})}:{code:n.code}),{data:h,error:p}=await ce(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:f,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return p?{data:null,error:p}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),{data:h,error:p})})}catch(s){if(ae(s))return{data:null,error:s};throw s}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var i;const{data:o,error:u}=s;if(u)return{data:null,error:u};const f=await ce(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});if(f.error)return f;const{data:h}=f;if(h.type!=="webauthn")return{data:h,error:null};switch(h.webauthn.type){case"create":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:pA(h.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:yA(h.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(ae(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(n){const{data:s,error:i}=await this._challenge({factorId:n.factorId});return i?{data:null,error:i}:await this._verify({factorId:n.factorId,challengeId:s.id,code:n.code})}async _listFactors(){var n;const{data:{user:s},error:i}=await this.getUser();if(i)return{data:null,error:i};const o={all:[],phone:[],totp:[],webauthn:[]};for(const u of(n=s?.factors)!==null&&n!==void 0?n:[])o.all.push(u),u.status==="verified"&&o[u.factor_type].push(u);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async n=>{var s,i;const{data:{session:o},error:u}=n;if(u)return{data:null,error:u};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:f}=gd(o.access_token);let h=null;f.aal&&(h=f.aal);let p=h;((i=(s=o.user.factors)===null||s===void 0?void 0:s.filter(b=>b.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(p="aal2");const v=f.amr||[];return{data:{currentLevel:h,nextLevel:p,currentAuthenticationMethods:v},error:null}}))}async fetchJwk(n,s={keys:[]}){let i=s.keys.find(h=>h.kid===n);if(i)return i;const o=Date.now();if(i=this.jwks.keys.find(h=>h.kid===n),i&&this.jwks_cached_at+CE>o)return i;const{data:u,error:f}=await ce(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=o,i=u.keys.find(h=>h.kid===n),!i)?null:i}async getClaims(n,s={}){try{let i=n;if(!i){const{data:_,error:C}=await this.getSession();if(C||!_.session)return{data:null,error:C};i=_.session.access_token}const{header:o,payload:u,signature:f,raw:{header:h,payload:p}}=gd(i);s?.allowExpired||QE(u.exp);const m=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,s?.keys?{keys:s.keys}:s?.jwks);if(!m){const{error:_}=await this.getUser(i);if(_)throw _;return{data:{claims:u,header:o,signature:f},error:null}}const v=ZE(o.alg),b=await crypto.subtle.importKey("jwk",m,v,!0,["verify"]);if(!await crypto.subtle.verify(v,b,f,BE(`${h}.${p}`)))throw new $d("Invalid JWT signature");return{data:{claims:u,header:o,signature:f},error:null}}catch(i){if(ae(i))return{data:null,error:i};throw i}}}pr.nextInstanceID=0;const CA=pr;class RA extends CA{constructor(n){super(n)}}class jA{constructor(n,s,i){var o,u,f;this.supabaseUrl=n,this.supabaseKey=s;const h=EE(n);if(!s)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",h),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",h),this.storageUrl=new URL("storage/v1",h),this.functionsUrl=new URL("functions/v1",h);const p=`sb-${h.hostname.split(".")[0]}-auth-token`,m={db:gE,realtime:yE,auth:Object.assign(Object.assign({},pE),{storageKey:p}),global:mE},v=SE(i??{},m);this.storageKey=(o=v.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(u=v.global.headers)!==null&&u!==void 0?u:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(b,E)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(E)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((f=v.auth)!==null&&f!==void 0?f:{},this.headers,v.global.fetch),this.fetch=bE(s,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.rest=new AS(new URL("rest/v1",h).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),this.storage=new dE(this.storageUrl.href,this.headers,this.fetch,i?.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new gS(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,s={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,s,i)}channel(n,s={config:{}}){return this.realtime.channel(n,s)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var n,s;if(this.accessToken)return await this.accessToken();const{data:i}=await this.auth.getSession();return(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:s,detectSessionInUrl:i,storage:o,userStorage:u,storageKey:f,flowType:h,lock:p,debug:m},v,b){const E={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new RA({url:this.authUrl.href,headers:Object.assign(Object.assign({},E),v),storageKey:f,autoRefreshToken:n,persistSession:s,detectSessionInUrl:i,storage:o,userStorage:u,flowType:h,lock:p,debug:m,fetch:b,hasCustomAuthorizationHeader:Object.keys(this.headers).some(_=>_.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new HS(this.realtimeUrl.href,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,i)=>{this._handleTokenChanged(s,"CLIENT",i?.access_token)})}_handleTokenChanged(n,s,i){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const NA=(r,n,s)=>new jA(r,n,s);function kA(){if(typeof window<"u"||typeof process>"u")return!1;const r=process.version;if(r==null)return!1;const n=r.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}kA()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const DA="https://jurwhwgtshyubmjaphnt.supabase.co",UA="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp1cndod2d0c2h5dWJtamFwaG50Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjEwNzgxNDQsImV4cCI6MjA3NjY1NDE0NH0.JS4p9u3t1AsK-0ZeCGXHFA4jj5TisTY1R5B5KAnj55M",Ce=NA(DA,UA),MA=async r=>{try{console.log("=== DEEPGRAM DIRECT API TEST ==="),console.log("Testing direct API call with URL:",r);const n="dcc873e1d31586926d028b9d530586b7b0e446c0",s=await fetch("https://api.deepgram.com/v1/listen?model=nova-2&smart_format=true&filler_words=true&punctuate=true&language=en-US",{method:"POST",headers:{Authorization:`Token ${n}`,"Content-Type":"application/json"},body:JSON.stringify({url:r})});if(console.log("Deepgram response status:",s.status),!s.ok){const u=await s.text();throw console.error("Deepgram API error:",s.status,u),new Error(`Deepgram API failed: ${s.status} ${u}`)}const i=await s.json();console.log("Deepgram direct API success!",i);const o=i.results.channels[0].alternatives[0];return{text:o.transcript,duration:i.metadata?.duration||0,language:"en",confidence:o.confidence,words:o.words||[]}}catch(n){throw console.error("=== DEEPGRAM DIRECT API ERROR ==="),console.error("Error:",n.message),n}},zA=async r=>{console.log("=== DEEPGRAM TRANSCRIPTION ===");const n="https://static.deepgram.com/examples/Bueller-Life-moves-pretty-fast.wav";try{return console.log("Testing direct API call..."),await MA(n)}catch(s){throw console.log("Direct API failed, checking if it's CORS or other issue..."),new Error(`Direct Deepgram API test failed: ${s.message}`)}};function oe(r,n,s,i,o){if(typeof n=="function"?r!==n||!0:!n.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n.set(r,s),s}function k(r,n,s,i){if(s==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?r!==n||!i:!n.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?i:s==="a"?i.call(r):i?i.value:n.get(r)}let X_=function(){const{crypto:r}=globalThis;if(r?.randomUUID)return X_=r.randomUUID.bind(r),r.randomUUID();const n=new Uint8Array(1),s=r?()=>r.getRandomValues(n)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^s()&15>>+i/4).toString(16))};function Ld(r){return typeof r=="object"&&r!==null&&("name"in r&&r.name==="AbortError"||"message"in r&&String(r.message).includes("FetchRequestCanceledException"))}const qd=r=>{if(r instanceof Error)return r;if(typeof r=="object"&&r!==null){try{if(Object.prototype.toString.call(r)==="[object Error]"){const n=new Error(r.message,r.cause?{cause:r.cause}:{});return r.stack&&(n.stack=r.stack),r.cause&&!n.cause&&(n.cause=r.cause),r.name&&(n.name=r.name),n}}catch{}try{return new Error(JSON.stringify(r))}catch{}}return new Error(r)};class se extends Error{}class gt extends se{constructor(n,s,i,o){super(`${gt.makeMessage(n,s,i)}`),this.status=n,this.headers=o,this.requestID=o?.get("x-request-id"),this.error=s;const u=s;this.code=u?.code,this.param=u?.param,this.type=u?.type}static makeMessage(n,s,i){const o=s?.message?typeof s.message=="string"?s.message:JSON.stringify(s.message):s?JSON.stringify(s):i;return n&&o?`${n} ${o}`:n?`${n} status code (no body)`:o||"(no status code or body)"}static generate(n,s,i,o){if(!n||!o)return new Co({message:i,cause:qd(s)});const u=s?.error;return n===400?new J_(n,u,i,o):n===401?new Q_(n,u,i,o):n===403?new Z_(n,u,i,o):n===404?new W_(n,u,i,o):n===409?new F_(n,u,i,o):n===422?new ev(n,u,i,o):n===429?new tv(n,u,i,o):n>=500?new nv(n,u,i,o):new gt(n,u,i,o)}}class nn extends gt{constructor({message:n}={}){super(void 0,void 0,n||"Request was aborted.",void 0)}}class Co extends gt{constructor({message:n,cause:s}){super(void 0,void 0,n||"Connection error.",void 0),s&&(this.cause=s)}}class cf extends Co{constructor({message:n}={}){super({message:n??"Request timed out."})}}class J_ extends gt{}class Q_ extends gt{}class Z_ extends gt{}class W_ extends gt{}class F_ extends gt{}class ev extends gt{}class tv extends gt{}class nv extends gt{}class sv extends se{constructor(){super("Could not parse response content as the length limit was reached")}}class av extends se{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class Fi extends Error{constructor(n){super(n)}}const BA=/^[a-z][a-z0-9+.-]*:/i,$A=r=>BA.test(r);let Rt=r=>(Rt=Array.isArray,Rt(r)),vy=Rt;function iv(r){return typeof r!="object"?{}:r??{}}function LA(r){if(!r)return!0;for(const n in r)return!1;return!0}function qA(r,n){return Object.prototype.hasOwnProperty.call(r,n)}function _d(r){return r!=null&&typeof r=="object"&&!Array.isArray(r)}const HA=(r,n)=>{if(typeof n!="number"||!Number.isInteger(n))throw new se(`${r} must be an integer`);if(n<0)throw new se(`${r} must be a positive integer`);return n},IA=r=>{try{return JSON.parse(r)}catch{return}},vr=r=>new Promise(n=>setTimeout(n,r)),Va="6.7.0",GA=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function VA(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const PA=()=>{const r=VA();if(r==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Va,"X-Stainless-OS":wy(Deno.build.os),"X-Stainless-Arch":by(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Va,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(r==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Va,"X-Stainless-OS":wy(globalThis.process.platform??"unknown"),"X-Stainless-Arch":by(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const n=YA();return n?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Va,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${n.browser}`,"X-Stainless-Runtime-Version":n.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Va,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function YA(){if(typeof navigator>"u"||!navigator)return null;const r=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:n,pattern:s}of r){const i=s.exec(navigator.userAgent);if(i){const o=i[1]||0,u=i[2]||0,f=i[3]||0;return{browser:n,version:`${o}.${u}.${f}`}}}return null}const by=r=>r==="x32"?"x32":r==="x86_64"||r==="x64"?"x64":r==="arm"?"arm":r==="aarch64"||r==="arm64"?"arm64":r?`other:${r}`:"unknown",wy=r=>(r=r.toLowerCase(),r.includes("ios")?"iOS":r==="android"?"Android":r==="darwin"?"MacOS":r==="win32"?"Windows":r==="freebsd"?"FreeBSD":r==="openbsd"?"OpenBSD":r==="linux"?"Linux":r?`Other:${r}`:"Unknown");let Sy;const KA=()=>Sy??(Sy=PA());function XA(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function rv(...r){const n=globalThis.ReadableStream;if(typeof n>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new n(...r)}function lv(r){let n=Symbol.asyncIterator in r?r[Symbol.asyncIterator]():r[Symbol.iterator]();return rv({start(){},async pull(s){const{done:i,value:o}=await n.next();i?s.close():s.enqueue(o)},async cancel(){await n.return?.()}})}function ov(r){if(r[Symbol.asyncIterator])return r;const n=r.getReader();return{async next(){try{const s=await n.read();return s?.done&&n.releaseLock(),s}catch(s){throw n.releaseLock(),s}},async return(){const s=n.cancel();return n.releaseLock(),await s,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function JA(r){if(r===null||typeof r!="object")return;if(r[Symbol.asyncIterator]){await r[Symbol.asyncIterator]().return?.();return}const n=r.getReader(),s=n.cancel();n.releaseLock(),await s}const QA=({headers:r,body:n})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(n)}),uv="RFC3986",cv=r=>String(r),Ey={RFC1738:r=>String(r).replace(/%20/g,"+"),RFC3986:cv},ZA="RFC1738";let Hd=(r,n)=>(Hd=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),Hd(r,n));const yn=(()=>{const r=[];for(let n=0;n<256;++n)r.push("%"+((n<16?"0":"")+n.toString(16)).toUpperCase());return r})(),vd=1024,WA=(r,n,s,i,o)=>{if(r.length===0)return r;let u=r;if(typeof r=="symbol"?u=Symbol.prototype.toString.call(r):typeof r!="string"&&(u=String(r)),s==="iso-8859-1")return escape(u).replace(/%u[0-9a-f]{4}/gi,function(h){return"%26%23"+parseInt(h.slice(2),16)+"%3B"});let f="";for(let h=0;h<u.length;h+=vd){const p=u.length>=vd?u.slice(h,h+vd):u,m=[];for(let v=0;v<p.length;++v){let b=p.charCodeAt(v);if(b===45||b===46||b===95||b===126||b>=48&&b<=57||b>=65&&b<=90||b>=97&&b<=122||o===ZA&&(b===40||b===41)){m[m.length]=p.charAt(v);continue}if(b<128){m[m.length]=yn[b];continue}if(b<2048){m[m.length]=yn[192|b>>6]+yn[128|b&63];continue}if(b<55296||b>=57344){m[m.length]=yn[224|b>>12]+yn[128|b>>6&63]+yn[128|b&63];continue}v+=1,b=65536+((b&1023)<<10|p.charCodeAt(v)&1023),m[m.length]=yn[240|b>>18]+yn[128|b>>12&63]+yn[128|b>>6&63]+yn[128|b&63]}f+=m.join("")}return f};function FA(r){return!r||typeof r!="object"?!1:!!(r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer(r))}function Ay(r,n){if(Rt(r)){const s=[];for(let i=0;i<r.length;i+=1)s.push(n(r[i]));return s}return n(r)}const dv={brackets(r){return String(r)+"[]"},comma:"comma",indices(r,n){return String(r)+"["+n+"]"},repeat(r){return String(r)}},fv=function(r,n){Array.prototype.push.apply(r,Rt(n)?n:[n])};let Ty;const st={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:WA,encodeValuesOnly:!1,format:uv,formatter:cv,indices:!1,serializeDate(r){return(Ty??(Ty=Function.prototype.call.bind(Date.prototype.toISOString)))(r)},skipNulls:!1,strictNullHandling:!1};function eT(r){return typeof r=="string"||typeof r=="number"||typeof r=="boolean"||typeof r=="symbol"||typeof r=="bigint"}const bd={};function hv(r,n,s,i,o,u,f,h,p,m,v,b,E,_,C,O,N,q){let U=r,B=q,G=0,ee=!1;for(;(B=B.get(bd))!==void 0&&!ee;){const Me=B.get(r);if(G+=1,typeof Me<"u"){if(Me===G)throw new RangeError("Cyclic object value");ee=!0}typeof B.get(bd)>"u"&&(G=0)}if(typeof m=="function"?U=m(n,U):U instanceof Date?U=E?.(U):s==="comma"&&Rt(U)&&(U=Ay(U,function(Me){return Me instanceof Date?E?.(Me):Me})),U===null){if(u)return p&&!O?p(n,st.encoder,N,"key",_):n;U=""}if(eT(U)||FA(U)){if(p){const Me=O?n:p(n,st.encoder,N,"key",_);return[C?.(Me)+"="+C?.(p(U,st.encoder,N,"value",_))]}return[C?.(n)+"="+C?.(String(U))]}const Y=[];if(typeof U>"u")return Y;let P;if(s==="comma"&&Rt(U))O&&p&&(U=Ay(U,p)),P=[{value:U.length>0?U.join(",")||null:void 0}];else if(Rt(m))P=m;else{const Me=Object.keys(U);P=v?Me.sort(v):Me}const he=h?String(n).replace(/\./g,"%2E"):String(n),pe=i&&Rt(U)&&U.length===1?he+"[]":he;if(o&&Rt(U)&&U.length===0)return pe+"[]";for(let Me=0;Me<P.length;++Me){const Oe=P[Me],lt=typeof Oe=="object"&&typeof Oe.value<"u"?Oe.value:U[Oe];if(f&&lt===null)continue;const sn=b&&h?Oe.replace(/\./g,"%2E"):Oe,an=Rt(U)?typeof s=="function"?s(pe,sn):pe:pe+(b?"."+sn:"["+sn+"]");q.set(r,G);const wt=new WeakMap;wt.set(bd,q),fv(Y,hv(lt,an,s,i,o,u,f,h,s==="comma"&&O&&Rt(U)?null:p,m,v,b,E,_,C,O,N,wt))}return Y}function tT(r=st){if(typeof r.allowEmptyArrays<"u"&&typeof r.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof r.encodeDotInKeys<"u"&&typeof r.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(r.encoder!==null&&typeof r.encoder<"u"&&typeof r.encoder!="function")throw new TypeError("Encoder has to be a function.");const n=r.charset||st.charset;if(typeof r.charset<"u"&&r.charset!=="utf-8"&&r.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let s=uv;if(typeof r.format<"u"){if(!Hd(Ey,r.format))throw new TypeError("Unknown format option provided.");s=r.format}const i=Ey[s];let o=st.filter;(typeof r.filter=="function"||Rt(r.filter))&&(o=r.filter);let u;if(r.arrayFormat&&r.arrayFormat in dv?u=r.arrayFormat:"indices"in r?u=r.indices?"indices":"repeat":u=st.arrayFormat,"commaRoundTrip"in r&&typeof r.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const f=typeof r.allowDots>"u"?r.encodeDotInKeys?!0:st.allowDots:!!r.allowDots;return{addQueryPrefix:typeof r.addQueryPrefix=="boolean"?r.addQueryPrefix:st.addQueryPrefix,allowDots:f,allowEmptyArrays:typeof r.allowEmptyArrays=="boolean"?!!r.allowEmptyArrays:st.allowEmptyArrays,arrayFormat:u,charset:n,charsetSentinel:typeof r.charsetSentinel=="boolean"?r.charsetSentinel:st.charsetSentinel,commaRoundTrip:!!r.commaRoundTrip,delimiter:typeof r.delimiter>"u"?st.delimiter:r.delimiter,encode:typeof r.encode=="boolean"?r.encode:st.encode,encodeDotInKeys:typeof r.encodeDotInKeys=="boolean"?r.encodeDotInKeys:st.encodeDotInKeys,encoder:typeof r.encoder=="function"?r.encoder:st.encoder,encodeValuesOnly:typeof r.encodeValuesOnly=="boolean"?r.encodeValuesOnly:st.encodeValuesOnly,filter:o,format:s,formatter:i,serializeDate:typeof r.serializeDate=="function"?r.serializeDate:st.serializeDate,skipNulls:typeof r.skipNulls=="boolean"?r.skipNulls:st.skipNulls,sort:typeof r.sort=="function"?r.sort:null,strictNullHandling:typeof r.strictNullHandling=="boolean"?r.strictNullHandling:st.strictNullHandling}}function nT(r,n={}){let s=r;const i=tT(n);let o,u;typeof i.filter=="function"?(u=i.filter,s=u("",s)):Rt(i.filter)&&(u=i.filter,o=u);const f=[];if(typeof s!="object"||s===null)return"";const h=dv[i.arrayFormat],p=h==="comma"&&i.commaRoundTrip;o||(o=Object.keys(s)),i.sort&&o.sort(i.sort);const m=new WeakMap;for(let E=0;E<o.length;++E){const _=o[E];i.skipNulls&&s[_]===null||fv(f,hv(s[_],_,h,p,i.allowEmptyArrays,i.strictNullHandling,i.skipNulls,i.encodeDotInKeys,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,m))}const v=f.join(i.delimiter);let b=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?b+="utf8=%26%2310003%3B&":b+="utf8=%E2%9C%93&"),v.length>0?b+v:""}function sT(r){let n=0;for(const o of r)n+=o.length;const s=new Uint8Array(n);let i=0;for(const o of r)s.set(o,i),i+=o.length;return s}let Oy;function df(r){let n;return(Oy??(n=new globalThis.TextEncoder,Oy=n.encode.bind(n)))(r)}let xy;function Cy(r){let n;return(xy??(n=new globalThis.TextDecoder,xy=n.decode.bind(n)))(r)}var qt,Ht;class Ro{constructor(){qt.set(this,void 0),Ht.set(this,void 0),oe(this,qt,new Uint8Array),oe(this,Ht,null)}decode(n){if(n==null)return[];const s=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?df(n):n;oe(this,qt,sT([k(this,qt,"f"),s]));const i=[];let o;for(;(o=aT(k(this,qt,"f"),k(this,Ht,"f")))!=null;){if(o.carriage&&k(this,Ht,"f")==null){oe(this,Ht,o.index);continue}if(k(this,Ht,"f")!=null&&(o.index!==k(this,Ht,"f")+1||o.carriage)){i.push(Cy(k(this,qt,"f").subarray(0,k(this,Ht,"f")-1))),oe(this,qt,k(this,qt,"f").subarray(k(this,Ht,"f"))),oe(this,Ht,null);continue}const u=k(this,Ht,"f")!==null?o.preceding-1:o.preceding,f=Cy(k(this,qt,"f").subarray(0,u));i.push(f),oe(this,qt,k(this,qt,"f").subarray(o.index)),oe(this,Ht,null)}return i}flush(){return k(this,qt,"f").length?this.decode(`
`):[]}}qt=new WeakMap,Ht=new WeakMap;Ro.NEWLINE_CHARS=new Set([`
`,"\r"]);Ro.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function aT(r,n){for(let o=n??0;o<r.length;o++){if(r[o]===10)return{preceding:o,index:o+1,carriage:!1};if(r[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function iT(r){for(let i=0;i<r.length-1;i++){if(r[i]===10&&r[i+1]===10||r[i]===13&&r[i+1]===13)return i+2;if(r[i]===13&&r[i+1]===10&&i+3<r.length&&r[i+2]===13&&r[i+3]===10)return i+4}return-1}const yo={off:0,error:200,warn:300,info:400,debug:500},Ry=(r,n,s)=>{if(r){if(qA(yo,r))return r;ht(s).warn(`${n} was set to ${JSON.stringify(r)}, expected one of ${JSON.stringify(Object.keys(yo))}`)}};function er(){}function Jl(r,n,s){return!n||yo[r]>yo[s]?er:n[r].bind(n)}const rT={error:er,warn:er,info:er,debug:er};let jy=new WeakMap;function ht(r){const n=r.logger,s=r.logLevel??"off";if(!n)return rT;const i=jy.get(n);if(i&&i[0]===s)return i[1];const o={error:Jl("error",n,s),warn:Jl("warn",n,s),info:Jl("info",n,s),debug:Jl("debug",n,s)};return jy.set(n,[s,o]),o}const qs=r=>(r.options&&(r.options={...r.options},delete r.options.headers),r.headers&&(r.headers=Object.fromEntries((r.headers instanceof Headers?[...r.headers]:Object.entries(r.headers)).map(([n,s])=>[n,n.toLowerCase()==="authorization"||n.toLowerCase()==="cookie"||n.toLowerCase()==="set-cookie"?"***":s]))),"retryOfRequestLogID"in r&&(r.retryOfRequestLogID&&(r.retryOf=r.retryOfRequestLogID),delete r.retryOfRequestLogID),r);var Zi;class vn{constructor(n,s,i){this.iterator=n,Zi.set(this,void 0),this.controller=s,oe(this,Zi,i)}static fromSSEResponse(n,s,i){let o=!1;const u=i?ht(i):console;async function*f(){if(o)throw new se("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let h=!1;try{for await(const p of lT(n,s))if(!h){if(p.data.startsWith("[DONE]")){h=!0;continue}if(p.event===null||!p.event.startsWith("thread.")){let m;try{m=JSON.parse(p.data)}catch(v){throw u.error("Could not parse message into JSON:",p.data),u.error("From chunk:",p.raw),v}if(m&&m.error)throw new gt(void 0,m.error,void 0,n.headers);yield m}else{let m;try{m=JSON.parse(p.data)}catch(v){throw console.error("Could not parse message into JSON:",p.data),console.error("From chunk:",p.raw),v}if(p.event=="error")throw new gt(void 0,m.error,m.message,void 0);yield{event:p.event,data:m}}}h=!0}catch(p){if(Ld(p))return;throw p}finally{h||s.abort()}}return new vn(f,s,i)}static fromReadableStream(n,s,i){let o=!1;async function*u(){const h=new Ro,p=ov(n);for await(const m of p)for(const v of h.decode(m))yield v;for(const m of h.flush())yield m}async function*f(){if(o)throw new se("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let h=!1;try{for await(const p of u())h||p&&(yield JSON.parse(p));h=!0}catch(p){if(Ld(p))return;throw p}finally{h||s.abort()}}return new vn(f,s,i)}[(Zi=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const n=[],s=[],i=this.iterator(),o=u=>({next:()=>{if(u.length===0){const f=i.next();n.push(f),s.push(f)}return u.shift()}});return[new vn(()=>o(n),this.controller,k(this,Zi,"f")),new vn(()=>o(s),this.controller,k(this,Zi,"f"))]}toReadableStream(){const n=this;let s;return rv({async start(){s=n[Symbol.asyncIterator]()},async pull(i){try{const{value:o,done:u}=await s.next();if(u)return i.close();const f=df(JSON.stringify(o)+`
`);i.enqueue(f)}catch(o){i.error(o)}},async cancel(){await s.return?.()}})}}async function*lT(r,n){if(!r.body)throw n.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new se("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new se("Attempted to iterate over a response with no body");const s=new uT,i=new Ro,o=ov(r.body);for await(const u of oT(o))for(const f of i.decode(u)){const h=s.decode(f);h&&(yield h)}for(const u of i.flush()){const f=s.decode(u);f&&(yield f)}}async function*oT(r){let n=new Uint8Array;for await(const s of r){if(s==null)continue;const i=s instanceof ArrayBuffer?new Uint8Array(s):typeof s=="string"?df(s):s;let o=new Uint8Array(n.length+i.length);o.set(n),o.set(i,n.length),n=o;let u;for(;(u=iT(n))!==-1;)yield n.slice(0,u),n=n.slice(u)}n.length>0&&(yield n)}class uT{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(n){if(n.endsWith("\r")&&(n=n.substring(0,n.length-1)),!n){if(!this.event&&!this.data.length)return null;const u={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],u}if(this.chunks.push(n),n.startsWith(":"))return null;let[s,i,o]=cT(n,":");return o.startsWith(" ")&&(o=o.substring(1)),s==="event"?this.event=o:s==="data"&&this.data.push(o),null}}function cT(r,n){const s=r.indexOf(n);return s!==-1?[r.substring(0,s),n,r.substring(s+n.length)]:[r,"",""]}async function mv(r,n){const{response:s,requestLogID:i,retryOfRequestLogID:o,startTime:u}=n,f=await(async()=>{if(n.options.stream)return ht(r).debug("response",s.status,s.url,s.headers,s.body),n.options.__streamClass?n.options.__streamClass.fromSSEResponse(s,n.controller,r):vn.fromSSEResponse(s,n.controller,r);if(s.status===204)return null;if(n.options.__binaryResponse)return s;const p=s.headers.get("content-type")?.split(";")[0]?.trim();if(p?.includes("application/json")||p?.endsWith("+json")){const b=await s.json();return gv(b,s)}return await s.text()})();return ht(r).debug(`[${i}] response parsed`,qs({retryOfRequestLogID:o,url:s.url,status:s.status,body:f,durationMs:Date.now()-u})),f}function gv(r,n){return!r||typeof r!="object"||Array.isArray(r)?r:Object.defineProperty(r,"_request_id",{value:n.headers.get("x-request-id"),enumerable:!1})}var tr;class jo extends Promise{constructor(n,s,i=mv){super(o=>{o(null)}),this.responsePromise=s,this.parseResponse=i,tr.set(this,void 0),oe(this,tr,n)}_thenUnwrap(n){return new jo(k(this,tr,"f"),this.responsePromise,async(s,i)=>gv(n(await this.parseResponse(s,i),i),i.response))}asResponse(){return this.responsePromise.then(n=>n.response)}async withResponse(){const[n,s]=await Promise.all([this.parse(),this.asResponse()]);return{data:n,response:s,request_id:s.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(n=>this.parseResponse(k(this,tr,"f"),n))),this.parsedPromise}then(n,s){return this.parse().then(n,s)}catch(n){return this.parse().catch(n)}finally(n){return this.parse().finally(n)}}tr=new WeakMap;var Ql;class ff{constructor(n,s,i,o){Ql.set(this,void 0),oe(this,Ql,n),this.options=o,this.response=s,this.body=i}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const n=this.nextPageRequestOptions();if(!n)throw new se("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await k(this,Ql,"f").requestAPIList(this.constructor,n)}async*iterPages(){let n=this;for(yield n;n.hasNextPage();)n=await n.getNextPage(),yield n}async*[(Ql=new WeakMap,Symbol.asyncIterator)](){for await(const n of this.iterPages())for(const s of n.getPaginatedItems())yield s}}class dT extends jo{constructor(n,s,i){super(n,s,async(o,u)=>new i(o,u.response,await mv(o,u),u.options))}async*[Symbol.asyncIterator](){const n=await this;for await(const s of n)yield s}}class No extends ff{constructor(n,s,i,o){super(n,s,i,o),this.data=i.data||[],this.object=i.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class Fe extends ff{constructor(n,s,i,o){super(n,s,i,o),this.data=i.data||[],this.has_more=i.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const n=this.getPaginatedItems(),s=n[n.length-1]?.id;return s?{...this.options,query:{...iv(this.options.query),after:s}}:null}}class _o extends ff{constructor(n,s,i,o){super(n,s,i,o),this.data=i.data||[],this.has_more=i.has_more||!1,this.last_id=i.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const n=this.last_id;return n?{...this.options,query:{...iv(this.options.query),after:n}}:null}}const pv=()=>{if(typeof File>"u"){const{process:r}=globalThis,n=typeof r?.versions?.node=="string"&&parseInt(r.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function dr(r,n,s){return pv(),new File(r,n??"unknown_file",s)}function no(r){return(typeof r=="object"&&r!==null&&("name"in r&&r.name&&String(r.name)||"url"in r&&r.url&&String(r.url)||"filename"in r&&r.filename&&String(r.filename)||"path"in r&&r.path&&String(r.path))||"").split(/[\\/]/).pop()||void 0}const hf=r=>r!=null&&typeof r=="object"&&typeof r[Symbol.asyncIterator]=="function",Ny=async(r,n)=>Id(r.body)?{...r,body:await yv(r.body,n)}:r,Xs=async(r,n)=>({...r,body:await yv(r.body,n)}),ky=new WeakMap;function fT(r){const n=typeof r=="function"?r:r.fetch,s=ky.get(n);if(s)return s;const i=(async()=>{try{const o="Response"in n?n.Response:(await n("data:,")).constructor,u=new FormData;return u.toString()!==await new o(u).text()}catch{return!0}})();return ky.set(n,i),i}const yv=async(r,n)=>{if(!await fT(n))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const s=new FormData;return await Promise.all(Object.entries(r||{}).map(([i,o])=>Gd(s,i,o))),s},_v=r=>r instanceof Blob&&"name"in r,hT=r=>typeof r=="object"&&r!==null&&(r instanceof Response||hf(r)||_v(r)),Id=r=>{if(hT(r))return!0;if(Array.isArray(r))return r.some(Id);if(r&&typeof r=="object"){for(const n in r)if(Id(r[n]))return!0}return!1},Gd=async(r,n,s)=>{if(s!==void 0){if(s==null)throw new TypeError(`Received null for "${n}"; to pass null in FormData, you must use the string 'null'`);if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")r.append(n,String(s));else if(s instanceof Response)r.append(n,dr([await s.blob()],no(s)));else if(hf(s))r.append(n,dr([await new Response(lv(s)).blob()],no(s)));else if(_v(s))r.append(n,s,no(s));else if(Array.isArray(s))await Promise.all(s.map(i=>Gd(r,n+"[]",i)));else if(typeof s=="object")await Promise.all(Object.entries(s).map(([i,o])=>Gd(r,`${n}[${i}]`,o)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${s} instead`)}},vv=r=>r!=null&&typeof r=="object"&&typeof r.size=="number"&&typeof r.type=="string"&&typeof r.text=="function"&&typeof r.slice=="function"&&typeof r.arrayBuffer=="function",mT=r=>r!=null&&typeof r=="object"&&typeof r.name=="string"&&typeof r.lastModified=="number"&&vv(r),gT=r=>r!=null&&typeof r=="object"&&typeof r.url=="string"&&typeof r.blob=="function";async function pT(r,n,s){if(pv(),r=await r,mT(r))return r instanceof File?r:dr([await r.arrayBuffer()],r.name);if(gT(r)){const o=await r.blob();return n||(n=new URL(r.url).pathname.split(/[\\/]/).pop()),dr(await Vd(o),n,s)}const i=await Vd(r);if(n||(n=no(r)),!s?.type){const o=i.find(u=>typeof u=="object"&&"type"in u&&u.type);typeof o=="string"&&(s={...s,type:o})}return dr(i,n,s)}async function Vd(r){let n=[];if(typeof r=="string"||ArrayBuffer.isView(r)||r instanceof ArrayBuffer)n.push(r);else if(vv(r))n.push(r instanceof Blob?r:await r.arrayBuffer());else if(hf(r))for await(const s of r)n.push(...await Vd(s));else{const s=r?.constructor?.name;throw new Error(`Unexpected data type: ${typeof r}${s?`; constructor: ${s}`:""}${yT(r)}`)}return n}function yT(r){return typeof r!="object"||r===null?"":`; props: [${Object.getOwnPropertyNames(r).map(s=>`"${s}"`).join(", ")}]`}class te{constructor(n){this._client=n}}function bv(r){return r.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Dy=Object.freeze(Object.create(null)),_T=(r=bv)=>function(s,...i){if(s.length===1)return s[0];let o=!1;const u=[],f=s.reduce((v,b,E)=>{/[?#]/.test(b)&&(o=!0);const _=i[E];let C=(o?encodeURIComponent:r)(""+_);return E!==i.length&&(_==null||typeof _=="object"&&_.toString===Object.getPrototypeOf(Object.getPrototypeOf(_.hasOwnProperty??Dy)??Dy)?.toString)&&(C=_+"",u.push({start:v.length+b.length,length:C.length,error:`Value of type ${Object.prototype.toString.call(_).slice(8,-1)} is not a valid path parameter`})),v+b+(E===i.length?"":C)},""),h=f.split(/[?#]/,1)[0],p=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=p.exec(h))!==null;)u.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(u.sort((v,b)=>v.start-b.start),u.length>0){let v=0;const b=u.reduce((E,_)=>{const C=" ".repeat(_.start-v),O="^".repeat(_.length);return v=_.start+_.length,E+C+O},"");throw new se(`Path parameters result in path with invalid segments:
${u.map(E=>E.error).join(`
`)}
${f}
${b}`)}return f},V=_T(bv);let wv=class extends te{list(n,s={},i){return this._client.getAPIList(V`/chat/completions/${n}/messages`,Fe,{query:s,...i})}};function vo(r){return r!==void 0&&"function"in r&&r.function!==void 0}function mf(r){return r?.$brand==="auto-parseable-response-format"}function br(r){return r?.$brand==="auto-parseable-tool"}function vT(r,n){return!n||!Sv(n)?{...r,choices:r.choices.map(s=>(Ev(s.message.tool_calls),{...s,message:{...s.message,parsed:null,...s.message.tool_calls?{tool_calls:s.message.tool_calls}:void 0}}))}:gf(r,n)}function gf(r,n){const s=r.choices.map(i=>{if(i.finish_reason==="length")throw new sv;if(i.finish_reason==="content_filter")throw new av;return Ev(i.message.tool_calls),{...i,message:{...i.message,...i.message.tool_calls?{tool_calls:i.message.tool_calls?.map(o=>wT(n,o))??void 0}:void 0,parsed:i.message.content&&!i.message.refusal?bT(n,i.message.content):null}}});return{...r,choices:s}}function bT(r,n){return r.response_format?.type!=="json_schema"?null:r.response_format?.type==="json_schema"?"$parseRaw"in r.response_format?r.response_format.$parseRaw(n):JSON.parse(n):null}function wT(r,n){const s=r.tools?.find(i=>vo(i)&&i.function?.name===n.function.name);return{...n,function:{...n.function,parsed_arguments:br(s)?s.$parseRaw(n.function.arguments):s?.function.strict?JSON.parse(n.function.arguments):null}}}function ST(r,n){if(!r||!("tools"in r)||!r.tools)return!1;const s=r.tools?.find(i=>vo(i)&&i.function?.name===n.function.name);return vo(s)&&(br(s)||s?.function.strict||!1)}function Sv(r){return mf(r.response_format)?!0:r.tools?.some(n=>br(n)||n.type==="function"&&n.function.strict===!0)??!1}function Ev(r){for(const n of r||[])if(n.type!=="function")throw new se(`Currently only \`function\` tool calls are supported; Received \`${n.type}\``)}function ET(r){for(const n of r??[]){if(n.type!=="function")throw new se(`Currently only \`function\` tool types support auto-parsing; Received \`${n.type}\``);if(n.function.strict!==!0)throw new se(`The \`${n.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const bo=r=>r?.role==="assistant",Av=r=>r?.role==="tool";var Pd,so,ao,nr,sr,io,ar,Ln,ir,wo,So,Pa,Tv;class pf{constructor(){Pd.add(this),this.controller=new AbortController,so.set(this,void 0),ao.set(this,()=>{}),nr.set(this,()=>{}),sr.set(this,void 0),io.set(this,()=>{}),ar.set(this,()=>{}),Ln.set(this,{}),ir.set(this,!1),wo.set(this,!1),So.set(this,!1),Pa.set(this,!1),oe(this,so,new Promise((n,s)=>{oe(this,ao,n,"f"),oe(this,nr,s,"f")})),oe(this,sr,new Promise((n,s)=>{oe(this,io,n,"f"),oe(this,ar,s,"f")})),k(this,so,"f").catch(()=>{}),k(this,sr,"f").catch(()=>{})}_run(n){setTimeout(()=>{n().then(()=>{this._emitFinal(),this._emit("end")},k(this,Pd,"m",Tv).bind(this))},0)}_connected(){this.ended||(k(this,ao,"f").call(this),this._emit("connect"))}get ended(){return k(this,ir,"f")}get errored(){return k(this,wo,"f")}get aborted(){return k(this,So,"f")}abort(){this.controller.abort()}on(n,s){return(k(this,Ln,"f")[n]||(k(this,Ln,"f")[n]=[])).push({listener:s}),this}off(n,s){const i=k(this,Ln,"f")[n];if(!i)return this;const o=i.findIndex(u=>u.listener===s);return o>=0&&i.splice(o,1),this}once(n,s){return(k(this,Ln,"f")[n]||(k(this,Ln,"f")[n]=[])).push({listener:s,once:!0}),this}emitted(n){return new Promise((s,i)=>{oe(this,Pa,!0),n!=="error"&&this.once("error",i),this.once(n,s)})}async done(){oe(this,Pa,!0),await k(this,sr,"f")}_emit(n,...s){if(k(this,ir,"f"))return;n==="end"&&(oe(this,ir,!0),k(this,io,"f").call(this));const i=k(this,Ln,"f")[n];if(i&&(k(this,Ln,"f")[n]=i.filter(o=>!o.once),i.forEach(({listener:o})=>o(...s))),n==="abort"){const o=s[0];!k(this,Pa,"f")&&!i?.length&&Promise.reject(o),k(this,nr,"f").call(this,o),k(this,ar,"f").call(this,o),this._emit("end");return}if(n==="error"){const o=s[0];!k(this,Pa,"f")&&!i?.length&&Promise.reject(o),k(this,nr,"f").call(this,o),k(this,ar,"f").call(this,o),this._emit("end")}}_emitFinal(){}}so=new WeakMap,ao=new WeakMap,nr=new WeakMap,sr=new WeakMap,io=new WeakMap,ar=new WeakMap,Ln=new WeakMap,ir=new WeakMap,wo=new WeakMap,So=new WeakMap,Pa=new WeakMap,Pd=new WeakSet,Tv=function(n){if(oe(this,wo,!0),n instanceof Error&&n.name==="AbortError"&&(n=new nn),n instanceof nn)return oe(this,So,!0),this._emit("abort",n);if(n instanceof se)return this._emit("error",n);if(n instanceof Error){const s=new se(n.message);return s.cause=n,this._emit("error",s)}return this._emit("error",new se(String(n)))};function AT(r){return typeof r.parse=="function"}var bt,Yd,Eo,Kd,Xd,Jd,Ov,xv;const TT=10;class Cv extends pf{constructor(){super(...arguments),bt.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(n){this._chatCompletions.push(n),this._emit("chatCompletion",n);const s=n.choices[0]?.message;return s&&this._addMessage(s),n}_addMessage(n,s=!0){if("content"in n||(n.content=null),this.messages.push(n),s){if(this._emit("message",n),Av(n)&&n.content)this._emit("functionToolCallResult",n.content);else if(bo(n)&&n.tool_calls)for(const i of n.tool_calls)i.type==="function"&&this._emit("functionToolCall",i.function)}}async finalChatCompletion(){await this.done();const n=this._chatCompletions[this._chatCompletions.length-1];if(!n)throw new se("stream ended without producing a ChatCompletion");return n}async finalContent(){return await this.done(),k(this,bt,"m",Yd).call(this)}async finalMessage(){return await this.done(),k(this,bt,"m",Eo).call(this)}async finalFunctionToolCall(){return await this.done(),k(this,bt,"m",Kd).call(this)}async finalFunctionToolCallResult(){return await this.done(),k(this,bt,"m",Xd).call(this)}async totalUsage(){return await this.done(),k(this,bt,"m",Jd).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const n=this._chatCompletions[this._chatCompletions.length-1];n&&this._emit("finalChatCompletion",n);const s=k(this,bt,"m",Eo).call(this);s&&this._emit("finalMessage",s);const i=k(this,bt,"m",Yd).call(this);i&&this._emit("finalContent",i);const o=k(this,bt,"m",Kd).call(this);o&&this._emit("finalFunctionToolCall",o);const u=k(this,bt,"m",Xd).call(this);u!=null&&this._emit("finalFunctionToolCallResult",u),this._chatCompletions.some(f=>f.usage)&&this._emit("totalUsage",k(this,bt,"m",Jd).call(this))}async _createChatCompletion(n,s,i){const o=i?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),k(this,bt,"m",Ov).call(this,s);const u=await n.chat.completions.create({...s,stream:!1},{...i,signal:this.controller.signal});return this._connected(),this._addChatCompletion(gf(u,s))}async _runChatCompletion(n,s,i){for(const o of s.messages)this._addMessage(o,!1);return await this._createChatCompletion(n,s,i)}async _runTools(n,s,i){const o="tool",{tool_choice:u="auto",stream:f,...h}=s,p=typeof u!="string"&&u.type==="function"&&u?.function?.name,{maxChatCompletions:m=TT}=i||{},v=s.tools.map(_=>{if(br(_)){if(!_.$callback)throw new se("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:_.$callback,name:_.function.name,description:_.function.description||"",parameters:_.function.parameters,parse:_.$parseRaw,strict:!0}}}return _}),b={};for(const _ of v)_.type==="function"&&(b[_.function.name||_.function.function.name]=_.function);const E="tools"in s?v.map(_=>_.type==="function"?{type:"function",function:{name:_.function.name||_.function.function.name,parameters:_.function.parameters,description:_.function.description,strict:_.function.strict}}:_):void 0;for(const _ of s.messages)this._addMessage(_,!1);for(let _=0;_<m;++_){const O=(await this._createChatCompletion(n,{...h,tool_choice:u,tools:E,messages:[...this.messages]},i)).choices[0]?.message;if(!O)throw new se("missing message in ChatCompletion response");if(!O.tool_calls?.length)return;for(const N of O.tool_calls){if(N.type!=="function")continue;const q=N.id,{name:U,arguments:B}=N.function,G=b[U];if(G){if(p&&p!==U){const he=`Invalid tool_call: ${JSON.stringify(U)}. ${JSON.stringify(p)} requested. Please try again`;this._addMessage({role:o,tool_call_id:q,content:he});continue}}else{const he=`Invalid tool_call: ${JSON.stringify(U)}. Available options are: ${Object.keys(b).map(pe=>JSON.stringify(pe)).join(", ")}. Please try again`;this._addMessage({role:o,tool_call_id:q,content:he});continue}let ee;try{ee=AT(G)?await G.parse(B):B}catch(he){const pe=he instanceof Error?he.message:String(he);this._addMessage({role:o,tool_call_id:q,content:pe});continue}const Y=await G.function(ee,this),P=k(this,bt,"m",xv).call(this,Y);if(this._addMessage({role:o,tool_call_id:q,content:P}),p)return}}}}bt=new WeakSet,Yd=function(){return k(this,bt,"m",Eo).call(this).content??null},Eo=function(){let n=this.messages.length;for(;n-- >0;){const s=this.messages[n];if(bo(s))return{...s,content:s.content??null,refusal:s.refusal??null}}throw new se("stream ended without producing a ChatCompletionMessage with role=assistant")},Kd=function(){for(let n=this.messages.length-1;n>=0;n--){const s=this.messages[n];if(bo(s)&&s?.tool_calls?.length)return s.tool_calls.filter(i=>i.type==="function").at(-1)?.function}},Xd=function(){for(let n=this.messages.length-1;n>=0;n--){const s=this.messages[n];if(Av(s)&&s.content!=null&&typeof s.content=="string"&&this.messages.some(i=>i.role==="assistant"&&i.tool_calls?.some(o=>o.type==="function"&&o.id===s.tool_call_id)))return s.content}},Jd=function(){const n={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:s}of this._chatCompletions)s&&(n.completion_tokens+=s.completion_tokens,n.prompt_tokens+=s.prompt_tokens,n.total_tokens+=s.total_tokens);return n},Ov=function(n){if(n.n!=null&&n.n>1)throw new se("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},xv=function(n){return typeof n=="string"?n:n===void 0?"undefined":JSON.stringify(n)};class yf extends Cv{static runTools(n,s,i){const o=new yf,u={...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"runTools"}};return o._run(()=>o._runTools(n,s,u)),o}_addMessage(n,s=!0){super._addMessage(n,s),bo(n)&&n.content&&this._emit("content",n.content)}}const Rv=1,jv=2,Nv=4,kv=8,Dv=16,Uv=32,Mv=64,zv=128,Bv=256,$v=zv|Bv,Lv=Dv|Uv|$v|Mv,qv=Rv|jv|Lv,Hv=Nv|kv,OT=qv|Hv,rt={STR:Rv,NUM:jv,ARR:Nv,OBJ:kv,NULL:Dv,BOOL:Uv,NAN:Mv,INFINITY:zv,MINUS_INFINITY:Bv,INF:$v,SPECIAL:Lv,ATOM:qv,COLLECTION:Hv,ALL:OT};class xT extends Error{}class CT extends Error{}function RT(r,n=rt.ALL){if(typeof r!="string")throw new TypeError(`expecting str, got ${typeof r}`);if(!r.trim())throw new Error(`${r} is empty`);return jT(r.trim(),n)}const jT=(r,n)=>{const s=r.length;let i=0;const o=E=>{throw new xT(`${E} at position ${i}`)},u=E=>{throw new CT(`${E} at position ${i}`)},f=()=>(b(),i>=s&&o("Unexpected end of input"),r[i]==='"'?h():r[i]==="{"?p():r[i]==="["?m():r.substring(i,i+4)==="null"||rt.NULL&n&&s-i<4&&"null".startsWith(r.substring(i))?(i+=4,null):r.substring(i,i+4)==="true"||rt.BOOL&n&&s-i<4&&"true".startsWith(r.substring(i))?(i+=4,!0):r.substring(i,i+5)==="false"||rt.BOOL&n&&s-i<5&&"false".startsWith(r.substring(i))?(i+=5,!1):r.substring(i,i+8)==="Infinity"||rt.INFINITY&n&&s-i<8&&"Infinity".startsWith(r.substring(i))?(i+=8,1/0):r.substring(i,i+9)==="-Infinity"||rt.MINUS_INFINITY&n&&1<s-i&&s-i<9&&"-Infinity".startsWith(r.substring(i))?(i+=9,-1/0):r.substring(i,i+3)==="NaN"||rt.NAN&n&&s-i<3&&"NaN".startsWith(r.substring(i))?(i+=3,NaN):v()),h=()=>{const E=i;let _=!1;for(i++;i<s&&(r[i]!=='"'||_&&r[i-1]==="\\");)_=r[i]==="\\"?!_:!1,i++;if(r.charAt(i)=='"')try{return JSON.parse(r.substring(E,++i-Number(_)))}catch(C){u(String(C))}else if(rt.STR&n)try{return JSON.parse(r.substring(E,i-Number(_))+'"')}catch{return JSON.parse(r.substring(E,r.lastIndexOf("\\"))+'"')}o("Unterminated string literal")},p=()=>{i++,b();const E={};try{for(;r[i]!=="}";){if(b(),i>=s&&rt.OBJ&n)return E;const _=h();b(),i++;try{const C=f();Object.defineProperty(E,_,{value:C,writable:!0,enumerable:!0,configurable:!0})}catch(C){if(rt.OBJ&n)return E;throw C}b(),r[i]===","&&i++}}catch{if(rt.OBJ&n)return E;o("Expected '}' at end of object")}return i++,E},m=()=>{i++;const E=[];try{for(;r[i]!=="]";)E.push(f()),b(),r[i]===","&&i++}catch{if(rt.ARR&n)return E;o("Expected ']' at end of array")}return i++,E},v=()=>{if(i===0){r==="-"&&rt.NUM&n&&o("Not sure what '-' is");try{return JSON.parse(r)}catch(_){if(rt.NUM&n)try{return r[r.length-1]==="."?JSON.parse(r.substring(0,r.lastIndexOf("."))):JSON.parse(r.substring(0,r.lastIndexOf("e")))}catch{}u(String(_))}}const E=i;for(r[i]==="-"&&i++;r[i]&&!",]}".includes(r[i]);)i++;i==s&&!(rt.NUM&n)&&o("Unterminated number literal");try{return JSON.parse(r.substring(E,i))}catch{r.substring(E,i)==="-"&&rt.NUM&n&&o("Not sure what '-' is");try{return JSON.parse(r.substring(E,r.lastIndexOf("e")))}catch(C){u(String(C))}}},b=()=>{for(;i<s&&` 
\r	`.includes(r[i]);)i++};return f()},Uy=r=>RT(r,rt.ALL^rt.NUM);var tt,$n,La,hs,wd,Zl,Sd,Ed,Ad,Wl,Td,My;class yr extends Cv{constructor(n){super(),tt.add(this),$n.set(this,void 0),La.set(this,void 0),hs.set(this,void 0),oe(this,$n,n),oe(this,La,[])}get currentChatCompletionSnapshot(){return k(this,hs,"f")}static fromReadableStream(n){const s=new yr(null);return s._run(()=>s._fromReadableStream(n)),s}static createChatCompletion(n,s,i){const o=new yr(s);return o._run(()=>o._runChatCompletion(n,{...s,stream:!0},{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createChatCompletion(n,s,i){super._createChatCompletion;const o=i?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),k(this,tt,"m",wd).call(this);const u=await n.chat.completions.create({...s,stream:!0},{...i,signal:this.controller.signal});this._connected();for await(const f of u)k(this,tt,"m",Sd).call(this,f);if(u.controller.signal?.aborted)throw new nn;return this._addChatCompletion(k(this,tt,"m",Wl).call(this))}async _fromReadableStream(n,s){const i=s?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),k(this,tt,"m",wd).call(this),this._connected();const o=vn.fromReadableStream(n,this.controller);let u;for await(const f of o)u&&u!==f.id&&this._addChatCompletion(k(this,tt,"m",Wl).call(this)),k(this,tt,"m",Sd).call(this,f),u=f.id;if(o.controller.signal?.aborted)throw new nn;return this._addChatCompletion(k(this,tt,"m",Wl).call(this))}[($n=new WeakMap,La=new WeakMap,hs=new WeakMap,tt=new WeakSet,wd=function(){this.ended||oe(this,hs,void 0)},Zl=function(s){let i=k(this,La,"f")[s.index];return i||(i={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},k(this,La,"f")[s.index]=i,i)},Sd=function(s){if(this.ended)return;const i=k(this,tt,"m",My).call(this,s);this._emit("chunk",s,i);for(const o of s.choices){const u=i.choices[o.index];o.delta.content!=null&&u.message?.role==="assistant"&&u.message?.content&&(this._emit("content",o.delta.content,u.message.content),this._emit("content.delta",{delta:o.delta.content,snapshot:u.message.content,parsed:u.message.parsed})),o.delta.refusal!=null&&u.message?.role==="assistant"&&u.message?.refusal&&this._emit("refusal.delta",{delta:o.delta.refusal,snapshot:u.message.refusal}),o.logprobs?.content!=null&&u.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:o.logprobs?.content,snapshot:u.logprobs?.content??[]}),o.logprobs?.refusal!=null&&u.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:o.logprobs?.refusal,snapshot:u.logprobs?.refusal??[]});const f=k(this,tt,"m",Zl).call(this,u);u.finish_reason&&(k(this,tt,"m",Ad).call(this,u),f.current_tool_call_index!=null&&k(this,tt,"m",Ed).call(this,u,f.current_tool_call_index));for(const h of o.delta.tool_calls??[])f.current_tool_call_index!==h.index&&(k(this,tt,"m",Ad).call(this,u),f.current_tool_call_index!=null&&k(this,tt,"m",Ed).call(this,u,f.current_tool_call_index)),f.current_tool_call_index=h.index;for(const h of o.delta.tool_calls??[]){const p=u.message.tool_calls?.[h.index];p?.type&&(p?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:p.function?.name,index:h.index,arguments:p.function.arguments,parsed_arguments:p.function.parsed_arguments,arguments_delta:h.function?.arguments??""}):(p?.type,void 0))}}},Ed=function(s,i){if(k(this,tt,"m",Zl).call(this,s).done_tool_calls.has(i))return;const u=s.message.tool_calls?.[i];if(!u)throw new Error("no tool call snapshot");if(!u.type)throw new Error("tool call snapshot missing `type`");if(u.type==="function"){const f=k(this,$n,"f")?.tools?.find(h=>vo(h)&&h.function.name===u.function.name);this._emit("tool_calls.function.arguments.done",{name:u.function.name,index:i,arguments:u.function.arguments,parsed_arguments:br(f)?f.$parseRaw(u.function.arguments):f?.function.strict?JSON.parse(u.function.arguments):null})}else u.type},Ad=function(s){const i=k(this,tt,"m",Zl).call(this,s);if(s.message.content&&!i.content_done){i.content_done=!0;const o=k(this,tt,"m",Td).call(this);this._emit("content.done",{content:s.message.content,parsed:o?o.$parseRaw(s.message.content):null})}s.message.refusal&&!i.refusal_done&&(i.refusal_done=!0,this._emit("refusal.done",{refusal:s.message.refusal})),s.logprobs?.content&&!i.logprobs_content_done&&(i.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:s.logprobs.content})),s.logprobs?.refusal&&!i.logprobs_refusal_done&&(i.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:s.logprobs.refusal}))},Wl=function(){if(this.ended)throw new se("stream has ended, this shouldn't happen");const s=k(this,hs,"f");if(!s)throw new se("request ended without sending any chunks");return oe(this,hs,void 0),oe(this,La,[]),NT(s,k(this,$n,"f"))},Td=function(){const s=k(this,$n,"f")?.response_format;return mf(s)?s:null},My=function(s){var i,o,u,f;let h=k(this,hs,"f");const{choices:p,...m}=s;h?Object.assign(h,m):h=oe(this,hs,{...m,choices:[]});for(const{delta:v,finish_reason:b,index:E,logprobs:_=null,...C}of s.choices){let O=h.choices[E];if(O||(O=h.choices[E]={finish_reason:b,index:E,message:{},logprobs:_,...C}),_)if(!O.logprobs)O.logprobs=Object.assign({},_);else{const{content:Y,refusal:P,...he}=_;Object.assign(O.logprobs,he),Y&&((i=O.logprobs).content??(i.content=[]),O.logprobs.content.push(...Y)),P&&((o=O.logprobs).refusal??(o.refusal=[]),O.logprobs.refusal.push(...P))}if(b&&(O.finish_reason=b,k(this,$n,"f")&&Sv(k(this,$n,"f")))){if(b==="length")throw new sv;if(b==="content_filter")throw new av}if(Object.assign(O,C),!v)continue;const{content:N,refusal:q,function_call:U,role:B,tool_calls:G,...ee}=v;if(Object.assign(O.message,ee),q&&(O.message.refusal=(O.message.refusal||"")+q),B&&(O.message.role=B),U&&(O.message.function_call?(U.name&&(O.message.function_call.name=U.name),U.arguments&&((u=O.message.function_call).arguments??(u.arguments=""),O.message.function_call.arguments+=U.arguments)):O.message.function_call=U),N&&(O.message.content=(O.message.content||"")+N,!O.message.refusal&&k(this,tt,"m",Td).call(this)&&(O.message.parsed=Uy(O.message.content))),G){O.message.tool_calls||(O.message.tool_calls=[]);for(const{index:Y,id:P,type:he,function:pe,...Me}of G){const Oe=(f=O.message.tool_calls)[Y]??(f[Y]={});Object.assign(Oe,Me),P&&(Oe.id=P),he&&(Oe.type=he),pe&&(Oe.function??(Oe.function={name:pe.name??"",arguments:""})),pe?.name&&(Oe.function.name=pe.name),pe?.arguments&&(Oe.function.arguments+=pe.arguments,ST(k(this,$n,"f"),Oe)&&(Oe.function.parsed_arguments=Uy(Oe.function.arguments)))}}}return h},Symbol.asyncIterator)](){const n=[],s=[];let i=!1;return this.on("chunk",o=>{const u=s.shift();u?u.resolve(o):n.push(o)}),this.on("end",()=>{i=!0;for(const o of s)o.resolve(void 0);s.length=0}),this.on("abort",o=>{i=!0;for(const u of s)u.reject(o);s.length=0}),this.on("error",o=>{i=!0;for(const u of s)u.reject(o);s.length=0}),{next:async()=>n.length?{value:n.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((u,f)=>s.push({resolve:u,reject:f})).then(u=>u?{value:u,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new vn(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function NT(r,n){const{id:s,choices:i,created:o,model:u,system_fingerprint:f,...h}=r,p={...h,id:s,choices:i.map(({message:m,finish_reason:v,index:b,logprobs:E,..._})=>{if(!v)throw new se(`missing finish_reason for choice ${b}`);const{content:C=null,function_call:O,tool_calls:N,...q}=m,U=m.role;if(!U)throw new se(`missing role for choice ${b}`);if(O){const{arguments:B,name:G}=O;if(B==null)throw new se(`missing function_call.arguments for choice ${b}`);if(!G)throw new se(`missing function_call.name for choice ${b}`);return{..._,message:{content:C,function_call:{arguments:B,name:G},role:U,refusal:m.refusal??null},finish_reason:v,index:b,logprobs:E}}return N?{..._,index:b,finish_reason:v,logprobs:E,message:{...q,role:U,content:C,refusal:m.refusal??null,tool_calls:N.map((B,G)=>{const{function:ee,type:Y,id:P,...he}=B,{arguments:pe,name:Me,...Oe}=ee||{};if(P==null)throw new se(`missing choices[${b}].tool_calls[${G}].id
${Fl(r)}`);if(Y==null)throw new se(`missing choices[${b}].tool_calls[${G}].type
${Fl(r)}`);if(Me==null)throw new se(`missing choices[${b}].tool_calls[${G}].function.name
${Fl(r)}`);if(pe==null)throw new se(`missing choices[${b}].tool_calls[${G}].function.arguments
${Fl(r)}`);return{...he,id:P,type:Y,function:{...Oe,name:Me,arguments:pe}}})}}:{..._,message:{...q,content:C,role:U,refusal:m.refusal??null},finish_reason:v,index:b,logprobs:E}}),created:o,model:u,object:"chat.completion",...f?{system_fingerprint:f}:{}};return vT(p,n)}function Fl(r){return JSON.stringify(r)}class Ao extends yr{static fromReadableStream(n){const s=new Ao(null);return s._run(()=>s._fromReadableStream(n)),s}static runTools(n,s,i){const o=new Ao(s),u={...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"runTools"}};return o._run(()=>o._runTools(n,s,u)),o}}let _f=class extends te{constructor(){super(...arguments),this.messages=new wv(this._client)}create(n,s){return this._client.post("/chat/completions",{body:n,...s,stream:n.stream??!1})}retrieve(n,s){return this._client.get(V`/chat/completions/${n}`,s)}update(n,s,i){return this._client.post(V`/chat/completions/${n}`,{body:s,...i})}list(n={},s){return this._client.getAPIList("/chat/completions",Fe,{query:n,...s})}delete(n,s){return this._client.delete(V`/chat/completions/${n}`,s)}parse(n,s){return ET(n.tools),this._client.chat.completions.create(n,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(i=>gf(i,n))}runTools(n,s){return n.stream?Ao.runTools(this._client,n,s):yf.runTools(this._client,n,s)}stream(n,s){return yr.createChatCompletion(this._client,n,s)}};_f.Messages=wv;class vf extends te{constructor(){super(...arguments),this.completions=new _f(this._client)}}vf.Completions=_f;const Iv=Symbol("brand.privateNullableHeaders");function*kT(r){if(!r)return;if(Iv in r){const{values:i,nulls:o}=r;yield*i.entries();for(const u of o)yield[u,null];return}let n=!1,s;r instanceof Headers?s=r.entries():vy(r)?s=r:(n=!0,s=Object.entries(r??{}));for(let i of s){const o=i[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");const u=vy(i[1])?i[1]:[i[1]];let f=!1;for(const h of u)h!==void 0&&(n&&!f&&(f=!0,yield[o,null]),yield[o,h])}}const Q=r=>{const n=new Headers,s=new Set;for(const i of r){const o=new Set;for(const[u,f]of kT(i)){const h=u.toLowerCase();o.has(h)||(n.delete(u),o.add(h)),f===null?(n.delete(u),s.add(h)):(n.append(u,f),s.delete(h))}}return{[Iv]:!0,values:n,nulls:s}};class Gv extends te{create(n,s){return this._client.post("/audio/speech",{body:n,...s,headers:Q([{Accept:"application/octet-stream"},s?.headers]),__binaryResponse:!0})}}class Vv extends te{create(n,s){return this._client.post("/audio/transcriptions",Xs({body:n,...s,stream:n.stream??!1,__metadata:{model:n.model}},this._client))}}class Pv extends te{create(n,s){return this._client.post("/audio/translations",Xs({body:n,...s,__metadata:{model:n.model}},this._client))}}class wr extends te{constructor(){super(...arguments),this.transcriptions=new Vv(this._client),this.translations=new Pv(this._client),this.speech=new Gv(this._client)}}wr.Transcriptions=Vv;wr.Translations=Pv;wr.Speech=Gv;class Yv extends te{create(n,s){return this._client.post("/batches",{body:n,...s})}retrieve(n,s){return this._client.get(V`/batches/${n}`,s)}list(n={},s){return this._client.getAPIList("/batches",Fe,{query:n,...s})}cancel(n,s){return this._client.post(V`/batches/${n}/cancel`,s)}}class Kv extends te{create(n,s){return this._client.post("/assistants",{body:n,...s,headers:Q([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}retrieve(n,s){return this._client.get(V`/assistants/${n}`,{...s,headers:Q([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}update(n,s,i){return this._client.post(V`/assistants/${n}`,{body:s,...i,headers:Q([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}list(n={},s){return this._client.getAPIList("/assistants",Fe,{query:n,...s,headers:Q([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}delete(n,s){return this._client.delete(V`/assistants/${n}`,{...s,headers:Q([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}}let Xv=class extends te{create(n,s){return this._client.post("/realtime/sessions",{body:n,...s,headers:Q([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}};class Jv extends te{create(n,s){return this._client.post("/realtime/transcription_sessions",{body:n,...s,headers:Q([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}}let ko=class extends te{constructor(){super(...arguments),this.sessions=new Xv(this._client),this.transcriptionSessions=new Jv(this._client)}};ko.Sessions=Xv;ko.TranscriptionSessions=Jv;class Qv extends te{create(n,s){return this._client.post("/chatkit/sessions",{body:n,...s,headers:Q([{"OpenAI-Beta":"chatkit_beta=v1"},s?.headers])})}cancel(n,s){return this._client.post(V`/chatkit/sessions/${n}/cancel`,{...s,headers:Q([{"OpenAI-Beta":"chatkit_beta=v1"},s?.headers])})}}let Zv=class extends te{retrieve(n,s){return this._client.get(V`/chatkit/threads/${n}`,{...s,headers:Q([{"OpenAI-Beta":"chatkit_beta=v1"},s?.headers])})}list(n={},s){return this._client.getAPIList("/chatkit/threads",_o,{query:n,...s,headers:Q([{"OpenAI-Beta":"chatkit_beta=v1"},s?.headers])})}delete(n,s){return this._client.delete(V`/chatkit/threads/${n}`,{...s,headers:Q([{"OpenAI-Beta":"chatkit_beta=v1"},s?.headers])})}listItems(n,s={},i){return this._client.getAPIList(V`/chatkit/threads/${n}/items`,_o,{query:s,...i,headers:Q([{"OpenAI-Beta":"chatkit_beta=v1"},i?.headers])})}};class Do extends te{constructor(){super(...arguments),this.sessions=new Qv(this._client),this.threads=new Zv(this._client)}}Do.Sessions=Qv;Do.Threads=Zv;class Wv extends te{create(n,s,i){return this._client.post(V`/threads/${n}/messages`,{body:s,...i,headers:Q([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}retrieve(n,s,i){const{thread_id:o}=s;return this._client.get(V`/threads/${o}/messages/${n}`,{...i,headers:Q([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}update(n,s,i){const{thread_id:o,...u}=s;return this._client.post(V`/threads/${o}/messages/${n}`,{body:u,...i,headers:Q([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}list(n,s={},i){return this._client.getAPIList(V`/threads/${n}/messages`,Fe,{query:s,...i,headers:Q([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}delete(n,s,i){const{thread_id:o}=s;return this._client.delete(V`/threads/${o}/messages/${n}`,{...i,headers:Q([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}}class Fv extends te{retrieve(n,s,i){const{thread_id:o,run_id:u,...f}=s;return this._client.get(V`/threads/${o}/runs/${u}/steps/${n}`,{query:f,...i,headers:Q([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}list(n,s,i){const{thread_id:o,...u}=s;return this._client.getAPIList(V`/threads/${o}/runs/${n}/steps`,Fe,{query:u,...i,headers:Q([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}}const DT=r=>{if(typeof Buffer<"u"){const n=Buffer.from(r,"base64");return Array.from(new Float32Array(n.buffer,n.byteOffset,n.length/Float32Array.BYTES_PER_ELEMENT))}else{const n=atob(r),s=n.length,i=new Uint8Array(s);for(let o=0;o<s;o++)i[o]=n.charCodeAt(o);return Array.from(new Float32Array(i.buffer))}};var UT={};const qa=r=>{if(typeof globalThis.process<"u")return UT?.[r]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(r)?.trim()};var mt,Ys,Qd,_n,ro,dn,Ks,Ka,Gs,To,Gt,lo,oo,fr,rr,lr,zy,By,$y,Ly,qy,Hy,Iy;class hr extends pf{constructor(){super(...arguments),mt.add(this),Qd.set(this,[]),_n.set(this,{}),ro.set(this,{}),dn.set(this,void 0),Ks.set(this,void 0),Ka.set(this,void 0),Gs.set(this,void 0),To.set(this,void 0),Gt.set(this,void 0),lo.set(this,void 0),oo.set(this,void 0),fr.set(this,void 0)}[(Qd=new WeakMap,_n=new WeakMap,ro=new WeakMap,dn=new WeakMap,Ks=new WeakMap,Ka=new WeakMap,Gs=new WeakMap,To=new WeakMap,Gt=new WeakMap,lo=new WeakMap,oo=new WeakMap,fr=new WeakMap,mt=new WeakSet,Symbol.asyncIterator)](){const n=[],s=[];let i=!1;return this.on("event",o=>{const u=s.shift();u?u.resolve(o):n.push(o)}),this.on("end",()=>{i=!0;for(const o of s)o.resolve(void 0);s.length=0}),this.on("abort",o=>{i=!0;for(const u of s)u.reject(o);s.length=0}),this.on("error",o=>{i=!0;for(const u of s)u.reject(o);s.length=0}),{next:async()=>n.length?{value:n.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((u,f)=>s.push({resolve:u,reject:f})).then(u=>u?{value:u,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(n){const s=new Ys;return s._run(()=>s._fromReadableStream(n)),s}async _fromReadableStream(n,s){const i=s?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),this._connected();const o=vn.fromReadableStream(n,this.controller);for await(const u of o)k(this,mt,"m",rr).call(this,u);if(o.controller.signal?.aborted)throw new nn;return this._addRun(k(this,mt,"m",lr).call(this))}toReadableStream(){return new vn(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(n,s,i,o){const u=new Ys;return u._run(()=>u._runToolAssistantStream(n,s,i,{...o,headers:{...o?.headers,"X-Stainless-Helper-Method":"stream"}})),u}async _createToolAssistantStream(n,s,i,o){const u=o?.signal;u&&(u.aborted&&this.controller.abort(),u.addEventListener("abort",()=>this.controller.abort()));const f={...i,stream:!0},h=await n.submitToolOutputs(s,f,{...o,signal:this.controller.signal});this._connected();for await(const p of h)k(this,mt,"m",rr).call(this,p);if(h.controller.signal?.aborted)throw new nn;return this._addRun(k(this,mt,"m",lr).call(this))}static createThreadAssistantStream(n,s,i){const o=new Ys;return o._run(()=>o._threadAssistantStream(n,s,{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"stream"}})),o}static createAssistantStream(n,s,i,o){const u=new Ys;return u._run(()=>u._runAssistantStream(n,s,i,{...o,headers:{...o?.headers,"X-Stainless-Helper-Method":"stream"}})),u}currentEvent(){return k(this,lo,"f")}currentRun(){return k(this,oo,"f")}currentMessageSnapshot(){return k(this,dn,"f")}currentRunStepSnapshot(){return k(this,fr,"f")}async finalRunSteps(){return await this.done(),Object.values(k(this,_n,"f"))}async finalMessages(){return await this.done(),Object.values(k(this,ro,"f"))}async finalRun(){if(await this.done(),!k(this,Ks,"f"))throw Error("Final run was not received.");return k(this,Ks,"f")}async _createThreadAssistantStream(n,s,i){const o=i?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const u={...s,stream:!0},f=await n.createAndRun(u,{...i,signal:this.controller.signal});this._connected();for await(const h of f)k(this,mt,"m",rr).call(this,h);if(f.controller.signal?.aborted)throw new nn;return this._addRun(k(this,mt,"m",lr).call(this))}async _createAssistantStream(n,s,i,o){const u=o?.signal;u&&(u.aborted&&this.controller.abort(),u.addEventListener("abort",()=>this.controller.abort()));const f={...i,stream:!0},h=await n.create(s,f,{...o,signal:this.controller.signal});this._connected();for await(const p of h)k(this,mt,"m",rr).call(this,p);if(h.controller.signal?.aborted)throw new nn;return this._addRun(k(this,mt,"m",lr).call(this))}static accumulateDelta(n,s){for(const[i,o]of Object.entries(s)){if(!n.hasOwnProperty(i)){n[i]=o;continue}let u=n[i];if(u==null){n[i]=o;continue}if(i==="index"||i==="type"){n[i]=o;continue}if(typeof u=="string"&&typeof o=="string")u+=o;else if(typeof u=="number"&&typeof o=="number")u+=o;else if(_d(u)&&_d(o))u=this.accumulateDelta(u,o);else if(Array.isArray(u)&&Array.isArray(o)){if(u.every(f=>typeof f=="string"||typeof f=="number")){u.push(...o);continue}for(const f of o){if(!_d(f))throw new Error(`Expected array delta entry to be an object but got: ${f}`);const h=f.index;if(h==null)throw console.error(f),new Error("Expected array delta entry to have an `index` property");if(typeof h!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${h}`);const p=u[h];p==null?u.push(f):u[h]=this.accumulateDelta(p,f)}continue}else throw Error(`Unhandled record type: ${i}, deltaValue: ${o}, accValue: ${u}`);n[i]=u}return n}_addRun(n){return n}async _threadAssistantStream(n,s,i){return await this._createThreadAssistantStream(s,n,i)}async _runAssistantStream(n,s,i,o){return await this._createAssistantStream(s,n,i,o)}async _runToolAssistantStream(n,s,i,o){return await this._createToolAssistantStream(s,n,i,o)}}Ys=hr,rr=function(n){if(!this.ended)switch(oe(this,lo,n),k(this,mt,"m",$y).call(this,n),n.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":k(this,mt,"m",Iy).call(this,n);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":k(this,mt,"m",By).call(this,n);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":k(this,mt,"m",zy).call(this,n);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},lr=function(){if(this.ended)throw new se("stream has ended, this shouldn't happen");if(!k(this,Ks,"f"))throw Error("Final run has not been received");return k(this,Ks,"f")},zy=function(n){const[s,i]=k(this,mt,"m",qy).call(this,n,k(this,dn,"f"));oe(this,dn,s),k(this,ro,"f")[s.id]=s;for(const o of i){const u=s.content[o.index];u?.type=="text"&&this._emit("textCreated",u.text)}switch(n.event){case"thread.message.created":this._emit("messageCreated",n.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",n.data.delta,s),n.data.delta.content)for(const o of n.data.delta.content){if(o.type=="text"&&o.text){let u=o.text,f=s.content[o.index];if(f&&f.type=="text")this._emit("textDelta",u,f.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(o.index!=k(this,Ka,"f")){if(k(this,Gs,"f"))switch(k(this,Gs,"f").type){case"text":this._emit("textDone",k(this,Gs,"f").text,k(this,dn,"f"));break;case"image_file":this._emit("imageFileDone",k(this,Gs,"f").image_file,k(this,dn,"f"));break}oe(this,Ka,o.index)}oe(this,Gs,s.content[o.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(k(this,Ka,"f")!==void 0){const o=n.data.content[k(this,Ka,"f")];if(o)switch(o.type){case"image_file":this._emit("imageFileDone",o.image_file,k(this,dn,"f"));break;case"text":this._emit("textDone",o.text,k(this,dn,"f"));break}}k(this,dn,"f")&&this._emit("messageDone",n.data),oe(this,dn,void 0)}},By=function(n){const s=k(this,mt,"m",Ly).call(this,n);switch(oe(this,fr,s),n.event){case"thread.run.step.created":this._emit("runStepCreated",n.data);break;case"thread.run.step.delta":const i=n.data.delta;if(i.step_details&&i.step_details.type=="tool_calls"&&i.step_details.tool_calls&&s.step_details.type=="tool_calls")for(const u of i.step_details.tool_calls)u.index==k(this,To,"f")?this._emit("toolCallDelta",u,s.step_details.tool_calls[u.index]):(k(this,Gt,"f")&&this._emit("toolCallDone",k(this,Gt,"f")),oe(this,To,u.index),oe(this,Gt,s.step_details.tool_calls[u.index]),k(this,Gt,"f")&&this._emit("toolCallCreated",k(this,Gt,"f")));this._emit("runStepDelta",n.data.delta,s);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":oe(this,fr,void 0),n.data.step_details.type=="tool_calls"&&k(this,Gt,"f")&&(this._emit("toolCallDone",k(this,Gt,"f")),oe(this,Gt,void 0)),this._emit("runStepDone",n.data,s);break}},$y=function(n){k(this,Qd,"f").push(n),this._emit("event",n)},Ly=function(n){switch(n.event){case"thread.run.step.created":return k(this,_n,"f")[n.data.id]=n.data,n.data;case"thread.run.step.delta":let s=k(this,_n,"f")[n.data.id];if(!s)throw Error("Received a RunStepDelta before creation of a snapshot");let i=n.data;if(i.delta){const o=Ys.accumulateDelta(s,i.delta);k(this,_n,"f")[n.data.id]=o}return k(this,_n,"f")[n.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":k(this,_n,"f")[n.data.id]=n.data;break}if(k(this,_n,"f")[n.data.id])return k(this,_n,"f")[n.data.id];throw new Error("No snapshot available")},qy=function(n,s){let i=[];switch(n.event){case"thread.message.created":return[n.data,i];case"thread.message.delta":if(!s)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let o=n.data;if(o.delta.content)for(const u of o.delta.content)if(u.index in s.content){let f=s.content[u.index];s.content[u.index]=k(this,mt,"m",Hy).call(this,u,f)}else s.content[u.index]=u,i.push(u);return[s,i];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(s)return[s,i];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Hy=function(n,s){return Ys.accumulateDelta(s,n)},Iy=function(n){switch(oe(this,oo,n.data),n.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":oe(this,Ks,n.data),k(this,Gt,"f")&&(this._emit("toolCallDone",k(this,Gt,"f")),oe(this,Gt,void 0));break}};let bf=class extends te{constructor(){super(...arguments),this.steps=new Fv(this._client)}create(n,s,i){const{include:o,...u}=s;return this._client.post(V`/threads/${n}/runs`,{query:{include:o},body:u,...i,headers:Q([{"OpenAI-Beta":"assistants=v2"},i?.headers]),stream:s.stream??!1})}retrieve(n,s,i){const{thread_id:o}=s;return this._client.get(V`/threads/${o}/runs/${n}`,{...i,headers:Q([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}update(n,s,i){const{thread_id:o,...u}=s;return this._client.post(V`/threads/${o}/runs/${n}`,{body:u,...i,headers:Q([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}list(n,s={},i){return this._client.getAPIList(V`/threads/${n}/runs`,Fe,{query:s,...i,headers:Q([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}cancel(n,s,i){const{thread_id:o}=s;return this._client.post(V`/threads/${o}/runs/${n}/cancel`,{...i,headers:Q([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}async createAndPoll(n,s,i){const o=await this.create(n,s,i);return await this.poll(o.id,{thread_id:n},i)}createAndStream(n,s,i){return hr.createAssistantStream(n,this._client.beta.threads.runs,s,i)}async poll(n,s,i){const o=Q([i?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":i?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:u,response:f}=await this.retrieve(n,s,{...i,headers:{...i?.headers,...o}}).withResponse();switch(u.status){case"queued":case"in_progress":case"cancelling":let h=5e3;if(i?.pollIntervalMs)h=i.pollIntervalMs;else{const p=f.headers.get("openai-poll-after-ms");if(p){const m=parseInt(p);isNaN(m)||(h=m)}}await vr(h);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return u}}}stream(n,s,i){return hr.createAssistantStream(n,this._client.beta.threads.runs,s,i)}submitToolOutputs(n,s,i){const{thread_id:o,...u}=s;return this._client.post(V`/threads/${o}/runs/${n}/submit_tool_outputs`,{body:u,...i,headers:Q([{"OpenAI-Beta":"assistants=v2"},i?.headers]),stream:s.stream??!1})}async submitToolOutputsAndPoll(n,s,i){const o=await this.submitToolOutputs(n,s,i);return await this.poll(o.id,s,i)}submitToolOutputsStream(n,s,i){return hr.createToolAssistantStream(n,this._client.beta.threads.runs,s,i)}};bf.Steps=Fv;class Uo extends te{constructor(){super(...arguments),this.runs=new bf(this._client),this.messages=new Wv(this._client)}create(n={},s){return this._client.post("/threads",{body:n,...s,headers:Q([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}retrieve(n,s){return this._client.get(V`/threads/${n}`,{...s,headers:Q([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}update(n,s,i){return this._client.post(V`/threads/${n}`,{body:s,...i,headers:Q([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}delete(n,s){return this._client.delete(V`/threads/${n}`,{...s,headers:Q([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}createAndRun(n,s){return this._client.post("/threads/runs",{body:n,...s,headers:Q([{"OpenAI-Beta":"assistants=v2"},s?.headers]),stream:n.stream??!1})}async createAndRunPoll(n,s){const i=await this.createAndRun(n,s);return await this.runs.poll(i.id,{thread_id:i.thread_id},s)}createAndRunStream(n,s){return hr.createThreadAssistantStream(n,this._client.beta.threads,s)}}Uo.Runs=bf;Uo.Messages=Wv;class ei extends te{constructor(){super(...arguments),this.realtime=new ko(this._client),this.chatkit=new Do(this._client),this.assistants=new Kv(this._client),this.threads=new Uo(this._client)}}ei.Realtime=ko;ei.ChatKit=Do;ei.Assistants=Kv;ei.Threads=Uo;class eb extends te{create(n,s){return this._client.post("/completions",{body:n,...s,stream:n.stream??!1})}}class tb extends te{retrieve(n,s,i){const{container_id:o}=s;return this._client.get(V`/containers/${o}/files/${n}/content`,{...i,headers:Q([{Accept:"application/binary"},i?.headers]),__binaryResponse:!0})}}let wf=class extends te{constructor(){super(...arguments),this.content=new tb(this._client)}create(n,s,i){return this._client.post(V`/containers/${n}/files`,Xs({body:s,...i},this._client))}retrieve(n,s,i){const{container_id:o}=s;return this._client.get(V`/containers/${o}/files/${n}`,i)}list(n,s={},i){return this._client.getAPIList(V`/containers/${n}/files`,Fe,{query:s,...i})}delete(n,s,i){const{container_id:o}=s;return this._client.delete(V`/containers/${o}/files/${n}`,{...i,headers:Q([{Accept:"*/*"},i?.headers])})}};wf.Content=tb;class Sf extends te{constructor(){super(...arguments),this.files=new wf(this._client)}create(n,s){return this._client.post("/containers",{body:n,...s})}retrieve(n,s){return this._client.get(V`/containers/${n}`,s)}list(n={},s){return this._client.getAPIList("/containers",Fe,{query:n,...s})}delete(n,s){return this._client.delete(V`/containers/${n}`,{...s,headers:Q([{Accept:"*/*"},s?.headers])})}}Sf.Files=wf;class nb extends te{create(n,s,i){const{include:o,...u}=s;return this._client.post(V`/conversations/${n}/items`,{query:{include:o},body:u,...i})}retrieve(n,s,i){const{conversation_id:o,...u}=s;return this._client.get(V`/conversations/${o}/items/${n}`,{query:u,...i})}list(n,s={},i){return this._client.getAPIList(V`/conversations/${n}/items`,_o,{query:s,...i})}delete(n,s,i){const{conversation_id:o}=s;return this._client.delete(V`/conversations/${o}/items/${n}`,i)}}class Ef extends te{constructor(){super(...arguments),this.items=new nb(this._client)}create(n={},s){return this._client.post("/conversations",{body:n,...s})}retrieve(n,s){return this._client.get(V`/conversations/${n}`,s)}update(n,s,i){return this._client.post(V`/conversations/${n}`,{body:s,...i})}delete(n,s){return this._client.delete(V`/conversations/${n}`,s)}}Ef.Items=nb;class sb extends te{create(n,s){const i=!!n.encoding_format;let o=i?n.encoding_format:"base64";i&&ht(this._client).debug("embeddings/user defined encoding_format:",n.encoding_format);const u=this._client.post("/embeddings",{body:{...n,encoding_format:o},...s});return i?u:(ht(this._client).debug("embeddings/decoding base64 embeddings from base64"),u._thenUnwrap(f=>(f&&f.data&&f.data.forEach(h=>{const p=h.embedding;h.embedding=DT(p)}),f)))}}class ab extends te{retrieve(n,s,i){const{eval_id:o,run_id:u}=s;return this._client.get(V`/evals/${o}/runs/${u}/output_items/${n}`,i)}list(n,s,i){const{eval_id:o,...u}=s;return this._client.getAPIList(V`/evals/${o}/runs/${n}/output_items`,Fe,{query:u,...i})}}class Af extends te{constructor(){super(...arguments),this.outputItems=new ab(this._client)}create(n,s,i){return this._client.post(V`/evals/${n}/runs`,{body:s,...i})}retrieve(n,s,i){const{eval_id:o}=s;return this._client.get(V`/evals/${o}/runs/${n}`,i)}list(n,s={},i){return this._client.getAPIList(V`/evals/${n}/runs`,Fe,{query:s,...i})}delete(n,s,i){const{eval_id:o}=s;return this._client.delete(V`/evals/${o}/runs/${n}`,i)}cancel(n,s,i){const{eval_id:o}=s;return this._client.post(V`/evals/${o}/runs/${n}`,i)}}Af.OutputItems=ab;class Tf extends te{constructor(){super(...arguments),this.runs=new Af(this._client)}create(n,s){return this._client.post("/evals",{body:n,...s})}retrieve(n,s){return this._client.get(V`/evals/${n}`,s)}update(n,s,i){return this._client.post(V`/evals/${n}`,{body:s,...i})}list(n={},s){return this._client.getAPIList("/evals",Fe,{query:n,...s})}delete(n,s){return this._client.delete(V`/evals/${n}`,s)}}Tf.Runs=Af;let ib=class extends te{create(n,s){return this._client.post("/files",Xs({body:n,...s},this._client))}retrieve(n,s){return this._client.get(V`/files/${n}`,s)}list(n={},s){return this._client.getAPIList("/files",Fe,{query:n,...s})}delete(n,s){return this._client.delete(V`/files/${n}`,s)}content(n,s){return this._client.get(V`/files/${n}/content`,{...s,headers:Q([{Accept:"application/binary"},s?.headers]),__binaryResponse:!0})}async waitForProcessing(n,{pollInterval:s=5e3,maxWait:i=1800*1e3}={}){const o=new Set(["processed","error","deleted"]),u=Date.now();let f=await this.retrieve(n);for(;!f.status||!o.has(f.status);)if(await vr(s),f=await this.retrieve(n),Date.now()-u>i)throw new cf({message:`Giving up on waiting for file ${n} to finish processing after ${i} milliseconds.`});return f}};class rb extends te{}let lb=class extends te{run(n,s){return this._client.post("/fine_tuning/alpha/graders/run",{body:n,...s})}validate(n,s){return this._client.post("/fine_tuning/alpha/graders/validate",{body:n,...s})}};class Of extends te{constructor(){super(...arguments),this.graders=new lb(this._client)}}Of.Graders=lb;class ob extends te{create(n,s,i){return this._client.getAPIList(V`/fine_tuning/checkpoints/${n}/permissions`,No,{body:s,method:"post",...i})}retrieve(n,s={},i){return this._client.get(V`/fine_tuning/checkpoints/${n}/permissions`,{query:s,...i})}delete(n,s,i){const{fine_tuned_model_checkpoint:o}=s;return this._client.delete(V`/fine_tuning/checkpoints/${o}/permissions/${n}`,i)}}let xf=class extends te{constructor(){super(...arguments),this.permissions=new ob(this._client)}};xf.Permissions=ob;class ub extends te{list(n,s={},i){return this._client.getAPIList(V`/fine_tuning/jobs/${n}/checkpoints`,Fe,{query:s,...i})}}class Cf extends te{constructor(){super(...arguments),this.checkpoints=new ub(this._client)}create(n,s){return this._client.post("/fine_tuning/jobs",{body:n,...s})}retrieve(n,s){return this._client.get(V`/fine_tuning/jobs/${n}`,s)}list(n={},s){return this._client.getAPIList("/fine_tuning/jobs",Fe,{query:n,...s})}cancel(n,s){return this._client.post(V`/fine_tuning/jobs/${n}/cancel`,s)}listEvents(n,s={},i){return this._client.getAPIList(V`/fine_tuning/jobs/${n}/events`,Fe,{query:s,...i})}pause(n,s){return this._client.post(V`/fine_tuning/jobs/${n}/pause`,s)}resume(n,s){return this._client.post(V`/fine_tuning/jobs/${n}/resume`,s)}}Cf.Checkpoints=ub;class ti extends te{constructor(){super(...arguments),this.methods=new rb(this._client),this.jobs=new Cf(this._client),this.checkpoints=new xf(this._client),this.alpha=new Of(this._client)}}ti.Methods=rb;ti.Jobs=Cf;ti.Checkpoints=xf;ti.Alpha=Of;class cb extends te{}class Rf extends te{constructor(){super(...arguments),this.graderModels=new cb(this._client)}}Rf.GraderModels=cb;class db extends te{createVariation(n,s){return this._client.post("/images/variations",Xs({body:n,...s},this._client))}edit(n,s){return this._client.post("/images/edits",Xs({body:n,...s,stream:n.stream??!1},this._client))}generate(n,s){return this._client.post("/images/generations",{body:n,...s,stream:n.stream??!1})}}class fb extends te{retrieve(n,s){return this._client.get(V`/models/${n}`,s)}list(n){return this._client.getAPIList("/models",No,n)}delete(n,s){return this._client.delete(V`/models/${n}`,s)}}class hb extends te{create(n,s){return this._client.post("/moderations",{body:n,...s})}}class mb extends te{accept(n,s,i){return this._client.post(V`/realtime/calls/${n}/accept`,{body:s,...i,headers:Q([{Accept:"*/*"},i?.headers])})}hangup(n,s){return this._client.post(V`/realtime/calls/${n}/hangup`,{...s,headers:Q([{Accept:"*/*"},s?.headers])})}refer(n,s,i){return this._client.post(V`/realtime/calls/${n}/refer`,{body:s,...i,headers:Q([{Accept:"*/*"},i?.headers])})}reject(n,s={},i){return this._client.post(V`/realtime/calls/${n}/reject`,{body:s,...i,headers:Q([{Accept:"*/*"},i?.headers])})}}class gb extends te{create(n,s){return this._client.post("/realtime/client_secrets",{body:n,...s})}}class Mo extends te{constructor(){super(...arguments),this.clientSecrets=new gb(this._client),this.calls=new mb(this._client)}}Mo.ClientSecrets=gb;Mo.Calls=mb;function MT(r,n){return!n||!BT(n)?{...r,output_parsed:null,output:r.output.map(s=>s.type==="function_call"?{...s,parsed_arguments:null}:s.type==="message"?{...s,content:s.content.map(i=>({...i,parsed:null}))}:s)}:pb(r,n)}function pb(r,n){const s=r.output.map(o=>{if(o.type==="function_call")return{...o,parsed_arguments:qT(n,o)};if(o.type==="message"){const u=o.content.map(f=>f.type==="output_text"?{...f,parsed:zT(n,f.text)}:f);return{...o,content:u}}return o}),i=Object.assign({},r,{output:s});return Object.getOwnPropertyDescriptor(r,"output_text")||Zd(i),Object.defineProperty(i,"output_parsed",{enumerable:!0,get(){for(const o of i.output)if(o.type==="message"){for(const u of o.content)if(u.type==="output_text"&&u.parsed!==null)return u.parsed}return null}}),i}function zT(r,n){return r.text?.format?.type!=="json_schema"?null:"$parseRaw"in r.text?.format?(r.text?.format).$parseRaw(n):JSON.parse(n)}function BT(r){return!!mf(r.text?.format)}function $T(r){return r?.$brand==="auto-parseable-tool"}function LT(r,n){return r.find(s=>s.type==="function"&&s.name===n)}function qT(r,n){const s=LT(r.tools??[],n.name);return{...n,...n,parsed_arguments:$T(s)?s.$parseRaw(n.arguments):s?.strict?JSON.parse(n.arguments):null}}function Zd(r){const n=[];for(const s of r.output)if(s.type==="message")for(const i of s.content)i.type==="output_text"&&n.push(i.text);r.output_text=n.join("")}var Ha,eo,ms,to,Gy,Vy,Py,Yy;class jf extends pf{constructor(n){super(),Ha.add(this),eo.set(this,void 0),ms.set(this,void 0),to.set(this,void 0),oe(this,eo,n)}static createResponse(n,s,i){const o=new jf(s);return o._run(()=>o._createOrRetrieveResponse(n,s,{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createOrRetrieveResponse(n,s,i){const o=i?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),k(this,Ha,"m",Gy).call(this);let u,f=null;"response_id"in s?(u=await n.responses.retrieve(s.response_id,{stream:!0},{...i,signal:this.controller.signal,stream:!0}),f=s.starting_after??null):u=await n.responses.create({...s,stream:!0},{...i,signal:this.controller.signal}),this._connected();for await(const h of u)k(this,Ha,"m",Vy).call(this,h,f);if(u.controller.signal?.aborted)throw new nn;return k(this,Ha,"m",Py).call(this)}[(eo=new WeakMap,ms=new WeakMap,to=new WeakMap,Ha=new WeakSet,Gy=function(){this.ended||oe(this,ms,void 0)},Vy=function(s,i){if(this.ended)return;const o=(f,h)=>{(i==null||h.sequence_number>i)&&this._emit(f,h)},u=k(this,Ha,"m",Yy).call(this,s);switch(o("event",s),s.type){case"response.output_text.delta":{const f=u.output[s.output_index];if(!f)throw new se(`missing output at index ${s.output_index}`);if(f.type==="message"){const h=f.content[s.content_index];if(!h)throw new se(`missing content at index ${s.content_index}`);if(h.type!=="output_text")throw new se(`expected content to be 'output_text', got ${h.type}`);o("response.output_text.delta",{...s,snapshot:h.text})}break}case"response.function_call_arguments.delta":{const f=u.output[s.output_index];if(!f)throw new se(`missing output at index ${s.output_index}`);f.type==="function_call"&&o("response.function_call_arguments.delta",{...s,snapshot:f.arguments});break}default:o(s.type,s);break}},Py=function(){if(this.ended)throw new se("stream has ended, this shouldn't happen");const s=k(this,ms,"f");if(!s)throw new se("request ended without sending any events");oe(this,ms,void 0);const i=HT(s,k(this,eo,"f"));return oe(this,to,i),i},Yy=function(s){let i=k(this,ms,"f");if(!i){if(s.type!=="response.created")throw new se(`When snapshot hasn't been set yet, expected 'response.created' event, got ${s.type}`);return i=oe(this,ms,s.response),i}switch(s.type){case"response.output_item.added":{i.output.push(s.item);break}case"response.content_part.added":{const o=i.output[s.output_index];if(!o)throw new se(`missing output at index ${s.output_index}`);const u=o.type,f=s.part;u==="message"&&f.type!=="reasoning_text"?o.content.push(f):u==="reasoning"&&f.type==="reasoning_text"&&(o.content||(o.content=[]),o.content.push(f));break}case"response.output_text.delta":{const o=i.output[s.output_index];if(!o)throw new se(`missing output at index ${s.output_index}`);if(o.type==="message"){const u=o.content[s.content_index];if(!u)throw new se(`missing content at index ${s.content_index}`);if(u.type!=="output_text")throw new se(`expected content to be 'output_text', got ${u.type}`);u.text+=s.delta}break}case"response.function_call_arguments.delta":{const o=i.output[s.output_index];if(!o)throw new se(`missing output at index ${s.output_index}`);o.type==="function_call"&&(o.arguments+=s.delta);break}case"response.reasoning_text.delta":{const o=i.output[s.output_index];if(!o)throw new se(`missing output at index ${s.output_index}`);if(o.type==="reasoning"){const u=o.content?.[s.content_index];if(!u)throw new se(`missing content at index ${s.content_index}`);if(u.type!=="reasoning_text")throw new se(`expected content to be 'reasoning_text', got ${u.type}`);u.text+=s.delta}break}case"response.completed":{oe(this,ms,s.response);break}}return i},Symbol.asyncIterator)](){const n=[],s=[];let i=!1;return this.on("event",o=>{const u=s.shift();u?u.resolve(o):n.push(o)}),this.on("end",()=>{i=!0;for(const o of s)o.resolve(void 0);s.length=0}),this.on("abort",o=>{i=!0;for(const u of s)u.reject(o);s.length=0}),this.on("error",o=>{i=!0;for(const u of s)u.reject(o);s.length=0}),{next:async()=>n.length?{value:n.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((u,f)=>s.push({resolve:u,reject:f})).then(u=>u?{value:u,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const n=k(this,to,"f");if(!n)throw new se("stream ended without producing a ChatCompletion");return n}}function HT(r,n){return MT(r,n)}class yb extends te{list(n,s={},i){return this._client.getAPIList(V`/responses/${n}/input_items`,Fe,{query:s,...i})}}class _b extends te{count(n={},s){return this._client.post("/responses/input_tokens",{body:n,...s})}}class zo extends te{constructor(){super(...arguments),this.inputItems=new yb(this._client),this.inputTokens=new _b(this._client)}create(n,s){return this._client.post("/responses",{body:n,...s,stream:n.stream??!1})._thenUnwrap(i=>("object"in i&&i.object==="response"&&Zd(i),i))}retrieve(n,s={},i){return this._client.get(V`/responses/${n}`,{query:s,...i,stream:s?.stream??!1})._thenUnwrap(o=>("object"in o&&o.object==="response"&&Zd(o),o))}delete(n,s){return this._client.delete(V`/responses/${n}`,{...s,headers:Q([{Accept:"*/*"},s?.headers])})}parse(n,s){return this._client.responses.create(n,s)._thenUnwrap(i=>pb(i,n))}stream(n,s){return jf.createResponse(this._client,n,s)}cancel(n,s){return this._client.post(V`/responses/${n}/cancel`,s)}}zo.InputItems=yb;zo.InputTokens=_b;class vb extends te{create(n,s,i){return this._client.post(V`/uploads/${n}/parts`,Xs({body:s,...i},this._client))}}class Nf extends te{constructor(){super(...arguments),this.parts=new vb(this._client)}create(n,s){return this._client.post("/uploads",{body:n,...s})}cancel(n,s){return this._client.post(V`/uploads/${n}/cancel`,s)}complete(n,s,i){return this._client.post(V`/uploads/${n}/complete`,{body:s,...i})}}Nf.Parts=vb;const IT=async r=>{const n=await Promise.allSettled(r),s=n.filter(o=>o.status==="rejected");if(s.length){for(const o of s)console.error(o.reason);throw new Error(`${s.length} promise(s) failed - see the above errors`)}const i=[];for(const o of n)o.status==="fulfilled"&&i.push(o.value);return i};class bb extends te{create(n,s,i){return this._client.post(V`/vector_stores/${n}/file_batches`,{body:s,...i,headers:Q([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}retrieve(n,s,i){const{vector_store_id:o}=s;return this._client.get(V`/vector_stores/${o}/file_batches/${n}`,{...i,headers:Q([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}cancel(n,s,i){const{vector_store_id:o}=s;return this._client.post(V`/vector_stores/${o}/file_batches/${n}/cancel`,{...i,headers:Q([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}async createAndPoll(n,s,i){const o=await this.create(n,s);return await this.poll(n,o.id,i)}listFiles(n,s,i){const{vector_store_id:o,...u}=s;return this._client.getAPIList(V`/vector_stores/${o}/file_batches/${n}/files`,Fe,{query:u,...i,headers:Q([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}async poll(n,s,i){const o=Q([i?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":i?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:u,response:f}=await this.retrieve(s,{vector_store_id:n},{...i,headers:o}).withResponse();switch(u.status){case"in_progress":let h=5e3;if(i?.pollIntervalMs)h=i.pollIntervalMs;else{const p=f.headers.get("openai-poll-after-ms");if(p){const m=parseInt(p);isNaN(m)||(h=m)}}await vr(h);break;case"failed":case"cancelled":case"completed":return u}}}async uploadAndPoll(n,{files:s,fileIds:i=[]},o){if(s==null||s.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const u=o?.maxConcurrency??5,f=Math.min(u,s.length),h=this._client,p=s.values(),m=[...i];async function v(E){for(let _ of E){const C=await h.files.create({file:_,purpose:"assistants"},o);m.push(C.id)}}const b=Array(f).fill(p).map(v);return await IT(b),await this.createAndPoll(n,{file_ids:m})}}class wb extends te{create(n,s,i){return this._client.post(V`/vector_stores/${n}/files`,{body:s,...i,headers:Q([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}retrieve(n,s,i){const{vector_store_id:o}=s;return this._client.get(V`/vector_stores/${o}/files/${n}`,{...i,headers:Q([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}update(n,s,i){const{vector_store_id:o,...u}=s;return this._client.post(V`/vector_stores/${o}/files/${n}`,{body:u,...i,headers:Q([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}list(n,s={},i){return this._client.getAPIList(V`/vector_stores/${n}/files`,Fe,{query:s,...i,headers:Q([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}delete(n,s,i){const{vector_store_id:o}=s;return this._client.delete(V`/vector_stores/${o}/files/${n}`,{...i,headers:Q([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}async createAndPoll(n,s,i){const o=await this.create(n,s,i);return await this.poll(n,o.id,i)}async poll(n,s,i){const o=Q([i?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":i?.pollIntervalMs?.toString()??void 0}]);for(;;){const u=await this.retrieve(s,{vector_store_id:n},{...i,headers:o}).withResponse(),f=u.data;switch(f.status){case"in_progress":let h=5e3;if(i?.pollIntervalMs)h=i.pollIntervalMs;else{const p=u.response.headers.get("openai-poll-after-ms");if(p){const m=parseInt(p);isNaN(m)||(h=m)}}await vr(h);break;case"failed":case"completed":return f}}}async upload(n,s,i){const o=await this._client.files.create({file:s,purpose:"assistants"},i);return this.create(n,{file_id:o.id},i)}async uploadAndPoll(n,s,i){const o=await this.upload(n,s,i);return await this.poll(n,o.id,i)}content(n,s,i){const{vector_store_id:o}=s;return this._client.getAPIList(V`/vector_stores/${o}/files/${n}/content`,No,{...i,headers:Q([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}}class Bo extends te{constructor(){super(...arguments),this.files=new wb(this._client),this.fileBatches=new bb(this._client)}create(n,s){return this._client.post("/vector_stores",{body:n,...s,headers:Q([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}retrieve(n,s){return this._client.get(V`/vector_stores/${n}`,{...s,headers:Q([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}update(n,s,i){return this._client.post(V`/vector_stores/${n}`,{body:s,...i,headers:Q([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}list(n={},s){return this._client.getAPIList("/vector_stores",Fe,{query:n,...s,headers:Q([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}delete(n,s){return this._client.delete(V`/vector_stores/${n}`,{...s,headers:Q([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}search(n,s,i){return this._client.getAPIList(V`/vector_stores/${n}/search`,No,{body:s,method:"post",...i,headers:Q([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}}Bo.Files=wb;Bo.FileBatches=bb;class Sb extends te{create(n,s){return this._client.post("/videos",Ny({body:n,...s},this._client))}retrieve(n,s){return this._client.get(V`/videos/${n}`,s)}list(n={},s){return this._client.getAPIList("/videos",_o,{query:n,...s})}delete(n,s){return this._client.delete(V`/videos/${n}`,s)}downloadContent(n,s={},i){return this._client.get(V`/videos/${n}/content`,{query:s,...i,headers:Q([{Accept:"application/binary"},i?.headers]),__binaryResponse:!0})}remix(n,s,i){return this._client.post(V`/videos/${n}/remix`,Ny({body:s,...i},this._client))}}var Ya,Eb,uo;class Ab extends te{constructor(){super(...arguments),Ya.add(this)}async unwrap(n,s,i=this._client.webhookSecret,o=300){return await this.verifySignature(n,s,i,o),JSON.parse(n)}async verifySignature(n,s,i=this._client.webhookSecret,o=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");k(this,Ya,"m",Eb).call(this,i);const u=Q([s]).values,f=k(this,Ya,"m",uo).call(this,u,"webhook-signature"),h=k(this,Ya,"m",uo).call(this,u,"webhook-timestamp"),p=k(this,Ya,"m",uo).call(this,u,"webhook-id"),m=parseInt(h,10);if(isNaN(m))throw new Fi("Invalid webhook timestamp format");const v=Math.floor(Date.now()/1e3);if(v-m>o)throw new Fi("Webhook timestamp is too old");if(m>v+o)throw new Fi("Webhook timestamp is too new");const b=f.split(" ").map(O=>O.startsWith("v1,")?O.substring(3):O),E=i.startsWith("whsec_")?Buffer.from(i.replace("whsec_",""),"base64"):Buffer.from(i,"utf-8"),_=p?`${p}.${h}.${n}`:`${h}.${n}`,C=await crypto.subtle.importKey("raw",E,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const O of b)try{const N=Buffer.from(O,"base64");if(await crypto.subtle.verify("HMAC",C,N,new TextEncoder().encode(_)))return}catch{continue}throw new Fi("The given webhook signature does not match the expected signature")}}Ya=new WeakSet,Eb=function(n){if(typeof n!="string"||n.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},uo=function(n,s){if(!n)throw new Error("Headers are required");const i=n.get(s);if(i==null)throw new Error(`Missing required header: ${s}`);return i};var Wd,kf,co,Tb;class ge{constructor({baseURL:n=qa("OPENAI_BASE_URL"),apiKey:s=qa("OPENAI_API_KEY"),organization:i=qa("OPENAI_ORG_ID")??null,project:o=qa("OPENAI_PROJECT_ID")??null,webhookSecret:u=qa("OPENAI_WEBHOOK_SECRET")??null,...f}={}){if(Wd.add(this),co.set(this,void 0),this.completions=new eb(this),this.chat=new vf(this),this.embeddings=new sb(this),this.files=new ib(this),this.images=new db(this),this.audio=new wr(this),this.moderations=new hb(this),this.models=new fb(this),this.fineTuning=new ti(this),this.graders=new Rf(this),this.vectorStores=new Bo(this),this.webhooks=new Ab(this),this.beta=new ei(this),this.batches=new Yv(this),this.uploads=new Nf(this),this.responses=new zo(this),this.realtime=new Mo(this),this.conversations=new Ef(this),this.evals=new Tf(this),this.containers=new Sf(this),this.videos=new Sb(this),s===void 0)throw new se("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const h={apiKey:s,organization:i,project:o,webhookSecret:u,...f,baseURL:n||"https://api.openai.com/v1"};if(!h.dangerouslyAllowBrowser&&GA())throw new se(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=h.baseURL,this.timeout=h.timeout??kf.DEFAULT_TIMEOUT,this.logger=h.logger??console;const p="warn";this.logLevel=p,this.logLevel=Ry(h.logLevel,"ClientOptions.logLevel",this)??Ry(qa("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??p,this.fetchOptions=h.fetchOptions,this.maxRetries=h.maxRetries??2,this.fetch=h.fetch??XA(),oe(this,co,QA),this._options=h,this.apiKey=typeof s=="string"?s:"Missing Key",this.organization=i,this.project=o,this.webhookSecret=u}withOptions(n){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...n})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:n,nulls:s}){}async authHeaders(n){return Q([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(n){return nT(n,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Va}`}defaultIdempotencyKey(){return`stainless-node-retry-${X_()}`}makeStatusError(n,s,i,o){return gt.generate(n,s,i,o)}async _callApiKey(){const n=this._options.apiKey;if(typeof n!="function")return!1;let s;try{s=await n()}catch(i){throw i instanceof se?i:new se(`Failed to get token from 'apiKey' function: ${i.message}`,{cause:i})}if(typeof s!="string"||!s)throw new se(`Expected 'apiKey' function argument to return a string but it returned ${s}`);return this.apiKey=s,!0}buildURL(n,s,i){const o=!k(this,Wd,"m",Tb).call(this)&&i||this.baseURL,u=$A(n)?new URL(n):new URL(o+(o.endsWith("/")&&n.startsWith("/")?n.slice(1):n)),f=this.defaultQuery();return LA(f)||(s={...f,...s}),typeof s=="object"&&s&&!Array.isArray(s)&&(u.search=this.stringifyQuery(s)),u.toString()}async prepareOptions(n){await this._callApiKey()}async prepareRequest(n,{url:s,options:i}){}get(n,s){return this.methodRequest("get",n,s)}post(n,s){return this.methodRequest("post",n,s)}patch(n,s){return this.methodRequest("patch",n,s)}put(n,s){return this.methodRequest("put",n,s)}delete(n,s){return this.methodRequest("delete",n,s)}methodRequest(n,s,i){return this.request(Promise.resolve(i).then(o=>({method:n,path:s,...o})))}request(n,s=null){return new jo(this,this.makeRequest(n,s,void 0))}async makeRequest(n,s,i){const o=await n,u=o.maxRetries??this.maxRetries;s==null&&(s=u),await this.prepareOptions(o);const{req:f,url:h,timeout:p}=await this.buildRequest(o,{retryCount:u-s});await this.prepareRequest(f,{url:h,options:o});const m="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),v=i===void 0?"":`, retryOf: ${i}`,b=Date.now();if(ht(this).debug(`[${m}] sending request`,qs({retryOfRequestLogID:i,method:o.method,url:h,options:o,headers:f.headers})),o.signal?.aborted)throw new nn;const E=new AbortController,_=await this.fetchWithTimeout(h,f,p,E).catch(qd),C=Date.now();if(_ instanceof globalThis.Error){const q=`retrying, ${s} attempts remaining`;if(o.signal?.aborted)throw new nn;const U=Ld(_)||/timed? ?out/i.test(String(_)+("cause"in _?String(_.cause):""));if(s)return ht(this).info(`[${m}] connection ${U?"timed out":"failed"} - ${q}`),ht(this).debug(`[${m}] connection ${U?"timed out":"failed"} (${q})`,qs({retryOfRequestLogID:i,url:h,durationMs:C-b,message:_.message})),this.retryRequest(o,s,i??m);throw ht(this).info(`[${m}] connection ${U?"timed out":"failed"} - error; no more retries left`),ht(this).debug(`[${m}] connection ${U?"timed out":"failed"} (error; no more retries left)`,qs({retryOfRequestLogID:i,url:h,durationMs:C-b,message:_.message})),U?new cf:new Co({cause:_})}const O=[..._.headers.entries()].filter(([q])=>q==="x-request-id").map(([q,U])=>", "+q+": "+JSON.stringify(U)).join(""),N=`[${m}${v}${O}] ${f.method} ${h} ${_.ok?"succeeded":"failed"} with status ${_.status} in ${C-b}ms`;if(!_.ok){const q=await this.shouldRetry(_);if(s&&q){const P=`retrying, ${s} attempts remaining`;return await JA(_.body),ht(this).info(`${N} - ${P}`),ht(this).debug(`[${m}] response error (${P})`,qs({retryOfRequestLogID:i,url:_.url,status:_.status,headers:_.headers,durationMs:C-b})),this.retryRequest(o,s,i??m,_.headers)}const U=q?"error; no more retries left":"error; not retryable";ht(this).info(`${N} - ${U}`);const B=await _.text().catch(P=>qd(P).message),G=IA(B),ee=G?void 0:B;throw ht(this).debug(`[${m}] response error (${U})`,qs({retryOfRequestLogID:i,url:_.url,status:_.status,headers:_.headers,message:ee,durationMs:Date.now()-b})),this.makeStatusError(_.status,G,ee,_.headers)}return ht(this).info(N),ht(this).debug(`[${m}] response start`,qs({retryOfRequestLogID:i,url:_.url,status:_.status,headers:_.headers,durationMs:C-b})),{response:_,options:o,controller:E,requestLogID:m,retryOfRequestLogID:i,startTime:b}}getAPIList(n,s,i){return this.requestAPIList(s,{method:"get",path:n,...i})}requestAPIList(n,s){const i=this.makeRequest(s,null,void 0);return new dT(this,i,n)}async fetchWithTimeout(n,s,i,o){const{signal:u,method:f,...h}=s||{};u&&u.addEventListener("abort",()=>o.abort());const p=setTimeout(()=>o.abort(),i),m=globalThis.ReadableStream&&h.body instanceof globalThis.ReadableStream||typeof h.body=="object"&&h.body!==null&&Symbol.asyncIterator in h.body,v={signal:o.signal,...m?{duplex:"half"}:{},method:"GET",...h};f&&(v.method=f.toUpperCase());try{return await this.fetch.call(void 0,n,v)}finally{clearTimeout(p)}}async shouldRetry(n){const s=n.headers.get("x-should-retry");return s==="true"?!0:s==="false"?!1:n.status===408||n.status===409||n.status===429||n.status>=500}async retryRequest(n,s,i,o){let u;const f=o?.get("retry-after-ms");if(f){const p=parseFloat(f);Number.isNaN(p)||(u=p)}const h=o?.get("retry-after");if(h&&!u){const p=parseFloat(h);Number.isNaN(p)?u=Date.parse(h)-Date.now():u=p*1e3}if(!(u&&0<=u&&u<60*1e3)){const p=n.maxRetries??this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(s,p)}return await vr(u),this.makeRequest(n,s-1,i)}calculateDefaultRetryTimeoutMillis(n,s){const u=s-n,f=Math.min(.5*Math.pow(2,u),8),h=1-Math.random()*.25;return f*h*1e3}async buildRequest(n,{retryCount:s=0}={}){const i={...n},{method:o,path:u,query:f,defaultBaseURL:h}=i,p=this.buildURL(u,f,h);"timeout"in i&&HA("timeout",i.timeout),i.timeout=i.timeout??this.timeout;const{bodyHeaders:m,body:v}=this.buildBody({options:i}),b=await this.buildHeaders({options:n,method:o,bodyHeaders:m,retryCount:s});return{req:{method:o,headers:b,...i.signal&&{signal:i.signal},...globalThis.ReadableStream&&v instanceof globalThis.ReadableStream&&{duplex:"half"},...v&&{body:v},...this.fetchOptions??{},...i.fetchOptions??{}},url:p,timeout:i.timeout}}async buildHeaders({options:n,method:s,bodyHeaders:i,retryCount:o}){let u={};this.idempotencyHeader&&s!=="get"&&(n.idempotencyKey||(n.idempotencyKey=this.defaultIdempotencyKey()),u[this.idempotencyHeader]=n.idempotencyKey);const f=Q([u,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o),...n.timeout?{"X-Stainless-Timeout":String(Math.trunc(n.timeout/1e3))}:{},...KA(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(n),this._options.defaultHeaders,i,n.headers]);return this.validateHeaders(f),f.values}buildBody({options:{body:n,headers:s}}){if(!n)return{bodyHeaders:void 0,body:void 0};const i=Q([s]);return ArrayBuffer.isView(n)||n instanceof ArrayBuffer||n instanceof DataView||typeof n=="string"&&i.values.has("content-type")||globalThis.Blob&&n instanceof globalThis.Blob||n instanceof FormData||n instanceof URLSearchParams||globalThis.ReadableStream&&n instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:n}:typeof n=="object"&&(Symbol.asyncIterator in n||Symbol.iterator in n&&"next"in n&&typeof n.next=="function")?{bodyHeaders:void 0,body:lv(n)}:k(this,co,"f").call(this,{body:n,headers:i})}}kf=ge,co=new WeakMap,Wd=new WeakSet,Tb=function(){return this.baseURL!=="https://api.openai.com/v1"};ge.OpenAI=kf;ge.DEFAULT_TIMEOUT=6e5;ge.OpenAIError=se;ge.APIError=gt;ge.APIConnectionError=Co;ge.APIConnectionTimeoutError=cf;ge.APIUserAbortError=nn;ge.NotFoundError=W_;ge.ConflictError=F_;ge.RateLimitError=tv;ge.BadRequestError=J_;ge.AuthenticationError=Q_;ge.InternalServerError=nv;ge.PermissionDeniedError=Z_;ge.UnprocessableEntityError=ev;ge.InvalidWebhookSignatureError=Fi;ge.toFile=pT;ge.Completions=eb;ge.Chat=vf;ge.Embeddings=sb;ge.Files=ib;ge.Images=db;ge.Audio=wr;ge.Moderations=hb;ge.Models=fb;ge.FineTuning=ti;ge.Graders=Rf;ge.VectorStores=Bo;ge.Webhooks=Ab;ge.Beta=ei;ge.Batches=Yv;ge.Uploads=Nf;ge.Responses=zo;ge.Realtime=Mo;ge.Conversations=Ef;ge.Evals=Tf;ge.Containers=Sf;ge.Videos=Sb;const GT=new ge({apiKey:"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",dangerouslyAllowBrowser:!0}),VT=async(r,n)=>{try{console.log("Analyzing speech with ChatGPT...",{transcriptLength:r.length,assignment:n});const s=`
You are an expert speech communication instructor. Analyze the following student speech transcript and provide detailed feedback in three categories:

**Assignment**: ${n}
**Transcript**: "${r}"

Please provide specific, constructive feedback in these areas:

1. **Content & Organization**: Evaluate the structure, clarity of main points, supporting evidence, and overall coherence.

2. **Language & Delivery**: Assess word choice, grammar, flow, and verbal effectiveness.

3. **Speech Patterns**: Identify filler words, repetitive phrases, pacing issues, and suggest improvements.

For each category, provide:
- Specific strengths (what they did well)
- Areas for improvement (specific issues to address)
- Actionable suggestions (concrete steps to improve)

Keep feedback constructive, encouraging, and focused on growth. Limit each category to 2-3 sentences.
`,o=(await GT.chat.completions.create({model:"gpt-4o-mini",messages:[{role:"system",content:"You are an expert speech communication instructor providing constructive feedback to students."},{role:"user",content:s}],max_tokens:1e3,temperature:.7})).choices[0].message.content;return PT(o)}catch(s){throw console.error("ChatGPT analysis error:",s),new Error(`Speech analysis failed: ${s.message}`)}},PT=r=>{const n={speechContent:r.substring(0,200)+"...",fillerWords:"Analysis of filler words and speech patterns completed.",overallScore:85};try{const s=r.match(/Content & Organization[:\s]*(.*?)(?=Language & Delivery|$)/is),i=r.match(/Language & Delivery[:\s]*(.*?)(?=Speech Patterns|$)/is),o=r.match(/Speech Patterns[:\s]*(.*?)$/is);return{speechContent:s?s[1].trim():n.speechContent,fillerWords:o?o[1].trim():n.fillerWords,bodyLanguage:i?i[1].trim():"Language and delivery analysis completed.",overallScore:YT(r)}}catch{return console.warn("Failed to parse feedback response, using default structure"),n}},YT=r=>{const n=r.toLowerCase(),s=["excellent","outstanding","great","strong","clear","well-organized","effective"],i=["poor","weak","unclear","disorganized","needs improvement","lacks"];let o=80;return s.forEach(u=>{n.includes(u)&&(o+=3)}),i.forEach(u=>{n.includes(u)&&(o-=5)}),Math.max(65,Math.min(98,o))},Vs={basic:["um","uh","er","ah","eh","hmm","mhm","mm","mmm","uhm","erm"],discourse:["like","you know","i mean","sort of","kind of","basically","actually","literally","obviously","clearly","definitely","absolutely","totally","really","quite","rather","pretty much","more or less"],hesitation:["let me see","let me think","how do i put this","what i mean is","how should i say","you see","the thing is","what i'm trying to say","if you will","as it were","so to speak","in a sense","in a way"],transition:["so","well","okay","right","now","then","anyway","anyhow","moving on","next","furthermore","moreover","additionally","also"],confirmation:["right?","okay?","you know?","see?","understand?","make sense?","follow me?","with me?","yeah?","no?"]},Ky=[...Vs.basic,...Vs.discourse,...Vs.hesitation,...Vs.transition,...Vs.confirmation],Xy={basic:1,discourse:.7,hesitation:.8,transition:.5,confirmation:.6},Jy=r=>{const n=r.toLowerCase().trim();for(const[s,i]of Object.entries(Vs))if(i.includes(n))return s;return null},Qy=r=>{if(!r||typeof r!="string")return{totalCount:0,weightedScore:0,fillerWordsUsed:[],categoryBreakdown:{},analysis:"No transcript available for filler word analysis."};const s=r.toLowerCase().replace(/[^\w\s']/g," ").replace(/\s+/g," ").trim().split(" "),i=[],o={};Object.keys(Vs).forEach(_=>{o[_]=0});for(let _=0;_<s.length;_++){const C=s[_];if(Ky.includes(C)){const O=Jy(C);O&&(i.push({word:C,category:O,position:_,weight:Xy[O]}),o[O]++)}for(let O=2;O<=Math.min(4,s.length-_);O++){const N=s.slice(_,_+O).join(" ");if(Ky.includes(N)){const q=Jy(N);if(q){i.push({word:N,category:q,position:_,weight:Xy[q]}),o[q]++;break}}}}const u=KT(i),f=u.length,h=u.reduce((_,C)=>_+C.weight,0),p={};u.forEach(_=>{p[_.word]=(p[_.word]||0)+1});const m=[...new Set(u.map(_=>_.word))].sort(),v=s.length/150,b=v>0?f/v:0,E=XT(f,b,o,p);return{totalCount:f,weightedScore:Math.round(h*10)/10,fillerWordsUsed:m,categoryBreakdown:o,fillersPerMinute:Math.round(b*10)/10,analysis:E,detections:u}},KT=r=>{const n=r.sort((i,o)=>i.position-o.position),s=[];for(let i=0;i<n.length;i++){const o=n[i];s.some(f=>{const h=o.position+o.word.split(" ").length-1,p=f.position+f.word.split(" ").length-1;return o.position<=p&&h>=f.position})||s.push(o)}return s},XT=(r,n,s,i)=>r===0?"No filler words detected.":Object.entries(i).map(([u,f])=>`"${u}" (${f})`).join(", "),JT=async()=>{const{data:r,error:n}=await Ce.from("classes").select("*").order("name");return n?(console.error("Error fetching classes:",n),[]):r},Zy=async r=>{const{data:n,error:s}=await Ce.from("assignments").select(`
      *,
      classes!inner(name)
    `).eq("classes.name",r).order("created_at",{ascending:!1});return s?(console.error("Error fetching assignments:",s),[]):n.map(i=>({id:i.id,title:i.title,description:i.description,status:i.status||"",dueDate:new Date(i.due_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}))},QT=async r=>{const{data:n,error:s}=await Ce.from("students").select(`
      *,
      class_enrollments!inner(
        classes!inner(name)
      )
    `).eq("class_enrollments.classes.name",r).order("name");return s?(console.error("Error fetching students:",s),[]):await Promise.all(n.map(async o=>{const u=await cO(o.id);return{id:o.id,name:o.name,email:o.email,overallGrade:u.letterGrade,totalPoints:`${u.totalGrade}/100`,submissionCount:u.submissionCount,lastActivity:""}}))},ZT=async r=>{const{data:n,error:s}=await Ce.from("grades").select(`
      *,
      submissions!inner(
        student_id,
        assignments(id, title)
      )
    `).eq("submissions.student_id",r);return s?(console.error("Error fetching student grades:",s),[]):n.map(i=>({assignmentId:i.submissions.assignments.id,assignmentName:i.submissions.assignments.title,grade:$o(i.total_score),points:i.total_score||0,status:"Graded"}))},WT=async r=>{const{data:n}=await Ce.from("assignments").select("class_id").eq("id",r).single();if(!n)return[];const{data:s}=await Ce.from("students").select(`
      id,
      name,
      email,
      class_enrollments!inner(class_id)
    `).eq("class_enrollments.class_id",n.class_id),{data:i}=await Ce.from("submissions").select(`
      student_id,
      status,
      grades(total_score)
    `).eq("assignment_id",r);return s.map(o=>{const u=i?.find(h=>h.student_id===o.id),f=u?.grades?.[0];return{studentId:o.id,name:o.name,email:o.email,status:u?u.status==="graded"?"Finished":"In Progress":"Not Started",grade:f?$o(f.total_score):"N/A",points:f?`${f.total_score}/100`:"0/100"}})},FT=async(r,n=null)=>{let s=Ce.from("feedback").select(`
      *,
      grades!inner(
        submissions!inner(assignment_id, student_id, transcript, submitted_at)
      )
    `).eq("grades.submissions.assignment_id",r);n&&(s=s.eq("grades.submissions.student_id",n));const{data:i,error:o}=await s.limit(1);if(o||!i.length)return{fillerWords:"No feedback available yet.",speechContent:"No feedback available yet.",bodyLanguage:"No feedback available yet.",transcript:"No transcript available yet.",submittedAt:null};const u=i[0],f=u.grades.submissions;return{fillerWords:u.filler_words_feedback||"No feedback available yet.",speechContent:u.speech_content_feedback||"No feedback available yet.",bodyLanguage:u.body_language_feedback||"No feedback available yet.",transcript:f.transcript||"No transcript available yet.",submittedAt:f.submitted_at}},eO=async(r,n)=>{try{const{data:s,error:i}=await Ce.from("submissions").select(`
        id,
        video_url,
        transcript,
        status,
        submitted_at,
        students(id, name, email),
        assignments(id, title, description),
        grades(
          id,
          total_score,
          filler_word_count,
          filler_words_used,
          filler_words_per_minute,
          filler_category_breakdown,
          graded_at,
          feedback(
            filler_words_feedback,
            speech_content_feedback,
            body_language_feedback
          )
        )
      `).eq("assignment_id",r).eq("student_id",n).single();if(i||!s)return null;const o=s,u=o.grades?.[0],f=u?.feedback?.[0];return{student:{id:o.students.id,name:o.students.name,email:o.students.email},assignment:{id:o.assignments.id,title:o.assignments.title,description:o.assignments.description},submission:{id:o.id,videoUrl:o.video_url,transcript:o.transcript,status:o.status,submittedAt:o.submitted_at},grade:u?{totalScore:u.total_score,fillerWordCount:u.filler_word_count,fillerWordsUsed:u.filler_words_used||[],fillersPerMinute:u.filler_words_per_minute||0,categoryBreakdown:u.filler_category_breakdown||{},gradedAt:u.graded_at,letterGrade:$o(u.total_score)}:null,feedback:f?{fillerWords:f.filler_words_feedback,speechContent:f.speech_content_feedback,bodyLanguage:f.body_language_feedback}:null}}catch(s){return console.error("Error fetching detailed student feedback:",s),null}},$o=r=>r>=97?"A+":r>=93?"A":r>=90?"A-":r>=87?"B+":r>=83?"B":r>=80?"B-":r>=77?"C+":r>=73?"C":r>=70?"C-":r>=67?"D+":r>=63?"D":r>=60?"D-":"F",tO=async r=>{const{data:n}=await Ce.from("assignments").select("*").eq("id",r).single();return n?{id:n.id,title:n.title,description:n.description,status:n.status||"",dueDate:new Date(n.due_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),rawDueDate:n.due_date}:null},nO=async r=>await ZT(r),sO=async(r,n)=>{const{data:s}=await Ce.from("submissions").select("status").eq("student_id",r).eq("assignment_id",n).single();if(!s)return"Not Started";switch(s.status){case"graded":return"In Progress";case"processing":return"In Progress";default:return"Not Started"}},aO=async(r,n,s)=>{try{const i=Date.now(),o=`${n}/${s}/${i}.webm`,{data:u,error:f}=await Ce.storage.from("speech-videos").upload(o,r,{cacheControl:"3600",upsert:!1,contentType:"video/webm"});if(f)throw console.error("Storage upload error:",f),f;const{data:h}=Ce.storage.from("speech-videos").getPublicUrl(o);return{path:u.path,publicUrl:h.publicUrl}}catch(i){throw console.error("Error uploading video:",i),i}},iO=async(r,n)=>{try{console.log("Starting AI analysis pipeline..."),console.log("Step 1: Transcribing audio...");const s=await zA(r);console.log("Step 2: Analyzing filler words...");const i=Qy(s.text);console.log("Step 3: Analyzing speech content...");const u={...await VT(s.text,n),fillerWords:i.analysis,fillerWordData:i};return{transcript:s.text,duration:s.duration,language:s.language,analysis:u,fillerWordAnalysis:i,aiProcessed:!0}}catch(s){console.error("AI processing failed:",s);const i=Qy("");return{transcript:"AI transcription temporarily unavailable. Please try again later.",duration:null,language:"en",analysis:{speechContent:"AI analysis temporarily unavailable. Your submission has been recorded.",fillerWords:"Filler word analysis will be available when AI processing is restored.",bodyLanguage:"Content analysis will be available when AI processing is restored.",overallScore:75},fillerWordAnalysis:i,aiProcessed:!1,error:s.message}}},rO=async r=>{try{const{data:n,error:s}=await Ce.from("classes").select("id").eq("name",r.className).single();if(s||!n)throw new Error("Class not found");const{data:i,error:o}=await Ce.from("assignments").insert([{class_id:n.id,title:r.title,description:r.description,max_duration_seconds:r.maxDuration||60,due_date:r.dueDate}]).select().single();if(o)throw o;return i}catch(n){throw console.error("Error creating assignment:",n),n}},lO=async(r,n=null,s="Speech Assignment")=>{try{const{data:i,error:o}=await Ce.from("submissions").select("id").eq("assignment_id",r.assignmentId).eq("student_id",r.studentId).single();let u;if(i){const{data:U,error:B}=await Ce.from("submissions").update({video_url:r.videoUrl,transcript:r.transcript,status:"graded",submitted_at:new Date().toISOString()}).eq("id",i.id).select().single();if(B)throw B;u=U}else{const{data:U,error:B}=await Ce.from("submissions").insert([{assignment_id:r.assignmentId,student_id:r.studentId,video_url:r.videoUrl,transcript:r.transcript,status:"graded"}]).select().single();if(B)throw B;u=U}let f=null,h=80;n?(console.log("Processing video with AI..."),f=await iO(n,s),h=f.analysis.overallScore,u.id&&f.transcript&&f.transcript!==r.transcript&&await Ce.from("submissions").update({transcript:f.transcript}).eq("id",u.id)):h=Math.floor(Math.random()*31)+70;const p=f?.fillerWordAnalysis?.totalCount||Math.floor(Math.random()*10)+1,m=f?.fillerWordAnalysis?.fillerWordsUsed||[],v=f?.fillerWordAnalysis?.fillersPerMinute||0,b=f?.fillerWordAnalysis?.categoryBreakdown||{},{data:E,error:_}=await Ce.from("grades").select("id").eq("submission_id",u.id).single();let C;if(E){const{data:U,error:B}=await Ce.from("grades").update({total_score:h,filler_word_count:p,filler_words_used:m,filler_words_per_minute:v,filler_category_breakdown:b,graded_at:new Date().toISOString()}).eq("id",E.id).select().single();if(B)throw B;C=U}else{const{data:U,error:B}=await Ce.from("grades").insert([{submission_id:u.id,total_score:h,filler_word_count:p,filler_words_used:m,filler_words_per_minute:v,filler_category_breakdown:b}]).select().single();if(B)throw B;C=U}let O;if(f&&f.aiProcessed)O={filler_words:f.analysis.fillerWords,speech_content:f.analysis.speechContent,body_language:f.analysis.bodyLanguage};else{const U=h>=90?"high":h>=80?"medium":"low";O={high:{filler_words:"Excellent control of filler words. Very natural and confident delivery.",speech_content:"Outstanding content with clear structure and compelling arguments.",body_language:"Confident posture, excellent eye contact, and effective use of gestures."},medium:{filler_words:"Good control of filler words with room for minor improvement.",speech_content:"Well-organized content with solid supporting evidence.",body_language:"Good posture and eye contact. Consider using more hand gestures."},low:{filler_words:"Work on reducing filler words like 'um' and 'uh' for smoother delivery.",speech_content:"Content is adequate but could benefit from better organization.",body_language:"Focus on maintaining eye contact and confident posture throughout."}}[U]}const{data:N,error:q}=await Ce.from("feedback").select("id").eq("grade_id",C.id).single();return N?await Ce.from("feedback").update({filler_words_feedback:O.filler_words,speech_content_feedback:O.speech_content,body_language_feedback:O.body_language,created_at:new Date().toISOString()}).eq("id",N.id):await Ce.from("feedback").insert([{grade_id:C.id,filler_words_feedback:O.filler_words,speech_content_feedback:O.speech_content,body_language_feedback:O.body_language}]),{submission:u,grade:C}}catch(i){throw console.error("Error creating submission:",i),i}},Wy=async r=>{try{const{data:n,error:s}=await Ce.from("class_enrollments").select(`
        classes(
          id,
          name,
          assignments(
            id,
            title,
            description,
            due_date,
            max_duration_seconds
          )
        )
      `).eq("student_id",r);if(s)throw s;const i=[];for(const o of n)for(const u of o.classes.assignments){const{data:f}=await Ce.from("submissions").select("status").eq("assignment_id",u.id).eq("student_id",r).single();i.push({id:u.id,title:u.title,description:u.description,className:o.classes.name,dueDate:new Date(u.due_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),status:f?(f.status==="graded","In Progress"):"Not Started",maxDuration:u.max_duration_seconds})}return i}catch(n){return console.error("Error fetching student assignments:",n),[]}},oO=async()=>{try{const{data:r,error:n}=await Ce.from("students").select(`
        id,
        name,
        email,
        created_at,
        primary_class:classes!primary_class_id(
          id,
          name,
          teacher:teachers(name, email)
        )
      `).order("name");if(n)throw n;return r.map(s=>({id:s.id,name:s.name,email:s.email,primaryClass:s.primary_class?.name,primaryTeacher:s.primary_class?.teacher?.name,primaryTeacherEmail:s.primary_class?.teacher?.email}))}catch(r){return console.error("Error fetching students:",r),[]}},uO=async r=>{try{const{data:n,error:s}=await Ce.from("students").select(`
        id,
        name,
        email,
        created_at,
        primary_class:classes!primary_class_id(
          id,
          name,
          teacher:teachers(name, email)
        ),
        enrollments:class_enrollments(
          classes(id, name)
        )
      `).eq("id",r).single();if(s)throw s;return{id:n.id,name:n.name,email:n.email,primaryClass:n.primary_class?.name,primaryTeacher:n.primary_class?.teacher?.name,primaryTeacherEmail:n.primary_class?.teacher?.email,enrolledClasses:n.enrollments?.map(i=>i.classes.name)||[]}}catch(n){return console.error("Error fetching student profile:",n),null}},cO=async r=>{try{const{data:n,error:s}=await Ce.from("grades").select(`
        total_score,
        submissions!inner(student_id)
      `).eq("submissions.student_id",r);if(s)throw s;if(!n||n.length===0)return{totalGrade:0,letterGrade:"N/A",submissionCount:0};const i=n.reduce((u,f)=>u+(f.total_score||0),0),o=Math.round(i/n.length);return{totalGrade:o,letterGrade:$o(o),submissionCount:n.length}}catch(n){return console.error("Error calculating student total grade:",n),{totalGrade:0,letterGrade:"N/A",submissionCount:0}}};function dO({onSwitchToStudent:r,onEnterClass:n}){const[s,i]=re.useState([]),[o,u]=re.useState(!0);return re.useEffect(()=>{(async()=>{try{const h=await JT();i(h)}catch(h){console.error("Error fetching classes:",h)}finally{u(!1)}})()},[]),o?w.jsx("div",{className:"teacher-dashboard",children:"Loading..."}):w.jsxs("div",{className:"teacher-dashboard",children:[w.jsx("h2",{className:"dashboard-title",children:"Teacher Dashboard"}),w.jsx("div",{className:"dashboard-boxes",children:s.map(f=>w.jsxs("div",{className:"dashboard-box",children:[w.jsx("h3",{children:f.name}),w.jsx("button",{className:"enter-class-btn",onClick:()=>n(f.name),children:"Enter Class"})]},f.id))}),w.jsx("button",{className:"student-dashboard-btn",onClick:r,children:"Student Dashboard"})]})}function fO({studentId:r,onSwitchToTeacher:n,onViewStudentAssignment:s}){const[i,o]=re.useState([]),[u,f]=re.useState(null),[h,p]=re.useState(!0);return re.useEffect(()=>{const m=async()=>{try{const[v,b]=await Promise.all([Wy(r),uO(r)]);o(v),f(b)}catch(v){console.error("Error fetching student data:",v)}finally{p(!1)}};if(r){m();const v=setInterval(()=>{Wy(r).then(o)},3e4);return()=>clearInterval(v)}},[r]),h?w.jsx("div",{className:"student-dashboard",children:"Loading..."}):w.jsxs("div",{className:"student-dashboard",children:[w.jsxs("div",{className:"student-header",children:[w.jsx("h2",{className:"dashboard-title",children:"Student Dashboard"}),u&&w.jsxs("div",{className:"student-info",children:[w.jsx("h3",{children:u.name}),w.jsxs("p",{children:["Primary Class: ",u.primaryClass]}),w.jsxs("p",{children:["Teacher: ",u.primaryTeacher]})]})]}),w.jsxs("div",{className:"todo-section",children:[w.jsx("h3",{className:"todo-title",children:"To-Do:"}),i.map((m,v)=>w.jsxs("div",{children:[w.jsx("div",{className:"assignment-item",children:w.jsxs("div",{className:"assignment-content",onClick:()=>s(m),children:[w.jsxs("div",{className:"assignment-text",children:[w.jsx("h4",{className:"assignment-main",children:m.title}),w.jsx("p",{className:"assignment-sub",children:m.description}),w.jsxs("p",{className:"assignment-class",children:["Class: ",m.className]})]}),w.jsxs("div",{className:"assignment-status",children:[w.jsx("span",{className:"status-text",children:m.status}),w.jsxs("span",{className:"due-date",children:["Due: ",m.dueDate]})]})]})}),v<i.length-1&&w.jsx("hr",{className:"assignment-divider"})]},m.id))]}),w.jsx("button",{className:"teacher-dashboard-btn",onClick:n,children:"Teacher Dashboard"})]})}function hO({isOpen:r,onClose:n,onSubmit:s}){const[i,o]=re.useState({title:"",description:"",startDate:"",dueDate:""}),u=p=>{const{name:m,value:v}=p.target;o(b=>({...b,[m]:v}))},f=p=>{p.preventDefault(),s(i),o({title:"",description:"",startDate:"",dueDate:""}),n()},h=()=>{o({title:"",description:"",startDate:"",dueDate:""}),n()};return r?w.jsx("div",{className:"modal-overlay",onClick:h,children:w.jsxs("div",{className:"modal-content",onClick:p=>p.stopPropagation(),children:[w.jsx("h2",{className:"modal-title",children:"New Assignment"}),w.jsxs("form",{onSubmit:f,className:"assignment-form",children:[w.jsxs("div",{className:"form-group",children:[w.jsx("label",{htmlFor:"title",className:"form-label",children:"Title"}),w.jsx("input",{type:"text",id:"title",name:"title",value:i.title,onChange:u,className:"form-input",required:!0})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{htmlFor:"description",className:"form-label",children:"Description"}),w.jsx("textarea",{id:"description",name:"description",value:i.description,onChange:u,className:"form-textarea",rows:"4",required:!0})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{htmlFor:"startDate",className:"form-label",children:"Start Date"}),w.jsx("input",{type:"datetime-local",id:"startDate",name:"startDate",value:i.startDate,onChange:u,className:"form-input",required:!0})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{htmlFor:"dueDate",className:"form-label",children:"Due Date"}),w.jsx("input",{type:"datetime-local",id:"dueDate",name:"dueDate",value:i.dueDate,onChange:u,className:"form-input",required:!0})]}),w.jsxs("div",{className:"form-buttons",children:[w.jsx("button",{type:"button",onClick:h,className:"btn-cancel",children:"Cancel"}),w.jsx("button",{type:"submit",className:"btn-submit",children:"Create Assignment"})]})]})]})}):null}function mO({className:r,onBack:n,onViewAssignment:s,onViewStudent:i}){const[o,u]=re.useState("assignments"),[f,h]=re.useState(!1),[p,m]=re.useState({}),[v,b]=re.useState([]),[E,_]=re.useState([]),[C,O]=re.useState(!0);re.useEffect(()=>{(async()=>{try{const[ee,Y]=await Promise.all([Zy(r),QT(r)]);b(ee),_(Y)}catch(ee){console.error("Error fetching class data:",ee)}finally{O(!1)}})()},[r]);const N=()=>{h(!0)},q=()=>{h(!1)},U=async G=>{try{const ee=await rO({...G,className:r,dueDate:G.dueDate?new Date(G.dueDate).toISOString():null});console.log("New assignment created:",ee);const Y=await Zy(r);b(Y)}catch(ee){console.error("Error creating assignment:",ee),alert("Failed to create assignment. Please try again.")}},B=G=>{m(ee=>({...ee,[G]:!ee[G]}))};return C?w.jsx("div",{className:"class-page",children:"Loading..."}):w.jsxs("div",{className:"class-page",children:[w.jsxs("div",{className:"class-header",children:[w.jsx("h2",{className:"class-title",children:r}),w.jsx("button",{className:"new-assignment-btn",onClick:N,children:"New Assignment"})]}),w.jsxs("div",{className:"class-tabs",children:[w.jsx("button",{className:`tab-button ${o==="assignments"?"active":""}`,onClick:()=>u("assignments"),children:"Assignments"}),w.jsx("button",{className:`tab-button ${o==="students"?"active":""}`,onClick:()=>u("students"),children:"Students"})]}),w.jsxs("div",{className:"tab-content",children:[o==="assignments"&&w.jsx("div",{className:"assignments-tab",children:v.map(G=>w.jsxs("div",{className:"assignment-card",onClick:()=>s(G),children:[w.jsxs("div",{className:"assignment-info",children:[w.jsx("h3",{className:"assignment-title",children:G.title}),w.jsx("p",{className:"assignment-description",children:G.description})]}),w.jsxs("div",{className:"assignment-details",children:[w.jsx("span",{className:`assignment-status ${G.status.toLowerCase()}`,children:G.status}),w.jsxs("span",{className:"assignment-due",children:["Due: ",G.dueDate]})]})]},G.id))}),o==="students"&&w.jsx("div",{className:"students-tab",children:E.map(G=>w.jsxs("div",{className:"student-card",children:[w.jsxs("div",{className:"student-info",onClick:()=>i(G),children:[w.jsx("h3",{className:"student-name",children:G.name}),w.jsx("p",{className:"student-email",children:G.email})]}),w.jsxs("div",{className:"student-details",children:[w.jsxs("span",{className:"student-activity",children:["Last active: ",G.lastActivity]}),w.jsxs("div",{className:"student-grade-section",children:[w.jsx("button",{className:"student-grade-reveal-btn",onClick:()=>B(G.id),children:p[G.id]?"Hide Grade":"Show Grade"}),p[G.id]&&w.jsxs("div",{className:"student-overall-grade",children:[w.jsxs("span",{children:["Overall: ",G.overallGrade," (",G.totalPoints,")"]}),w.jsxs("span",{className:"submission-count",children:[G.submissionCount," submissions"]})]})]})]})]},G.id))})]}),w.jsx("button",{className:"back-btn",onClick:n,children:"Back to Dashboard"}),w.jsx(hO,{isOpen:f,onClose:q,onSubmit:U})]})}function gO({videoUrl:r,className:n=""}){const[s,i]=re.useState(!0),[o,u]=re.useState(!1);re.useEffect(()=>{i(!0),u(!1)},[r]);const f=()=>{i(!1),u(!1)},h=()=>{i(!1),u(!0)};return r?w.jsxs("div",{className:`video-player-container ${n}`,children:[s&&w.jsx("div",{className:"video-loading",children:w.jsx("p",{children:"Loading video..."})}),o&&w.jsx("div",{className:"video-error",children:w.jsx("p",{children:"Failed to load video"})}),w.jsx("video",{src:r,controls:!0,className:"video-player",onLoadedData:f,onError:h,style:{display:s||o?"none":"block"},children:"Your browser does not support the video tag."})]}):w.jsx("div",{className:`video-player-container ${n}`,children:w.jsx("div",{className:"video-placeholder",children:w.jsx("p",{children:"No video submitted yet"})})})}function pO({assignment:r,onBack:n,onViewStudent:s}){const[i,o]=re.useState({}),[u,f]=re.useState([]),[h,p]=re.useState(!0),[m,v]=re.useState(null),[b,E]=re.useState(!1);re.useEffect(()=>{r?(async()=>{try{if(!r?.id){p(!1);return}const U=(await WT(r.id)).map(B=>({id:B.studentId,name:B.name,email:B.email,status:B.status,grade:B.grade}));f(U)}catch(q){console.error("Error fetching student progress:",q)}finally{p(!1)}})():p(!1)},[r]);const _=N=>{o(q=>({...q,[N]:!q[N]}))},C=async N=>{E(!0);try{const q=await eO(r.id,N);v(q)}catch(q){console.error("Error fetching student feedback:",q),alert("Failed to load student feedback")}finally{E(!1)}},O=()=>{v(null)};return h?w.jsx("div",{className:"assignment-detail-page",children:"Loading..."}):r?w.jsxs("div",{className:"assignment-detail-page",children:[w.jsxs("div",{className:"assignment-detail-header",children:[w.jsx("h2",{className:"assignment-detail-title",children:r.title}),w.jsx("p",{className:"assignment-detail-description",children:r.description}),w.jsxs("p",{className:"assignment-detail-due",children:["Due: ",r.dueDate]})]}),w.jsxs("div",{className:"student-progress-section",children:[w.jsx("h3",{className:"section-title",children:"Student Progress"}),w.jsx("div",{className:"student-progress-list",children:u.map(N=>w.jsxs("div",{className:"student-progress-card",children:[w.jsxs("div",{className:"student-progress-info",onClick:()=>s(N),children:[w.jsx("h4",{className:"student-progress-name",children:N.name}),w.jsx("p",{className:"student-progress-email",children:N.email})]}),w.jsxs("div",{className:"student-progress-details",children:[w.jsx("span",{className:`progress-status ${N.status.toLowerCase().replace(" ","-")}`,children:N.status}),w.jsxs("div",{className:"assignment-grade-section",children:[w.jsx("button",{className:"assignment-grade-reveal-btn",onClick:()=>_(N.id),children:i[N.id]?"Hide Grade":"Show Grade"}),i[N.id]&&w.jsxs("span",{className:"assignment-student-grade",children:["Grade: ",N.grade]})]}),N.status!=="Not Started"&&w.jsx("button",{className:"view-feedback-btn",onClick:()=>C(N.id),disabled:b,children:b?"Loading...":"View Feedback"})]})]},N.id))})]}),w.jsx("button",{className:"back-btn",onClick:n,children:"Back to Class"}),m&&w.jsx("div",{className:"modal-overlay",onClick:O,children:w.jsxs("div",{className:"modal-content teacher-feedback-modal",onClick:N=>N.stopPropagation(),children:[w.jsxs("div",{className:"teacher-feedback-header",children:[w.jsxs("h2",{children:["Detailed Feedback: ",m.student.name]}),w.jsx("button",{className:"close-modal-btn",onClick:O,children:""})]}),w.jsxs("div",{className:"teacher-feedback-content",children:[w.jsxs("div",{className:"grade-summary",children:[w.jsx("h3",{children:"Grade Summary"}),w.jsxs("div",{className:"grade-details",children:[w.jsxs("span",{className:"grade-score",children:[m.grade?.letterGrade||"N/A","(",m.grade?.totalScore||"N/A","/100)"]}),m.grade?.gradedAt&&w.jsxs("span",{className:"grade-date",children:["Graded: ",new Date(m.grade.gradedAt).toLocaleString()]})]})]}),w.jsxs("div",{className:"teacher-transcript-section",children:[w.jsx("h3",{children:"Speech Transcript"}),w.jsx("div",{className:"teacher-transcript-content",children:m.submission?.transcript?w.jsx("p",{className:"transcript-text",children:m.submission.transcript}):w.jsx("p",{className:"no-transcript",children:"No transcript available"})}),m.submission?.submittedAt&&w.jsxs("p",{className:"submission-info",children:["Submitted: ",new Date(m.submission.submittedAt).toLocaleString()]})]}),m.feedback&&w.jsxs("div",{className:"teacher-feedback-analysis",children:[w.jsx("h3",{children:"AI Analysis & Feedback"}),w.jsxs("div",{className:"feedback-category",children:[w.jsx("h4",{children:"Filler Words Analysis"}),w.jsx("p",{children:m.feedback.fillerWords}),m.grade&&w.jsxs("div",{className:"filler-word-details",children:[w.jsxs("div",{className:"filler-stats",children:[w.jsxs("span",{className:"filler-count",children:["Total filler words: ",m.grade.fillerWordCount]}),m.grade.fillersPerMinute>0&&w.jsxs("span",{className:"filler-rate",children:["Rate: ",m.grade.fillersPerMinute," per minute"]})]}),m.grade.fillerWordsUsed&&m.grade.fillerWordsUsed.length>0&&w.jsxs("div",{className:"filler-words-used",children:[w.jsx("strong",{children:"Specific filler words detected:"}),w.jsx("div",{className:"filler-word-tags",children:m.grade.fillerWordsUsed.map((N,q)=>w.jsx("span",{className:"filler-word-tag",children:N},q))})]}),m.grade.categoryBreakdown&&Object.keys(m.grade.categoryBreakdown).length>0&&w.jsxs("div",{className:"filler-category-breakdown",children:[w.jsx("strong",{children:"Breakdown by type:"}),w.jsx("div",{className:"category-stats",children:Object.entries(m.grade.categoryBreakdown).filter(([N,q])=>q>0).map(([N,q])=>w.jsxs("span",{className:"category-stat",children:[N,": ",q]},N))})]})]})]}),w.jsxs("div",{className:"feedback-category",children:[w.jsx("h4",{children:"Speech Content Analysis"}),w.jsx("p",{children:m.feedback.speechContent})]}),w.jsxs("div",{className:"feedback-category",children:[w.jsx("h4",{children:"Delivery & Language Analysis"}),w.jsx("p",{children:m.feedback.bodyLanguage})]})]}),m.submission?.videoUrl&&w.jsxs("div",{className:"teacher-video-section",children:[w.jsx("h3",{children:"Student Video"}),w.jsx(gO,{videoUrl:m.submission.videoUrl,className:"teacher-video-player"})]})]})]})})]}):w.jsxs("div",{className:"assignment-detail-page",children:[w.jsx("h2",{children:"Assignment not found"}),w.jsx("button",{className:"back-btn",onClick:n,children:"Back to Class"})]})}function yO({student:r,onBack:n}){const[s,i]=re.useState([]),[o,u]=re.useState(!0);if(re.useEffect(()=>{(async()=>{try{const C=await nO(r.id);i(C)}catch(C){console.error("Error fetching student data:",C)}finally{u(!1)}})()},[r.id]),o)return w.jsx("div",{className:"student-detail-page",children:"Loading..."});const f=s.map(_=>({id:_.assignmentId,assignmentName:_.assignmentName,grade:_.grade,points:_.points,maxPoints:100,status:_.status})),h=f.filter(_=>_.status==="Graded"),p=h.reduce((_,C)=>_+C.points,0),m=h.reduce((_,C)=>_+C.maxPoints,0),v=m>0?Math.round(p/m*100):0,E=(_=>_>=97?"A+":_>=93?"A":_>=90?"A-":_>=87?"B+":_>=83?"B":_>=80?"B-":_>=77?"C+":_>=73?"C":_>=70?"C-":_>=67?"D+":_>=63?"D":_>=60?"D-":"F")(v);return w.jsxs("div",{className:"student-detail-page",children:[w.jsxs("div",{className:"student-detail-header",children:[w.jsx("h2",{className:"student-detail-title",children:r.name}),w.jsx("p",{className:"student-detail-email",children:r.email})]}),w.jsxs("div",{className:"assignments-grades-section",children:[w.jsx("h3",{className:"section-title",children:"Assignment Grades"}),w.jsx("div",{className:"assignments-grades-list",children:f.map(_=>w.jsxs("div",{className:"assignment-grade-card",children:[w.jsxs("div",{className:"assignment-grade-info",children:[w.jsx("h4",{className:"assignment-grade-name",children:_.assignmentName}),w.jsx("span",{className:`assignment-grade-status ${_.status.toLowerCase().replace(" ","-")}`,children:_.status})]}),w.jsxs("div",{className:"assignment-grade-details",children:[w.jsx("span",{className:"assignment-grade-value",children:_.grade}),w.jsxs("span",{className:"assignment-grade-points",children:[_.points,"/",_.maxPoints]})]})]},_.id))})]}),w.jsx("div",{className:"total-grade-section",children:w.jsxs("div",{className:"total-grade-card",children:[w.jsx("h3",{className:"total-grade-title",children:"Total Grade"}),w.jsxs("div",{className:"total-grade-info",children:[w.jsx("span",{className:"total-grade-letter",children:E}),w.jsxs("span",{className:"total-grade-percentage",children:[v,"%"]}),w.jsxs("span",{className:"total-grade-points",children:[p,"/",m," points"]})]})]})}),w.jsx("button",{className:"back-btn",onClick:n,children:"Back"})]})}function _O({assignment:r,studentId:n,onBack:s,onViewRecording:i}){const[o,u]=re.useState(null),[f,h]=re.useState("Not Started"),[p,m]=re.useState(null),[v,b]=re.useState(!0);re.useEffect(()=>{(async()=>{try{if(!r?.id||!n){b(!1);return}const[N,q,U]=await Promise.all([tO(r.id),sO(n,r.id),FT(r.id,n)]);u(N),h(q),m(U)}catch(N){console.error("Error fetching assignment data:",N)}finally{b(!1)}})()},[r?.id,n]);const E=f==="In Progress",C=!(o?new Date>new Date(o.rawDueDate):!1);return v?w.jsx("div",{className:"student-assignment-page",children:"Loading..."}):o?w.jsxs("div",{className:"student-assignment-page",children:[w.jsxs("div",{className:"student-assignment-header",children:[w.jsx("h2",{className:"student-assignment-title",children:o.title}),w.jsx("p",{className:"student-assignment-description",children:o.description})]}),w.jsxs("div",{className:"feedback-section",children:[w.jsx("h3",{className:"feedback-title",children:"Your Speech Analysis:"}),w.jsx("div",{className:"transcript-section",children:w.jsxs("div",{className:"feedback-category transcript-category",children:[w.jsx("h4",{className:"feedback-category-title",children:"Speech Transcript"}),w.jsx("div",{className:"transcript-content",children:E&&p&&p.transcript&&p.transcript!=="No transcript available yet."?w.jsx("p",{className:"transcript-text",children:p.transcript}):w.jsx("p",{className:"transcript-placeholder",children:E?"Transcript processing...":"Submit your speech to see the transcript"})}),E&&p?.submittedAt&&w.jsxs("p",{className:"submission-timestamp",children:["Submitted: ",new Date(p.submittedAt).toLocaleString()]})]})}),w.jsxs("div",{className:"feedback-categories",children:[w.jsxs("div",{className:"feedback-category",children:[w.jsx("h4",{className:"feedback-category-title",children:"Filler Words Analysis"}),w.jsx("p",{className:"feedback-content",children:E&&p?p.fillerWords:"N/A"})]}),w.jsxs("div",{className:"feedback-category",children:[w.jsx("h4",{className:"feedback-category-title",children:"Speech Content Analysis"}),w.jsx("p",{className:"feedback-content",children:E&&p?p.speechContent:"N/A"})]}),w.jsxs("div",{className:"feedback-category",children:[w.jsx("h4",{className:"feedback-category-title",children:"Delivery & Language Analysis"}),w.jsx("p",{className:"feedback-content",children:E&&p?p.bodyLanguage:"N/A"})]})]})]}),C&&w.jsx("div",{className:"record-button-container",children:w.jsx("button",{className:"record-btn",onClick:()=>i(r),children:E?"Re-record":"Record"})}),!C&&w.jsx("div",{className:"record-button-container",children:w.jsx("p",{className:"due-date-passed",children:"Assignment due date has passed. Recording is no longer available."})}),w.jsx("button",{className:"back-btn",onClick:s,children:"Back to Dashboard"})]}):w.jsxs("div",{className:"student-assignment-page",children:[w.jsx("h2",{children:"Assignment not found"}),w.jsx("button",{className:"back-btn",onClick:s,children:"Back to Dashboard"})]})}function vO({assignment:r,studentId:n,onBack:s}){const[i,o]=re.useState(!1),[u,f]=re.useState(!1),[h,p]=re.useState(!1),[m,v]=re.useState(null),[b,E]=re.useState(null),_=re.useRef(null),C=re.useRef(null),O=re.useRef([]);re.useEffect(()=>(N(),()=>{q()}),[]);const N=async()=>{try{const Y=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});v(Y),_.current&&(_.current.srcObject=Y)}catch(Y){console.error("Error accessing camera:",Y),alert("Camera access denied. Please allow camera access to record.")}},q=()=>{m&&(m.getTracks().forEach(Y=>Y.stop()),v(null))},U=()=>{m&&(O.current=[],C.current=new MediaRecorder(m,{mimeType:"video/webm;codecs=vp9"}),C.current.ondataavailable=Y=>{Y.data.size>0&&O.current.push(Y.data)},C.current.onstop=()=>{const Y=new Blob(O.current,{type:"video/webm"});E(Y),f(!0)},C.current.start(),o(!0))},B=()=>{C.current&&i&&(C.current.stop(),o(!1))},G=()=>{f(!1),E(null),O.current=[]},ee=async()=>{if(b){p(!0);try{console.log("Uploading video to storage...");const Y=await aO(b,n,r.id);console.log("Video uploaded successfully:",Y);const P=await lO({assignmentId:r.id,studentId:n,videoUrl:Y.publicUrl,transcript:null},b,r.title);console.log("Submission created:",P),alert("Video submitted successfully! You will receive feedback shortly."),s()}catch(Y){console.error("Error submitting video:",Y),alert(`Failed to submit video: ${Y.message}. Please try again.`)}finally{p(!1)}}};return w.jsxs("div",{className:"recording-page",children:[w.jsxs("div",{className:"recording-header",children:[w.jsxs("h2",{className:"recording-title",children:["Record Assignment: ",r.title]}),w.jsx("p",{className:"recording-description",children:"Record your presentation for analysis"})]}),w.jsx("div",{className:"camera-section",children:w.jsxs("div",{className:"camera-container",children:[w.jsx("video",{ref:_,className:"camera-preview",autoPlay:!0,playsInline:!0,muted:!0}),i&&w.jsxs("div",{className:"recording-indicator",children:[w.jsx("div",{className:"recording-dot"}),w.jsx("span",{children:"Recording..."})]})]})}),w.jsx("div",{className:"recording-controls",children:u?w.jsxs("div",{className:"post-recording-controls",children:[w.jsx("button",{className:"re-record-btn",onClick:G,children:"Re-record"}),w.jsx("button",{className:"send-analysis-btn",onClick:ee,disabled:h,children:h?"Processing with AI...":"Send for Analysis"})]}):w.jsx("div",{className:"initial-controls",children:i?w.jsx("button",{className:"record-stop-btn",onClick:B,children:"Stop Recording"}):w.jsx("button",{className:"record-start-btn",onClick:U,disabled:!m,children:"Start Recording"})})}),w.jsx("button",{className:"back-btn",onClick:s,children:"Back to Assignment"})]})}function bO({onSelectStudent:r,onBackToTeacher:n}){const[s,i]=re.useState([]),[o,u]=re.useState(!0);return re.useEffect(()=>{(async()=>{try{const h=await oO();i(h)}catch(h){console.error("Error fetching students:",h)}finally{u(!1)}})()},[]),o?w.jsx("div",{className:"student-selector",children:"Loading students..."}):w.jsxs("div",{className:"student-selector",children:[w.jsx("h2",{className:"selector-title",children:"Select Student"}),w.jsx("div",{className:"students-grid",children:s.map(f=>w.jsxs("div",{className:"student-card",onClick:()=>r(f.id),children:[w.jsx("h3",{className:"student-name",children:f.name}),w.jsx("p",{className:"student-email",children:f.email}),w.jsxs("p",{className:"student-class",children:["Primary Class: ",f.primaryClass]}),w.jsxs("p",{className:"student-teacher",children:["Teacher: ",f.primaryTeacher]})]},f.id))}),w.jsx("button",{className:"back-btn",onClick:n,children:"Back to Teacher Dashboard"})]})}function wO(){const[r,n]=re.useState("teacher"),[s,i]=re.useState(null),[o,u]=re.useState(null),[f,h]=re.useState(null),[p,m]=re.useState(null),[v,b]=re.useState(null),E=P=>{i(P),n("class")},_=()=>{i(null),u(null),h(null),n("teacher")},C=P=>{u(P),n("assignment")},O=()=>{u(null),h(null),n("class")},N=P=>{h(P),n("studentDetail")},q=()=>{h(null),n(o?"assignment":"class")},U=P=>{m(P),n("studentAssignment")},B=()=>{m(null),n("student")},G=P=>{m(P),n("recording")},ee=()=>{n("studentAssignment")},Y=P=>{b(P),n("student")};return w.jsxs(w.Fragment,{children:[w.jsx(lS,{}),r==="teacher"&&w.jsx(dO,{onSwitchToStudent:()=>n("studentSelector"),onEnterClass:E}),r==="studentSelector"&&w.jsx(bO,{onSelectStudent:Y,onBackToTeacher:()=>n("teacher")}),r==="student"&&v&&w.jsx(fO,{studentId:v,onSwitchToTeacher:()=>n("teacher"),onViewStudentAssignment:U}),r==="class"&&w.jsx(mO,{className:s,onBack:_,onViewAssignment:C,onViewStudent:N}),r==="assignment"&&w.jsx(pO,{assignment:o,onBack:O,onViewStudent:N}),r==="studentDetail"&&w.jsx(yO,{student:f,onBack:q}),r==="studentAssignment"&&w.jsx(_O,{assignment:p,studentId:v,onBack:B,onViewRecording:G}),r==="recording"&&w.jsx(vO,{assignment:p,studentId:v,onBack:ee})]})}rS.createRoot(document.getElementById("root")).render(w.jsx(re.StrictMode,{children:w.jsx(wO,{})}));
